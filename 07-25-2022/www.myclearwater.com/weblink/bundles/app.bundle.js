System.registerDynamic("dist/app/browse/Entry.js",[],!1,function(a,b,c){return System.registry.get("@@global-helpers").prepareGlobal(c.id,null,null)()}),System.register("dist/app/browse/app-routing.module.js",["@angular/core","@angular/router","./grid.component.js"],function(a,b){"use strict";var c,d,e,f,g,h=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=[{path:"primeng",component:e.GridComponent}],g=function(){function a(){}return a=h([c.NgModule({imports:[d.RouterModule.forRoot(f)],exports:[d.RouterModule]})],a)}(),a("AppRoutingModule",g)}}}),System.register("dist/app/browse/browse.component.js",["@angular/core","@angular/platform-browser","./../folder-listing.service.js","./../weblinkcontrols-types.js","./grid.component.js","./../localization.service.js","./../customization.service.js","./../shared.service.js","./../util.js","./../search.service.js","./../document.service.js"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},p=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a}],execute:function(){n=function(){function a(a,b,c,d,e,g,h,i){this.folderListingService=a,this.localizationService=b,this.documentService=c,this.customizationService=d,this.sharedService=e,this.contextService=g,this.titleService=h,this.searchService=i,this.tabSelected="metadata",this.folderInfo={name:"",totalRecords:null,iconClass:"",path:[],id:0},this.folderId=0,this.selectedEntryInfo={name:"",id:0,metadata:this.metaData,iconClass:"FolderIcon",targetType:f.EntryType.Folder,thumbnailPaths:[],pageCount:0,pageInfos:[],hasImagedPages:!1,parentId:1,edocUrl:"",extension:"",mediaMimeType:"",mediaHandlerUrl:"",linkTo:0},this.multipleSelected=!1,this.mainLogoSrc="",this.hideSearchBar=!1,this.responsiveSmall=!1,this.showMetadataIcon=!1,this.showBreadcrumb=!1,this.showHomeLink=!1,this.showPrefLink=!1}return a.prototype.onResize=function(a){this.setResponsiveSettings()},a.prototype.setResponsiveSettings=function(){$(window).width()<=768?(this.responsiveSmall=!0,this.showMetadataIcon=!0):(this.responsiveSmall=!1,this.showMetadataIcon=!1),this.checkOrientation();var a=$(".actionBar").height(),b=$(".browseMain");b.length&&b[0].style&&a>0&&(b[0].style.top=a+50+"px"),this.adjustGridHeight()},a.prototype.checkOrientation=function(){var a=$(window).width();a<=768||a<=812&&a>$(window).height()?$(".logoImage").width()>100&&$(".logoImage").addClass("scaledLogo"):$(".logoImage").removeClass("scaledLogo")},a.prototype.adjustGridHeight=function(){var a=33;try{$(".ui-datatable-scrollable-header").height()>0&&(a=$(".ui-datatable-scrollable-header").height())}catch(a){}if(this.responsiveSmall)$(".responsiveGrid").offset()&&$(".responsiveGrid").offset().top>0&&($(".ui-datatable-scrollable-body").height($(window).height()-$(".responsiveGrid").offset().top-a),$(".ui-datatable-scrollable-body").css({"max-height":"initial"}),$(".ui-datatable-scrollable-body").css({"max-height":$(window).height()+"px"}));else{var b=$(".left").height()-a+"px";$(".ui-datatable-scrollable-body").height(b),$(".ui-datatable-scrollable-body").css({"max-height":"initial"}),$(".ui-datatable-scrollable-body").css({"max-height":$(window).height()+"px"})}},a.prototype.ngOnInit=function(){var a=this;this.localizationService.loadAllStrings();var b=this.localizationService.getEmitter().subscribe(function(c){a.downloadString=a.localizationService.getString("DOWNLOAD_SELECTED"),a.emailString=a.localizationService.getString("STR_EMAIL"),a.shareLinkString=a.localizationService.getString("SHARE_LINK"),a.noActionAvailableString=a.localizationService.getString("NO_ITEMS_CONTEXT_MENU"),b.unsubscribe()}),c=this;this.sharedService.getVdirNames().subscribe(function(a){c.contextService.setVdirName(a[0])});var d=function(){c.searchService.hasSearchRights(c.repoName).subscribe(function(a){a||(c.hideSearchBar=!0)}),c.folderListingService.showLinks(c.repoName).subscribe(function(a){a&&(c.showHomeLink=a.ShowHomeLink,c.showPrefLink=a.ShowMyWeblink)}),c.customizationService.getMainLogoSrc(c.repoName).subscribe(function(a){c.mainLogoSrc=a,c.ngAfterViewInit()}),c.folderListingService.getRootFolderId(c.repoName).subscribe(function(a){var b=c.contextService.getParamsFromUrl();c.entryId=b.entryIdFound?b.entryId:a,c.folderId=c.entryId}),c.documentService.getDocViewerSettings(c.contextService.getVdirName(),c.contextService.getRepoName()).subscribe(function(a){c.showBreadcrumb="1"==a.showBreadcrumb,c.contextService.setDisplayBreadcrumb(c.showBreadcrumb)})};this.repoName=this.contextService.getRepoName(),this.repoName?d():this.folderListingService.getRepoNameByDbid(this.contextService.getDbid()).subscribe(function(a){a&&(c.repoName=a,c.contextService.setRepoName(c.repoName)),d()}),this.dbOrRepoParam=this.contextService.getParamsFromUrl().dbidRepo,this.dbOrRepoParam||this.folderListingService.getDbid().subscribe(function(a){c.dbOrRepoParam=a}),this.pageDir=$("body").attr("class"),this.ratio="ltr"==this.pageDir?.8:.2,this.checkOrientation(),$(window).bind("orientationchange",function(a){c.setResponsiveSettings()}),this.pageDir=$("body").attr("class"),this.ratio="ltr"==this.pageDir?.8:.2},a.prototype.ngAfterViewInit=function(){var a=this;setTimeout(function(){var b=$(".actionBar").height(),c=$(".browseMain");c.length&&c[0].style&&b>0&&(c[0].style.top=b+50+"px"),a.adjustGridHeight()},500),$(window).width()<=768?(this.responsiveSmall=!0,this.showMetadataIcon=!0):(this.responsiveSmall=!1,this.showMetadataIcon=!1),setTimeout(function(){$("vertical-split-separator")[0]&&a.setMobileDragEvent($("vertical-split-separator")[0])},500),$(".logoImage").on("load",function(){a.checkOrientation()})},a.prototype.showMetadataPaneResponsive=function(a){a?($(".responsiveMetadata").show(),$(".responsiveGrid").hide()):($(".responsiveMetadata").hide(),$(".responsiveGrid").show())},a.prototype.setMobileDragEvent=function(a){function b(a){var b=a/c()*100;$(".left-component").first().css("width",b+"%"),$(".right-component").css("width","calc("+(100-b)+"% - "+$("vertical-split-separator").width()+"px)")}function c(){return $("vertical-split-pane")[0].offsetWidth}a.addEventListener("touchmove",function(a){b(a.changedTouches[0].pageX)})},a.prototype.selectedEntryChange=function(a){var b=this.parseEntryType(a.data.EntryType);a.data.Extension?b=a.data.iconClass:-1==a.data.EntryType&&(b=this.parseEntryType(a.data.LinkType)),this.selectedEntryInfo.thumbnailPaths=[],a.data.multiple?(this.multipleSelected=!0,this.selectedEntryInfo.name=this.localizationService.getString("MULTIPLE_ENTRIES"),this.metaData=new f.MetaData,this.tagInfo=[]):(this.multipleSelected=!1,this.selectedEntryInfo.name=a.data.Name,this.selectedEntryInfo.id=a.data.Id,this.selectedEntryInfo.iconClass=b,this.selectedEntryInfo.targetType=a.data.LinkType,a.data.LinkTo?this.selectedEntryInfo.linkTo=a.data.LinkTo:this.selectedEntryInfo.linkTo=a.data.Id,this.getMetaData(a.data.Id))},a.prototype.getMetaData=function(a){var b=this;this.tagInfo=[],this.folderListingService.getMetaData(this.contextService.getVdirName(),this.repoName,a).subscribe(function(a){if(a&&(b.metaData=a,null!=a.err&&"LoginError"==a.err&&location.reload(),b.metaData.templateName||(b.metaData.templateName=b.localizationService.getString("STR_NO_TEMPLATE_ASSIGNED")),b.metaData.tagIds))for(var c=0,d=b.metaData.tagIds;c<d.length;c++){var e=d[c];b.tagInfo.push(b.contextService.getTagInfo(e))}})},a.prototype.changeFolder=function(a){this.selectedEntryInfo.thumbnailPaths=[],this.multipleSelected=!1,0!=a.id&&this.gridComponent.changeFolderUrl(a.id)},a.prototype.navigateToUrl=function(a){switch(a){case"About":window.open("/"+this.contextService.getVdirName()+"/About.aspx?"+this.getDbOrRepoParam(),this.localizationService.getString("STR_ABOUT_TITLE"),"width=500, height=300");break;case"Help":window.open("https://www.laserfiche.com/support/webhelp/weblink/10/en-US/WL/WebLink.htm");break;case"SignOut":location.href="Login.aspx?showLogin=yes&"+this.getDbOrRepoParam()}},a.prototype.parseEntryType=function(a){var b="";switch(a){case f.EntryType.Document:b="Document";break;case f.EntryType.Folder:b="FolderIcon";break;case f.EntryType.RecordSeries:b="Recordseries"}return b},a.prototype.updateFolderInfo=function(a){this.folderInfo.totalRecords=a.totalRecords,this.folderInfo.iconClass=this.parseEntryType(a.entryType),this.folderInfo.id=a.id,this.selectedEntryInfo.iconClass=this.folderInfo.iconClass,this.selectedEntryInfo.targetType=a.entryType,this.selectedEntryInfo.id=this.folderInfo.id,this.selectedEntryInfo.linkTo=this.folderInfo.id,null!=a.name&&a.name.length>0?(this.folderInfo.name=a.name,this.selectedEntryInfo.name=this.folderInfo.name,this.titleService.setTitle(a.name)):(this.folderInfo.name=this.repoName,this.selectedEntryInfo.name=this.folderInfo.name,this.selectedEntryInfo.iconClass="FolderIcon"),this.getMetaData(a.id)},a.prototype.updateBreadCrumb=function(a){this.breadcrumbs=a},a.prototype.getDbid=function(a){this.dbid=a},a.prototype.getSearchLink=function(){var a="Search.aspx";return this.getDbOrRepoParam()&&(a+="?"+this.getDbOrRepoParam()),a},a.prototype.getPrefsLink=function(){if(!this.showPrefLink)return"";var a="MyWebLink.aspx";return this.getDbOrRepoParam()&&(a+="?"+this.getDbOrRepoParam()),a},a.prototype.getHomeLink=function(){if(!this.showHomeLink)return"";var a="Welcome.aspx";return this.getDbOrRepoParam()&&(a+="?"+this.getDbOrRepoParam()),a},a.prototype.getDbOrRepoParam=function(){var a="";return this.contextService.getParamsFromUrl().dbidRepo?a=this.contextService.getParamsFromUrl().dbidRepo:this.contextService.getDefaultRepoParam()&&(a=this.contextService.getDefaultRepoParam()),this.dbOrRepoParam=a,this.contextService.setDefaultRepoParam(this.dbOrRepoParam),this.dbOrRepoParam},o([c.ViewChild(g.GridComponent),p("design:type",g.GridComponent)],a.prototype,"gridComponent",void 0),o([c.HostListener("window:resize",["$event"]),p("design:type",Function),p("design:paramtypes",[Object]),p("design:returntype",void 0)],a.prototype,"onResize",null),a=o([c.Component({selector:"browse-app",template:'\n        <div class="navbar navbar-inverse navbar-fixed-top actionBar" role="banner">\n            <div style="position: relative;">\n                <a [hidden]="!showHomeLink" [href]="getHomeLink()" lfLocalizeAriaLabelAndTitle="STR_HOME" class="homeLink"><img class="logoImage" alt="Laserfiche WebLink" [src]="mainLogoSrc" /></a>\n                <div [hidden]="showHomeLink" class="homeLink"><img class="logoImage" alt="Laserfiche WebLink" [src]="mainLogoSrc" /></div>\n                <div class="searchBarContainer browsePageBox">\n                    <search-bar *ngIf="!hideSearchBar" [folderId]="folderInfo.id" [dbidRepo]="dbOrRepoParam" [dbid]="dbid" [repoName]="repoName" [showDropdownMenu]=true></search-bar>\n                </div>\n                <div class="topBarNavigation">\n                    <a *ngIf="showPrefLink" [href]="getPrefsLink()"><span lfLocalize="STR_MY_WEBLINK"></span></a>\n                    \n                    <div class="dropdown more-dropdown" dropdown>\n                        <button class="dropdownButton btn dropdown-toggle" dropdown-open aria-haspopup="true">\n                            <span lfLocalize="STR_MORE"></span> <div class="icon icon-down"></div>\n                        </button>\n                        <ul class="dropdown-menu" dropdown-not-closable-zone>\n                            <li><a href="javascript:void(0)" (click)="navigateToUrl(\'Help\')" ><span lfLocalize="STR_HELP"></span></a></li>\n                            <li><a href="javascript:void(0)" (click)="navigateToUrl(\'About\')"><span lfLocalize="STR_ABOUT"></span></a></li>\n                            <li><a href="javascript:void(0)" (click)="navigateToUrl(\'SignOut\')" ><span lfLocalize="STR_LOGOUT"></span></a></li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <breadcrumb-list (changeFolderCrumb)="changeFolder($event)" (showMetadata)="showMetadataPaneResponsive($event)" [totalRecords]="folderInfo.totalRecords" [showMetadataIcon]="showMetadataIcon" [breadcrumbs]="breadcrumbs"></breadcrumb-list>\n        <vertical-split-pane  *ngIf="!responsiveSmall"\n            local-storage-key="split-pane"\n            primary-component-initialratio={{ratio}}\n            separator-thickness="5"\n            class="browseMain">\n\n            <div class="split-pane-content-primary">\n                <div class="left">\n                    <primeng-grid *ngIf="pageDir== \'ltr\'" [downloadString]="downloadString" [shareLinkString]="shareLinkString" [emailString]="emailString" [noActionAvailableString]="noActionAvailableString" class="browserGrid" (selectedFolder)="selectedEntryChange($event)" (dbRepoNameEmit)="getDbid($event)" (folderInfoEmit)="updateFolderInfo($event)" (breadcrumbEntries)="updateBreadCrumb($event)" (focus)="onBrowserGridFocus()"></primeng-grid>\n                    <metadata-pane *ngIf="pageDir== \'rtl\'" [selectedEntryInfo]="selectedEntryInfo" [multipleSelected]="multipleSelected" [metadata]="metaData" [tagInfo]="tagInfo" docViewer="false" [parentId]="entryId"></metadata-pane>\n                </div>\n            </div>\n            <div class="split-pane-content-secondary">\n                <metadata-pane *ngIf="pageDir== \'ltr\'" [selectedEntryInfo]="selectedEntryInfo" [multipleSelected]="multipleSelected" [metadata]="metaData" [tagInfo]="tagInfo" docViewer="false" [parentId]="entryId" ></metadata-pane>\n                <primeng-grid *ngIf="pageDir== \'rtl\'" [downloadString]="downloadString" [shareLinkString]="shareLinkString" [emailString]="emailString" [noActionAvailableString]="noActionAvailableString" class="browserGrid" (selectedFolder)="selectedEntryChange($event)" (dbRepoNameEmit)="getDbid($event)" (folderInfoEmit)="updateFolderInfo($event)" (breadcrumbEntries)="updateBreadCrumb($event)" (focus)="onBrowserGridFocus()"></primeng-grid>\n             </div>\n        </vertical-split-pane>\n\n        <div *ngIf="responsiveSmall" class="split-pane-content-primary responsiveGrid">\n           <primeng-grid [downloadString]="downloadString" [shareLinkString]="shareLinkString" [emailString]="emailString"  class="browserGrid" (selectedFolder)="selectedEntryChange($event)" (dbRepoNameEmit)="getDbid($event)" (folderInfoEmit)="updateFolderInfo($event)" (breadcrumbEntries)="updateBreadCrumb($event)"></primeng-grid>\n        </div>\n        <div *ngIf="responsiveSmall" class="split-pane-content-primary responsiveMetadata">\n            <metadata-pane  [selectedEntryInfo]="selectedEntryInfo" [metadata]="metaData" [tagInfo]="tagInfo" docViewer="false" [parentId]="entryId"></metadata-pane>\n        </div>\n    ',providers:[e.FolderListingService]}),p("design:paramtypes",[e.FolderListingService,h.LocalizationService,m.DocumentService,i.CustomizationService,j.SharedService,k.ContextService,d.Title,l.SearchService])],a)}(),a("BrowseComponent",n)}}}),System.register("dist/app/browse/grid.component.js",["@angular/core","@angular/common","./../folder-listing.service.js","./../shared.service.js","./../weblinkcontrols-types.js","@ng-bootstrap/ng-bootstrap","./browse-modal.js","./../util.js","./../download_progress.js"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},n=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(){function a(a,b,d,e,f,g,h){this.modalService=a,this.folderListingService=b,this.location=d,this.platformLocation=e,this.contextService=g,this.sharedService=h,this.dbRepoNameEmit=new c.EventEmitter,this.folderInfoEmit=new c.EventEmitter,this.breadcrumbEntries=new c.EventEmitter,this.selectedFolder=new c.EventEmitter,this.folders=[],this.cols=[],this.rows=20,this.loadColumnInfo=!0,this.loading=!1,this.contextMenuItems=[],this.selectAllToggled=!1,this.selectedRows=[],this.currSelectedRowIndex=null,this.currSortInfo={sortField:null,sortOrder:null},this.exportRights=!1,this.emailConfigured=!1,this.listingCache=[],this.selectedColumns=[],this.showColumnPicker=!1,this.items=[{name:"John",otherProperty:"Foo"},{name:"Joe",otherProperty:"Bar"}]}return a.prototype.ngOnInit=function(){var a=this;this.firstTimeLoading=!0;var b=this,c=function(){b.folderListingService.getOpenSettings(b.contextService.getVdirName(),b.repoName).subscribe(function(a){b.openSettings=a}),b.contextService.getRepoTagInfo()||b.folderListingService.getCachedInfo(b.repoName).subscribe(function(a){a&&b.contextService.setRepoTagInfo(a)}),b.isEmailConfigured(),b.getAvailableColumnInfo(),b.init()};this.repoName=this.contextService.getRepoName(),this.repoName?c():this.folderListingService.getRepoNameByDbid(this.contextService.getDbid()).subscribe(function(a){a&&(b.repoName=a,b.contextService.setRepoName(b.repoName)),c()}),this.platformLocation.onPopState(function(){b.init(),b.loadData({filters:{},first:0,rows:2*a.rows,sortOrder:1}),b.getBreadCrumbEntries()}),$("html, body").click(function(a){$(".context-menu").hide()}),this.globalMediaDisplay=new MediaDisplay("mediaDisplay","media-header","media-icon","media-name","media-container","video","source","media-share","media-download","media-close","media-url-container","media-url-input"),$(document).keypress(function(a){var c=c||a.keyCode;if(13==c&&1==b.selectedRows.length){var d=b.selectedRows[0];b.rowSelect({data:d})}}),$(document).keydown(function(a){var c=c||a.keyCode;if(39==c&&$(".ui-datatable-thead").is(":focus"),37==c&&$(".ui-datatable-thead").is(":focus"),40==c||38==c){if($(".ui-datatable-scrollable-table-wrapper").is(":focus")){a.preventDefault(),a.stopPropagation();var d=b.currSelectedRowIndex;if(d||(b.selectedRows[0]=b.folders[0],b.rowSingleSelect({data:b.folders[0]})),d){var e;e=b.folders?b.folders.length:b.rows;var f=$(".ui-datatable-scrollable-body").scrollTop(),g=$(".ui-datatable-scrollable-body").height()+f,h=$(".ui-state-highlight").offset(),i=h.top+f}if(40==c&&(null!=d&&(d+=1,d>e-1?d=null:(b.selectedRows[0]=b.folders[d],b.rowSingleSelect({data:b.folders[d]}))),i>g-10)){var j=Math.abs(i-g);$(".ui-datatable-scrollable-body").scrollTop(f+j)}if(38==c&&null!=d&&(d-=1,d<0?d=null:(b.selectedRows[0]=b.folders[d],b.rowSingleSelect({data:b.folders[d]})),0!=f&&i<f+200)){var k=$(".ui-state-highlight").outerHeight();parseInt(k);$(".ui-datatable-scrollable-body").scrollTop(f-k)}}}else 9==c?($(".ui-datatable-scrollable-table-wrapper").is(":focus")&&(a.preventDefault(),a.stopPropagation(),a.shiftKey?$(".ui-datatable-thead").focus():$(".right-component .metaData").focus()),$(".ui-datatable-thead").is(":focus")&&!a.shiftKey&&(a.preventDefault(),a.stopPropagation(),$(".ui-datatable-scrollable-table-wrapper").focus()),$(".right-component .metaData").is(":focus")&&a.shiftKey&&(a.preventDefault(),a.stopPropagation(),$(".ui-datatable-scrollable-table-wrapper").focus())):32==c?$(".ui-datatable-thead").is(":focus")&&$(".ui-datatable-thead p-dtcheckbox input").length&&(a.preventDefault(),a.stopPropagation(),$(".ui-datatable-thead .ui-chkbox-box").click()):121==c&&a.shiftKey&&($(".ui-datatable-thead").is(":focus")&&(a.preventDefault(),a.stopPropagation(),$(".context-menu").show(),setTimeout(function(){$(".context-menu li a")[0].focus()},500)),$(".ui-datatable-scrollable-table-wrapper").is(":focus")&&(a.preventDefault(),a.stopPropagation(),$(".ui-contextmenu").show(),setTimeout(function(){$(".ui-contextmenu li a")[0].focus()},500)))}),this.pageDir=$("body").attr("class")},a.prototype.init=function(){this.contextMenuItems=[],this.getNewListing=!0,this.listingCache=[],this.hasExportRights(),this.selectAllToggled=!1,this.contextService.msieversion()&&this.loadData({filters:{},first:0,rows:2*this.rows,sortOrder:1})},a.prototype.ngOnChanges=function(a){},a.prototype.ngAfterViewInit=function(){this.contextMenu();var a=this;$(".ui-widget-content").mousedown(function(b){3==b.which&&setTimeout(function(){1==a.selectedRows.length&&(a.addShareLinkToContextMenu(),a.addEmailLinkToContextMenu(),$(".ui-menu").width(175))},200)}),$(".ui-datatable-scrollable-table-wrapper").attr("tabindex","0"),$(".ui-datatable-thead").attr("tabindex","0"),"rtl"==this.pageDir&&setTimeout(function(){var a=$(".ui-datatable-scrollable-body").width();$(".ui-datatable-scrollable-body").scrollLeft(a),$(".ui-datatable .ui-widget-content").each(function(a){$(this).css("direction","rtl")})},500)},a.prototype.addEmailLinkToContextMenu=function(){var a=this;this.emailConfigured&&(this.exportRights?-2==this.selectedRows[0].EntryType||-1==this.selectedRows[0].EntryType&&-2==this.selectedRows[0].LinkType?this.contextMenuItems[2]={label:this.emailString,command:function(b){return a.emailDocument(b)}}:this.removeEmailFromContextMenu():-2==this.selectedRows[0].EntryType||-1==this.selectedRows[0].EntryType&&-2==this.selectedRows[0].LinkType?this.contextMenuItems[1]={label:this.emailString,command:function(b){return a.emailDocument(b)}}:this.removeEmailFromContextMenu())},a.prototype.addShareLinkToContextMenu=function(){var a=this;this.exportRights?this.contextMenuItems[1]={label:this.shareLinkString,command:function(b){return a.generateLink(b)}}:this.contextMenuItems[0]={label:this.shareLinkString,command:function(b){return a.generateLink(b)}}},a.prototype.removeEmailFromContextMenu=function(){if(this.emailConfigured){for(var a=-1,b=0;b<this.contextMenuItems.length;b++)if(this.contextMenuItems[b].label==this.emailString){a=b;break}a>-1&&this.contextMenuItems.splice(a,1)}},a.prototype.removeShareLinkFromContextMenu=function(){for(var a=-1,b=0;b<this.contextMenuItems.length;b++)if(this.contextMenuItems[b].label==this.shareLinkString){a=b;break}a>-1&&this.contextMenuItems.splice(a,1)},a.prototype.contextMenu=function(){$(".ui-datatable-thead").contextmenu(function(a){var b=10;return $(window).width()<=768&&(b=a.pageY),$(".context-menu").css({left:a.pageX,top:b}),$(".context-menu").hide(),$(".context-menu").show(),!1})},a.prototype.setFolderTouchEvent=function(){var a=this;$(".ui-datatable-scrollable-view .ui-widget-content").each(function(b){$(this).bind("touchstart",function(b){b.pageX,b.pageY,setTimeout(function(){if(1==a.selectedRows.length){var b=a.selectedRows[0];a.rowSelect({data:b}),a.selectedRows=[]}},300)})})},a.prototype.attachmentLoad=function(a,b,c){if(!c||0==c.length){c=[];for(var d=0,e=this.selectedRows;d<e.length;d++){var f=e[d];c.push(f.Id.toString())}}var g=this.contextService.msieversion(),h=this.modalService.open(k.DownloadProgressModal,{backdrop:"static"});h.componentInstance.dialogHeader="STR_WEBLINK_EXPORT",h.result.then(function(a){a&&l.unsubscribe()});var j=this;if(c.length>0)var l=this.folderListingService.multiDownloadAsZip(this.contextService.getVdirName(),this.repoName,c,a,b).subscribe(function(a){if(a.needAuditReason||a.needWatermarkSelection){h.close();var b=j.modalService.open(i.ExportOptionsModal,{backdrop:"static"});b.componentInstance.searchIds=c,b.componentInstance.dbid=j.dbRepoName,b.componentInstance.needAuditReason=a.needAuditReason,b.componentInstance.needWatermarkSelection=a.needWatermarkSelection,b.result.then(function(a){a&&j.attachmentLoad(a.key,a.watermarkIdx,c)})}else a.errorMessage?(alert(a.errorMessage),h.close()):a.token&&j.checkExportStatus(a.token,g,h)},function(a){h.close()})},a.prototype.checkExportStatus=function(a,b,c){var d=this;this.folderListingService.checkExportStatus(a).subscribe(function(e){e.errorMessage?(alert(e.errorMessage),c.close()):e.finished?d.folderListingService.getExportJob(a).subscribe(function(a){if("application/zip"==a._body.type){var e=new Blob([a.blob()],{type:"application/zip"}),f=URL.createObjectURL(e);if(!b){var g=document.createElement("a");g.download="ExportedContents.zip",g.href=f;var h=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});g.dispatchEvent(h)}b&&window.navigator.msSaveOrOpenBlob(e,"ExportedContents.zip"),c.close()}else{var i=d.selectedRows[0],j=i.Extension,e=new Blob([a.blob()],{type:a._body.type}),f=URL.createObjectURL(e);if(null==j&&(j="application/pdf"==a._body.type?"pdf":""),!b){var g=document.createElement("a");g.download=i.Name+"."+j,g.href=f;var h=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});g.dispatchEvent(h)}b&&window.navigator.msSaveOrOpenBlob(e,i.Name+"."+j),c.close()}},function(a){console.log(a)}):setTimeout(function(){d.checkExportStatus(a,b,c)},3e3)},function(a){console.log(a)})},a.prototype.hasExportRights=function(){var a=this;this.folderListingService.getExportRights(this.repoName).subscribe(function(b){b&&(a.exportRights=b.hasExportRights,a.exportRights&&a.contextMenuItems.splice(0,0,{label:a.downloadString,command:function(b){return a.attachmentLoad(-1,-1,[])}}))})},a.prototype.isEmailConfigured=function(){var a=this;this.sharedService.emailConfigured(this.contextService.getVdirName(),this.repoName).subscribe(function(b){b&&(a.emailConfigured=b)})},a.prototype.getSelectionMode=function(){return"multiple"},a.prototype.emit=function(a){this.folderListingService.emitColumn(a)},a.prototype.getAvailableColumnInfo=function(){var a=this;a.folderListingService.getColumnInfo(a.repoName).subscribe(function(b){a.columnInfo=b,a.emit(a.columnInfo)})},a.prototype.saveColumnInfo=function(){var a=this,b=a.modalService.open(i.ColumnDisplayModal,{backdrop:"static"});this.columnInfo?(b.componentInstance.loading=!1,b.componentInstance.columnHeaders=a.columnInfo.colHeaders,b.componentInstance.columns=a.columnInfo.cols.slice(),b.componentInstance.selected=a.selectedColumns.slice()):(b.componentInstance.loading=!0,this.folderListingService.columnInfoObservable.subscribe(function(c){b.componentInstance.loading=!1,b.componentInstance.columnHeaders=a.columnInfo.colHeaders,b.componentInstance.columns=a.columnInfo.cols.slice(),b.componentInstance.columnsLoaded(),b.componentInstance.selected=a.selectedColumns.slice()})),b.result.then(function(b){b&&(a.selectedColumns=b,a.folderListingService.SaveSelectedColumnsToCookie(a.repoName,b,"BrowseColumns").subscribe(function(b){a.init(),a.loadColumnInfo=!0,a.loadData({filters:{},first:0,rows:2*a.rows,sortOrder:1})}))})},a.prototype.getRootFolderId=function(){var a=this;return new Promise(function(b,c){a.rootFolderId>0?b(a.rootFolderId):a.folderListingService.getRootFolderId(a.repoName).subscribe(function(c){a.rootFolderId=c,b(c)})})},a.prototype.getInitialFolderInfo=function(){this.folders=[],this.cols=[],$(".GridColumnWidth").width("0px"),$(".StaticColumnWidth").width("0px"),$(".ui-datatable-thead").css("visibility","hidden");var a=this;this.getRootFolderId().then(function(b){var c=a.contextService.getParamsFromUrl();a.entryId=c.entryIdFound?c.entryId:b,a.folderListingService.getFolderListing2(a.repoName,a.entryId,a.getNewListing,0,2*a.rows,"",!0).subscribe(function(b){if(b){if(a.folderInfo=b,a.folderInfo.failed)return alert(b.errMsg),void(a.loading=!1);a.totalRecords=a.folderInfo.totalEntries;var c={totalRecords:a.totalRecords,entryType:a.folderInfo.entryType,name:a.folderInfo.name,path:a.folderInfo.path,id:a.folderInfo.folderId};if(a.rootFolderInfo=c,a.showColumnPicker=b.showColumnPicker,a.folderInfoEmit.emit(c),a.selectedColumns=[],a.cols=[],"ltr"==a.pageDir){for(var d=0;d<a.folderInfo.colTypes.length;d++)if(1!=a.folderInfo.colTypes[d].hidden){var e=new g.Col;e.name=a.folderInfo.colTypes[d].name,e.displayName=a.folderInfo.colTypes[d].displayName,a.selectedColumns.push(e),a.folderInfo.colTypes[d].multiValue?a.cols.push({field:a.folderInfo.colTypes[d].name,header:a.folderInfo.colTypes[d].displayName,multiValue:!0,index:d}):a.cols.push({field:a.folderInfo.colTypes[d].name,header:a.folderInfo.colTypes[d].displayName,multiValue:!1,index:d})}}else for(var d=a.folderInfo.colTypes.length-1;d>=0;d--)if(1!=a.folderInfo.colTypes[d].hidden){var e=new g.Col;e.name=a.folderInfo.colTypes[d].name,e.displayName=a.folderInfo.colTypes[d].displayName,a.selectedColumns.push(e),a.folderInfo.colTypes[d].multiValue?a.cols.push({field:a.folderInfo.colTypes[d].name,header:a.folderInfo.colTypes[d].displayName,multivalue:!0,index:d}):a.cols.push({field:a.folderInfo.colTypes[d].name,header:a.folderInfo.colTypes[d].displayName,multivalue:!1,index:d})}a.getNewListing=!1,a.populateRecords(0,2*a.rows,a.folderInfo,0),a.getBreadCrumbEntries(),a.loading=!1}a.firstTimeLoading=!1,setTimeout(function(){$(".ui-datatable-thead").css("visibility","inherit"),a.setFolderTouchEvent()},200)},function(b){a.loading=!1})}),this.folderListingService.getDbid().subscribe(function(b){a.dbRepoName=b,a.dbRepoNameEmit.emit(b)})},a.prototype.changeFolderUrl=function(a){this.folders=[],this.totalRecords=0,this.location.go("Browse.aspx?id="+a+"&"+this.dbRepoName),this.currSelectedRowIndex=null,this.init(),this.loadColumnInfo=!1,this.loadData({filters:{},first:0,rows:2*this.rows,sortOrder:1}),this.getBreadCrumbEntries()},a.prototype.getBreadCrumbEntries=function(){var a=this;this.getRootFolderId().then(function(b){var c=a.contextService.getParamsFromUrl();a.entryId=c.entryIdFound?c.entryId:b,a.folderListingService.getBreadCrumbs(a.contextService.getVdirName(),a.repoName,a.entryId).subscribe(function(b){b&&a.breadcrumbEntries.emit(b)})})},a.prototype.generateLink=function(a){var b=this.selectedRows[0],c=b.EntryType;c==g.EntryType.Shortcut&&(c=b.LinkType);var d=b.Id;if(b.EntryType==g.EntryType.Shortcut&&(d=b.LinkTo),c==g.EntryType.Folder||c==g.EntryType.RecordSeries){var e=location.protocol+"//"+location.host+"/"+this.contextService.getVdirName()+"/Browse.aspx?id="+d+"&"+this.dbRepoName,f=this.modalService.open(i.ShareLinkModal,{backdrop:"static"});f.componentInstance.link=e}else if(c==g.EntryType.Document){var e=location.protocol+"//"+location.host+"/"+this.contextService.getVdirName()+"/DocView.aspx?id="+d+"&"+this.dbRepoName,f=this.modalService.open(i.ShareLinkModal,{backdrop:"static"});f.componentInstance.link=e}},a.prototype.emailDocument=function(a){var b=this.selectedRows[0],c=b.Id;b.EntryType==g.EntryType.Shortcut&&(c=b.LinkTo);var d=location.protocol+"//"+location.host+"/"+this.contextService.getVdirName()+"/EmailDocument.aspx?id="+c+"&"+this.dbRepoName;window.open(d)},a.prototype.getEntryLink=function(a){var b;b=a.data?a.data:a;var c=b.EntryType;c==g.EntryType.Shortcut&&(c=b.LinkType);var d=b.Id;if(b.EntryType==g.EntryType.Shortcut&&(d=b.LinkTo),c==g.EntryType.Folder||c==g.EntryType.RecordSeries){var e="Browse.aspx?id="+d+"&"+this.dbRepoName;return e}if(c==g.EntryType.Document){var e="/"+this.contextService.getVdirName()+"/DocView.aspx?id="+d+"&"+this.dbRepoName;return e}},a.prototype.rowSelect=function(a){var b;b=a.data?a.data:a,this.selectedRows.push(b);var c=b.EntryType;c==g.EntryType.Shortcut&&(c=b.LinkType);var d=b.Id;if(b.EntryType==g.EntryType.Shortcut&&(d=b.LinkTo),c==g.EntryType.Folder||c==g.EntryType.RecordSeries)this.changeFolderUrl(d);else if(c==g.EntryType.Document){var e="/"+this.contextService.getVdirName()+"/DocView.aspx?id="+d+"&"+this.dbRepoName;if(b.Extension&&"pdf"==b.Extension.toLowerCase()&&!this.openSettings.openPdfInDocViewer){var f="/"+this.contextService.getVdirName()+"/ElectronicFile.aspx?docid="+d+"&"+this.dbRepoName;window.open(f)}else if(!b.Extension||"pdf"==b.Extension.toLowerCase()||b.mediaHandlerUrl||this.openSettings.openEdocInDocViewer)if(b.mediaHandlerUrl&&this.openSettings.streamMedia){var h=window.location.toString();try{this.globalMediaDisplay.showVideo(this.dbRepoName,b.Name,d,b.mediaHandlerUrl,b.mediaMimeType,h.substring(0,h.indexOf("Browse.aspx")),h.substring(h.indexOf("Browse.aspx")))}catch(a){console.log(a)}}else window.open(e);else{var f="/"+this.contextService.getVdirName()+"/ElectronicFile.aspx?docid="+d+"&"+this.dbRepoName;window.open(f)}}a.originalEvent&&(a.originalEvent.preventDefault(),a.originalEvent.stopPropagation())},a.prototype.rowSingleSelect=function(a){if(this.currSelectedRowIndex=this.folders.findIndex(function(b){return b.Id==a.data.Id}),this.selectedRows.length>1&&(this.removeEmailFromContextMenu(),this.removeShareLinkFromContextMenu(),this.exportRights||(this.contextMenuItems[0]={label:this.noActionAvailableString},$(".ui-menu").width(300))),"single"==this.getSelectionMode()&&(this.selectedRows=[],this.selectedRows.push(a.data)),"multiple"==this.getSelectionMode()){this.selectedRows.length<=1?this.selectedFolder.emit(a):this.selectedFolder.emit({data:{multiple:!0}})}else this.selectedFolder.emit(a)},a.prototype.rowUnselect=function(a){this.selectedRows.length,0==this.selectedRows.length?this.folderInfoEmit.emit(this.rootFolderInfo):1==this.selectedRows.length?this.selectedFolder.emit({data:this.selectedRows[0]}):this.selectedRows.length>0&&this.selectedFolder.emit({data:{multiple:!0}})},a.prototype.log=function(a){console.log(a)},a.prototype.getScreenHeight=function(){var a=$(".left").height()-39+"px";return this.gridContainerHeight=a,a},a.prototype.parseMVF=function(a){var b=-1,c="",d=!1;if(a)for(var e=0,f=a;e<f.length;e++){var g=f[e];g.includes("\n")?(d=!0,c+=g+"<br/>"):c+=d?"<div class = 'groupTextStyle'>"+g+"</div>":g+"</br>",b+=1}return{fields:c,count:b,group:d}},a.prototype.populateRecords=function(a,b,c,d){for(var e=this.getAllRowsSelected(),f=[],g=a;g<b;g++){var h={};if(null!=c.results[g]){h.mvFields=[];for(var i=0;i<c.colTypes.length;i++)h[c.colTypes[i].name]=c.results[g].data[i],this.parseMVF(c.results[g].multiValueFields[i]),h.mvFields[i]=this.parseMVF(c.results[g].multiValueFields[i]);h.imagePath=c.results[g].pathToImage,h.iconClass=c.results[g].iconClass,h.mediaMimeType=c.results[g].mediaMimeType,h.mediaHandlerUrl=c.results[g].mediaHandlerUrl,f.push(h)}e&&(console.log("all rows are selected"),this.selectedRows.push(h))}e&&(console.log("all rows are selected"),this.selectedRows.push(h)),this.folders=f,this.listingCache[d]=this.folders},a.prototype.getRecords=function(a,b,c,d){var e=!0;"creationDate"==c&&(c="CreationDate"),"dateModified"==c&&(c="LastModified"),-1==d&&(e=!1),$(".GridColumnWidth").width("0px"),$(".StaticColumnWidth").width("0px"),$(".ui-datatable-thead").css("visibility","hidden");var f=this;this.getRootFolderId().then(function(d){var h=f.contextService.getParamsFromUrl();f.entryId=h.entryIdFound?h.entryId:d,f.folderListingService.getFolderListing2(f.repoName,f.entryId,f.getNewListing,a,b,c,e).subscribe(function(c){if(c){f.folderInfo2=c,f.totalRecords=f.folderInfo2.totalEntries;var d=a/f.rows,e={totalRecords:f.totalRecords,entryType:f.folderInfo2.entryType,name:f.folderInfo2.name,path:f.folderInfo2.path,id:f.folderInfo2.folderId};if(f.showColumnPicker=f.folderInfo2.showColumnPicker,f.folderInfoEmit.emit(e),f.selectedColumns=[],f.cols=[],"ltr"==f.pageDir){for(var h=0;h<f.folderInfo2.colTypes.length;h++)if(1!=f.folderInfo2.colTypes[h].hidden){var i=new g.Col;i.name=f.folderInfo2.colTypes[h].name,i.displayName=f.folderInfo2.colTypes[h].displayName,f.selectedColumns.push(i),f.folderInfo2.colTypes[h].multiValue?f.cols.push({field:f.folderInfo2.colTypes[h].name,header:f.folderInfo2.colTypes[h].displayName,multiValue:!0,index:h}):f.cols.push({field:f.folderInfo2.colTypes[h].name,header:f.folderInfo2.colTypes[h].displayName,multiValue:!1,index:h})}}else for(var h=f.folderInfo2.colTypes.length-1;h>=0;h--)if(1!=f.folderInfo2.colTypes[h].hidden){var i=new g.Col;i.name=f.folderInfo2.colTypes[h].name,i.displayName=f.folderInfo2.colTypes[h].displayName,f.selectedColumns.push(i),f.folderInfo2.colTypes[h].multiValue?f.cols.push({field:f.folderInfo2.colTypes[h].name,header:f.folderInfo2.colTypes[h].displayName,multivalue:!0,index:h}):f.cols.push({field:f.folderInfo2.colTypes[h].name,header:f.folderInfo2.colTypes[h].displayName,multivalue:!1,index:h})}setTimeout(function(){$(".ui-datatable-thead").css("visibility","inherit")},200),f.getNewListing=!1,f.populateRecords(0,b-a,f.folderInfo2,d),f.currSelectedRowIndex&&(f.currSelectedRowIndex=f.currSelectedRowIndex-f.rows),f.loading=!1}},function(a){f.loading=!1})})},a.prototype.loadData=function(a){if(!this.loading){if(this.loading=!0,this.currSelectedRowIndex=this.currSelectedRowIndex+this.rows,this.currSortInfo&&a.sortField==this.currSortInfo.sortField&&a.sortOrder==this.currSortInfo.sortOrder||(this.currSortInfo.sortField=a.sortField,this.currSortInfo.sortOrder=a.sortOrder,this.listingCache=[],this.getNewListing=!0),this.getNewListing&&$(".ui-datatable-scrollable-body").scrollTop(0),this.loadColumnInfo)this.getInitialFolderInfo();else{if(!this.getNewListing){var b=a.first/this.rows;if(this.listingCache[b]){console.log("retrieving from cache...");var c=this;return setTimeout(function(){c.loading=!1},200),this.folders=this.listingCache[b],void(this.getAllRowsSelected()&&-1==this.selectedRows.map(function(a){return a.Id}).indexOf(this.folders[0].Id)&&(this.selectedRows=this.selectedRows.concat(this.folders)))}}this.folderInfo2=null,a.sortField?this.getRecords(a.first,a.first+a.rows,a.sortField,a.sortOrder):this.getRecords(a.first,a.first+a.rows,"",!0)}this.loadColumnInfo=!1}},a.prototype.getAllRowsSelected=function(){var a=!1;try{a=this.selectAllToggled&&$(".browserGrid .ui-datatable-thead p-dtcheckbox input").length&&$(".browserGrid .ui-datatable-thead p-dtcheckbox input")[0].checked,console.log(a)}catch(a){console.log(a)}return a},a.prototype.checkboxToggled=function(){this.selectAllToggled=!0},m([c.Output(),n("design:type",Object)],a.prototype,"dbRepoNameEmit",void 0),m([c.Output(),n("design:type",Object)],a.prototype,"folderInfoEmit",void 0),m([c.Output(),n("design:type",Object)],a.prototype,"breadcrumbEntries",void 0),m([c.Output(),n("design:type",Object)],a.prototype,"selectedFolder",void 0),m([c.Input(),n("design:type",Object)],a.prototype,"downloadString",void 0),m([c.Input(),n("design:type",Object)],a.prototype,"shareLinkString",void 0),m([c.Input(),n("design:type",Object)],a.prototype,"emailString",void 0),m([c.Input(),n("design:type",Object)],a.prototype,"noActionAvailableString",void 0),a=m([c.Component({selector:"primeng-grid",templateUrl:"./app/browse/grid-component.html",styles:[".EntryNameColumn{  overflow:hidden; text-overflow: ellipsis; white-space: nowrap; width:100%} .groupTextStyle {text-indent: 20px ;}"],providers:[d.Location,{provide:d.LocationStrategy,useClass:d.PathLocationStrategy}],encapsulation:c.ViewEncapsulation.None}),n("design:paramtypes",[h.NgbModal,e.FolderListingService,d.Location,d.PlatformLocation,c.ViewContainerRef,j.ContextService,f.SharedService])],a)}(),a("GridComponent",l)}}}),System.register("dist/app/browse/browse-modal.js",["@angular/core","@ng-bootstrap/ng-bootstrap","./../localization.service.js","./../folder-listing.service.js","./../shared.service.js","./../util.js"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},m=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(){function a(a){this.activeModal=a,this.showLoadingSpinner=!1,this.columnHeaders=[],this.columns=[],this.columnsCopy=[],this.selected=[],this.filteredOptionsHeaders=[],this.dragOverSelected=!1,this.dragOverAvailable=!1,this.filteredOptions=[]}return a.prototype.ngOnInit=function(){this.init()},a.prototype.init=function(){this.showLoadingSpinner=!0;for(var a=0;a<this.columns.length;a++){var b=[];this.columnsCopy.push(b);for(var c=0,d=this.columns[a];c<d.length;c++){var e=d[c];this.columnsCopy[a].push(e)}}this.filteredOptionsHeaders=this.columnHeaders,this.filteredOptions=this.columns,this.loadAvailableFromSelected()},a.prototype.columnsLoaded=function(){if(this.columns){for(var a=0;a<this.columns.length;a++){var b=[];this.columnsCopy.push(b);for(var c=0,d=this.columns[a];c<d.length;c++){var e=d[c];this.columnsCopy[a].push(e)}}this.filteredOptionsHeaders=this.columnHeaders,this.filteredOptions=this.columns,this.loadAvailableFromSelected()}},a.prototype.resetTodefault=function(){for(var a=0,b=this.selected;a<b.length;a++){var c=b[a];this.searchInAvailable(c)}this.selected=[],this.selected.push({name:"Name",displayName:"Name",templateId:-1}),this.dragOverSelected=!0,this.availableToSelected({dragData:{name:{name:"PageCount",displayName:"Page count"}}}),this.availableToSelected({dragData:{name:{name:"TemplateName",displayName:"Template name"}}}),this.availableToSelected({dragData:{name:{name:"CreationDate",displayName:"Date created"}}}),this.availableToSelected({dragData:{name:{name:"LastModified",displayName:"Date modified"}}}),this.dragOverSelected=!1},a.prototype.log=function(a){console.log(a)},a.prototype.availableToSelected=function(a){if(this.dragOverSelected){null!=this.dragIndex?(this.selected.splice(this.dragIndex,0,a.dragData.name),this.dragIndex=null):this.selected.push(a.dragData.name);for(var b=0;b<this.columns.length;b++)for(var c=0,d=0,e=this.columns[b];d<e.length;d++){var f=e[d];if(a.dragData.name.displayName==f.displayName){this.columns[b].splice(c,1);break}c++}this.search()}},a.prototype.selectedToAvailable=function(a){this.dragOverAvailable&&(this.selected.splice(a.dragData.index,1),this.searchInAvailable(a.dragData.nameInfo))},a.prototype.searchInAvailable=function(a){for(var b=0;b<this.columnsCopy.length;b++)for(var c=0,d=this.columnsCopy[b];c<d.length;c++){var e=d[c];if(a.name==e.name){this.columns[b].splice(0,0,a),this.search();break}}},a.prototype.loadAvailableFromSelected=function(){for(var a=0,b=this.selected;a<b.length;a++)for(var c=b[a],d=0;d<this.columns.length;d++)for(var e=0,f=0,g=this.columns[d];f<g.length;f++){var h=g[f];if(c.name==h.name){this.columns[d].splice(e,1),this.filteredOptions=this.columns;break}e++}},a.prototype.dblClickDrop=function(a){this.selected.push(a);for(var b=0;b<this.columns.length;b++)for(var c=0,d=0,e=this.columns[b];d<e.length;d++){var f=e[d];if(a.name==f.name){this.columns[b].splice(c,1);break}c++}this.search()},a.prototype.onColumnKeydown=function(a,b){var c=a.which||a.keyCode;32!==c&&10!==c&&13!==c||this.dblClickDrop(b)},a.prototype.dblClickDrop2=function(a){this.selected.splice(a.index,1),this.searchInAvailable(a.nameInfo)},a.prototype.onSelectedColumnKeydown=function(a,b){var c=a.which||a.keyCode;32!==c&&10!==c&&13!==c||this.dblClickDrop2(b)},a.prototype.enableOkClick=function(){return!0},a.prototype.filterOptions=function(a,b){for(var c=[],d=0,e=a;d<e.length;d++){var f=e[d];-1!=f.displayName.toLowerCase().indexOf(this.searchWord.toLowerCase())&&c.push(f)}return c},a.prototype.search=function(){if(this.searchWord){this.filteredOptionsHeaders=[],this.filteredOptions=[];for(var a in this.columnHeaders){var b=[];b=-1!=this.columnHeaders[a].toLowerCase().indexOf(this.searchWord.toLowerCase())?Object.assign([],this.columns[a]):this.filterOptions(this.columns[a],this.searchWord),b.length>0&&(this.filteredOptionsHeaders.push(this.columnHeaders[a]),this.filteredOptions.push(b))}}else this.filteredOptionsHeaders=this.columnHeaders,this.filteredOptions=this.columns},a.prototype.okClick=function(){this.activeModal.close(this.selected)},a.prototype.cancel=function(){this.activeModal.close()},l([c.Input(),m("design:type",String)],a.prototype,"vdirName",void 0),l([c.Input(),m("design:type",String)],a.prototype,"repoName",void 0),a=l([c.Component({selector:"column-display",template:'\n    <div class="modal-header">\n        <span class="dialogTitle">\n            <span class="dialogHeaderText" lfLocalize="CONFIGURE_COLUMN_DISPLAY"></span>\n         \n        </span>\n        <a href="javascript:void(0)" class="icon icon-close icon-fading" (click)="cancel()"></a>\n    </div>\n    <div class="modal-body">\n\n        <div class="search-grid-loading-icon" *ngIf="loading">\n            <table style="height: 393px; width:563px; margin:0; padding:0; border:0">\n                <tr><td style="text-align:center; vertical-align: middle"><i class="icon-spinner icon-spin"></i></td></tr>\n            </table>\n        </div>\n\n        <div *ngIf="!loading" class="modal-body-inner section" style="overflow: visible;">\n               <div id="picker-container">\n                    <div class="availableContainer" insideCanvas (insideFieldCanvas)="dragOverAvailable = $event" >\n                        <div class="columnHeader">\n                            <span class="columnHeader" lfLocalize="STR_AVAILABLE"></span>\n                        </div>\n                        <input type="text" placeholder="Search" [(ngModel)]="searchWord" (keyup)="search()">\n                        <div class="columnPicker" dnd-droppable [dropZones]="[\'selected-zone\']" tabindex="0">\n                            <ul *ngFor="let header of filteredOptionsHeaders; let i = index" >\n                                 <li class="columnHeader">{{header}}</li>\n                                 <li hoverDirective dnd-draggable (insideFieldCanvas)="dragOverSelected = $event"  MobileColumnDrag [dragEnabled]="true" tabindex="0" (onDragEnd)="availableToSelected($event)" *ngFor="let col of filteredOptions[i]; let j = index" (dblclick)="dblClickDrop(col)" (keydown)="onColumnKeydown($event, col)" [dragData]="{name: col }" >\n                                    {{col.displayName}}\n                                </li>\n                            </ul>\n                         </div>\n                    </div>\n                    <div insideCanvas (insideFieldCanvas)="dragOverSelected = $event" (placeAtLocation)="dragIndex = $event" class="selectedContainer">\n                        <div class = "columnHeader">\n                            <span lfLocalize="STR_SELECTED"></span> \n                            <a style="float:right" href="javascript:void(0)" (click)="resetTodefault()" lfLocalize="STR_RESET"></a>\n                        </div>\n                        <div dnd-sortable-container [sortableData]="selected" id="selected" tabindex="0" >\n                            <ul>\n                                <li lfLocalize="STR_DOCUMENT_FOLDERNAME"></li>\n                                <div dnd-sortable [sortableIndex]="k" *ngFor="let sel of selected; let k = index">\n                                    <li hoverDirective *ngIf="sel.name != \'Name\'" dnd-draggable (insideFieldCanvas)="dragOverAvailable = $event"  MobileColumnDrag [dragEnabled]="true" tabindex="0" (onDragEnd)="selectedToAvailable($event)" (dblclick)="dblClickDrop2({nameInfo: sel, index: k})" (keydown)="onSelectedColumnKeydown($event, {nameInfo: sel, index: k})" [dragData]="{nameInfo: sel, index: k}" [dropZones]="[\'selected-zone\']" >\n                                        {{sel.displayName}}\n                                    </li>\n                                    \n                                 </div>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <div id="dialogButtons">\n            <button class="btn btn-primary" type="submit" [disabled]="loading" (click) = "okClick()" lfLocalize="STR_APPLY"></button>\n            <button class="btn btn-neutral" type="submit" style="margin-left: 5px;" (click) = "cancel()" lfLocalize="STR_CANCEL"></button>\n        </div>\n    </div>\n    \n    ',providers:[]}),m("design:paramtypes",[d.NgbActiveModal])],a)}(),a("ColumnDisplayModal",i),j=function(){function a(a,b,c,d,e){this.activeModal=a,this.localizationService=b,this.folderListingService=c,this.contextService=d,this.sharedService=e,this.selectedComment="",this.selectedWatermarkIdx=0,this.result={key:0,watermarkIdx:this.selectedWatermarkIdx}}return a.prototype.ngOnInit=function(){this.init()},a.prototype.init=function(){var a=this;this.folderListingService.GetExportAuditReasonOptions(this.contextService.getRepoName()).subscribe(function(b){b&&(a.reasons=b,a.reasons.length>0&&(a.selectedReason=a.reasons[0]))}),this.sharedService.getWatermarkOptions(this.contextService.getRepoName()).subscribe(function(b){b&&(a.watermarks=b)})},a.prototype.log=function(a){console.log(a)},a.prototype.okClick=function(){var a=this;if(this.reasons&&this.selectedReason){var b=this.searchIds.join(","),c="/"+this.contextService.getVdirName()+"/ExportReason.aspx?EID="+b;c+="&id="+this.selectedReason.id,c+="&Comment="+this.selectedComment,c+="&"+this.dbid,this.folderListingService.exportReason(c).subscribe(function(b){var c=b._body.indexOf('id="key"')+9,d=parseInt(b._body.substring(c),10)||0;"number"==typeof c&&"number"==typeof d&&(a.result.key=d,a.watermarks&&a.selectedWatermarkIdx&&(a.result.watermarkIdx=a.selectedWatermarkIdx),a.activeModal.close(a.result))},function(a){console.log(a)})}else this.watermarks&&this.selectedWatermarkIdx&&(this.result.watermarkIdx=this.selectedWatermarkIdx),this.activeModal.close(this.result)},a.prototype.cancel=function(){this.activeModal.close()},l([c.Input(),m("design:type",Array)],a.prototype,"searchIds",void 0),l([c.Input(),m("design:type",Object)],a.prototype,"dbid",void 0),l([c.Input(),m("design:type",Boolean)],a.prototype,"needAuditReason",void 0),l([c.Input(),m("design:type",Boolean)],a.prototype,"needWatermarkSelection",void 0),a=l([c.Component({selector:"export-options",template:'\n    <div class="modal-header">\n        <span class="dialogTitle">\n            <span class="dialogHeaderText" lfLocalize="STR_DOWNLOAD"></span>\n        </span>\n        <a href="javascript:void(0)" class="icon icon-close icon-fading" (click)="cancel()"></a>\n    </div>\n    <div class="modal-body">\n        <div class="modal-body-inner section" style="overflow: visible;">\n            <table class="exportReasonDialog" style="width: 500px">\n                <tr [hidden]="!needAuditReason || !reasons">\n                    <td lfLocalize="STR_EXPORT_REASON_SELECT"> </td>\n                    <td>\n                        <select [(ngModel)]="selectedReason">\n                            <option *ngFor="let reason of reasons" [ngValue]="reason">{{reason.name}}</option>\n                        </select>\n                    <td>\n                </tr>\n                <tr [hidden]="!needAuditReason || !reasons">\n                    <td lfLocalize="STR_REASON_FOR_EXPORTING"></td>\n                    <td><textarea [(ngModel)]="selectedComment"></textarea></td>\n                </tr>\n                <tr [hidden]="!needWatermarkSelection || !(watermarks && watermarks.length > 1)">\n                    <td><span lfLocalize="STR_WATERMARK"></span></td>\n                    <td>\n                        <select [(ngModel)]="selectedWatermarkIdx">\n                            <option *ngFor="let watermark of watermarks; let i = index" [value]="i">{{watermark}}</option>\n                        </select>\n                    </td>\n                </tr>\n            </table>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <div id="dialogButtons">\n            <button [disabled]="needAuditReason && reasons && !selectedReason" style="font-size:16px" class="btn" type="submit" (click) = "okClick()" lfLocalize="STR_APPLY"></button>\n            <button style="font-size:16px" class="btn btn-neutral" type="submit" (click) = "cancel()" lfLocalize="STR_CANCEL">Cancel</button>\n        </div>\n    </div>\n    '}),m("design:paramtypes",[d.NgbActiveModal,e.LocalizationService,f.FolderListingService,h.ContextService,g.SharedService])],a)}(),a("ExportOptionsModal",j),k=function(){function a(a,b,c,d){this.activeModal=a,this.localizationService=b,this.folderListingService=c,this.contextService=d}return a.prototype.ngOnInit=function(){this.init()},a.prototype.init=function(){},a.prototype.okClick=function(){this.activeModal.close()},a.prototype.cancel=function(){this.activeModal.close()},l([c.Input(),m("design:type",String)],a.prototype,"link",void 0),a=l([c.Component({selector:"Share-Link",template:'\n    <div class="modal-header">\n        <span class="dialogTitle">\n            <span class="dialogHeaderText" lfLocalize="SHARE_LINK"></span>\n         \n        </span>\n        <a href="javascript:void(0)" class="icon icon-close icon-fading" (click)="cancel()"></a>\n    </div>\n    <div class="modal-body">\n        <div class="modal-body-inner section" style="overflow: visible;">\n                <div lfLocalize="COPY_LINK"></div>\n                <div style="width: 500px">\n                    <input style="width: 100%" type="text" [ngModel]=link> \n                </div>\n   \n        </div>\n    </div>\n    <div class="modal-footer">\n        <div id = "dialogButtons">\n            <button class="btn" type="submit" (click) = "okClick()" lfLocalize="STR_OK"></button>\n            <button class="btn btn-neutral" type="submit" (click) = "cancel()"  lfLocalize="STR_CANCEL"></button>\n        </div>\n    </div>\n    \n    '}),m("design:paramtypes",[d.NgbActiveModal,e.LocalizationService,f.FolderListingService,h.ContextService])],a)}(),a("ShareLinkModal",k)}}}),System.register("dist/app/browse/app.module.js",["@angular/core","@angular/platform-browser","@angular/http","@ng-bootstrap/ng-bootstrap","ng2-dnd","ng2-split-pane/lib/ng2-split-pane","primeng/components/datatable/datatable.js","primeng/components/tooltip/tooltip.js","primeng/components/contextmenu/contextmenu.js","@angular/forms","ngx-dropdown","angular2-bootstrap-switch","@angular/platform-browser/animations","./../angular-http-proxy.js","./browse.component.js","./../folder-listing.service.js","./../document.service.js","./grid.component.js","./browse-modal.js","./../localization.service.js","./../localization.directive.js","./../search-bar.component.js","./../customization.service.js","./../shared.service.js","./../search.service.js","./../metadata-pane.component.js","./../breadcrumb.component.js","./../util.js","./../download_progress.js"],function(a,b){"use strict";function c(a,b){return new q.HttpProxy(a,b)}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};b&&b.id;return a("httpFactory",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a,G=a,H=a},function(a){w=a},function(a){x=a},function(a){y=a},function(a){z=a},function(a){A=a},function(a){B=a},function(a){C=a},function(a){D=a},function(a){E=a,I=a},function(a){F=a}],execute:function(){J=function(){function a(){}return a=K([d.NgModule({imports:[e.BrowserModule,f.HttpModule,j.DataTableModule,k.TooltipModule,g.NgbModule.forRoot(),i.SplitPaneModule,h.DndModule.forRoot(),m.FormsModule,l.ContextMenuModule,o.BootstrapSwitchModule.forRoot(),p.BrowserAnimationsModule,n.DropdownModule],declarations:[r.BrowseComponent,u.GridComponent,v.ColumnDisplayModal,x.LocalizationDirective,y.SearchBarComponent,C.MetadataPaneComponent,D.BreadcrumbComponent,F.DownloadProgressModal,G.ExportOptionsModal,H.ShareLinkModal,I.hoverDirective,I.insideFieldCanvasDirective,x.LocalizedAriaLabelDirective,I.MobileColumnDrag],providers:[{provide:q.HttpProxy,useFactory:c,deps:[f.XHRBackend,f.RequestOptions]},w.LocalizationService,z.CustomizationService,E.ContextService,A.SharedService,s.FolderListingService,B.SearchService,t.DocumentService],bootstrap:[r.BrowseComponent],entryComponents:[v.ColumnDisplayModal,F.DownloadProgressModal,G.ExportOptionsModal,H.ShareLinkModal]})],a)}(),a("AppModule",J)}}}),System.register("dist/app/browse/browse-main.js",["@angular/platform-browser-dynamic","@angular/core","./app.module.js"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){d.enableProdMode(),c.platformBrowserDynamic().bootstrapModule(e.AppModule)}}}),System.register("dist/app/doc-viewer/doc-viewer.component.js",["@angular/core","@angular/http","@angular/platform-browser","@ng-bootstrap/ng-bootstrap","./../document.service.js","./../customization.service.js","./../localization.service.js","./../folder-listing.service.js","./../weblinkcontrols-types.js","./../util.js","./../shared.service.js","./../download_progress.js"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},q=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a}],execute:function(){o=function(){function a(a,b,c,d,e,f,g,h){this.documentService=a,this.localizationService=b,this.customizationService=c,this.contextService=d,this.titleService=e,this.folderListingService=f,this.sharedService=g,this.modalService=h,this.docInfo=null,this.metadata=null,this.tagInfo=[],this.tabSelected="metadata",this.canExport=!1,this.emailConfigured=!1,this.canPrint=!1,this.emailUrl="",this.fullScreen=!1,this.mainLogoSrc="",this.imageDisplayDiv=null,this.dbOrRepoParam="",this.folderLink="",this.pdfViewerMode=!1,this.plainTextMode=!1,this.THUMBS_TO_LOAD=25,this.THUMBNAIL_WIDTH=79,this.TILE_SIZE=256,this.docPages=[],this.textPages=[],this.scale=0,this.lastScale=0,this.effectiveScale=0,this.hfact=1,this.vfact=1,this.pageId=0,this.pageNum=1,this.imagePaneWidth=200,this.imagePaneHeight=200,this.canvasWidth=200,this.canvasHeight=200,this.searchId="",this.pagePositionsCalculated=!1,this.marginHeight=10,this.marginWidth=15,this.scaleProp="",this.zoomLevels=[5,10,15,20,25,33,50,66,75,100,125,150,200,300,400,600,800,1e3],this.zoomUnlisted=!1,this.jumpingToPage=!1,this.cursorMode="",this.lastX=-1,this.lastY=-1,this.isMouseDown=!1,this.cursorX=0,this.cursorY=0,this.showAnnotations=!0,this.thumbsTops=[],this.thumbsHeights=[],this.calculatedThumbsTops=!1,this.renderTiles=!0,this.showHomeLink=!1,this.showPrefLink=!1,this.responsiveSmall=!1,this.showMetadataIcon=!1,this.documentService=a}return a.prototype.ngOnInit=function(){this.localizationService.loadAllStrings();var a=this;this.sharedService.getVdirNames().subscribe(function(b){a.contextService.setVdirName(b[0])}),this.setResponsiveMode(),this.loadTime=new Date,this.globalMediaDisplay=new MediaDisplay("mediaDisplay","media-header","media-icon","media-name","media-container","video","source","media-share","media-download","media-close","media-url-container","media-url-input"),this.pageDir=$("body").attr("class"),$(window).bind("orientationchange",function(b){a.setResponsiveMode()}),this.ratio="ltr"==this.pageDir?.8:.2},a.prototype.onResize=function(a){this.setResponsiveMode()},a.prototype.setResponsiveMode=function(){$(window).width()<=768?(this.responsiveSmall=!0,this.showMetadataIcon=!0):(this.responsiveSmall=!1,this.showMetadataIcon=!1);var a=this;setTimeout(function(){a.initializeTilePane(),a.getImagePaneStyle()},300),this.checkOrientation()},a.prototype.checkOrientation=function(){var a=$(window).width();a<=768||a<=812&&a>$(window).height()?(console.log($(".logoImage").width()),$(".logoImage").width()&&$(".logoImage").width()>=100&&$(".logoImage").addClass("scaledLogo")):($(".logoImage").removeClass("scaledLogo"),$(".docViewerMain").removeClass("scaledDocViewerMain")),setTimeout(function(){var a=$(".actionBar").height();$(".docViewerMain").css("top",a+49+1+"px")},200)},a.prototype.resizePDFPane=function(a){this.pdfViewerMode&&$("#iframe-wrapper").css("padding-right","150px")},a.prototype.panesResized=function(){this.pdfViewerMode&&$("#iframe-wrapper").css("padding-right","0px")},a.prototype.initializeTilePane=function(){var a=this,b=this,c=function(){b.scaleProp="P",b.cursorMode="",b.hasExportRights(),b.documentService.getDocViewerSettings(b.contextService.getVdirName(),b.contextService.getRepoName()).subscribe(function(a){b.cursorMode=a.cursorMode,"PAN"==b.cursorMode?b.togglePanningMode(!0):"ZOOM"==b.cursorMode&&b.toggleZoomMode(!0),b.scaleProp=a.scaleProp,b.showAnnotations="1"==a.showAnnotations,b.showAnnotations="1"==a.showAnnotations,b.showBreadcrumb="1"==a.showBreadcrumb,b.contextService.setDisplayBreadcrumb(b.showBreadcrumb),b.init()}),b.sharedService.emailConfigured(b.contextService.getVdirName(),b.repoName).subscribe(function(a){a&&(b.emailConfigured=a)}),b.folderListingService.showLinks(b.repoName).subscribe(function(a){a&&(b.showHomeLink=a.ShowHomeLink,b.showPrefLink=a.ShowMyWeblink)}),b.contextService.getRepoTagInfo()||b.folderListingService.getCachedInfo(b.repoName).subscribe(function(a){a&&b.contextService.setRepoTagInfo(a)}),b.customizationService.getMainLogoSrc(b.repoName).subscribe(function(a){b.mainLogoSrc=a})};this.repoName=this.contextService.getRepoName(),this.repoName?c():this.documentService.getRepoNameByDbid(this.contextService.getDbid()).subscribe(function(b){b&&(a.repoName=b,a.contextService.setRepoName(a.repoName)),c()}),this.tilesPaneElement=$("#tilesPane"),this.tilesPaneElement.scroll(function(){b.onImagePaneScroll()}),this.tilesPaneElement.mousewheel(function(a){b.onMouseWheel(a)}),this.tilesPaneElement.click(function(a){b.onImagePaneClick(a)}),this.tilesPaneElement.mousedown(function(a){b.onImagePaneMouseDown(a)}),this.tilesPaneElement.mouseup(function(a){b.onImagePaneMouseUp(a)}),this.tilesPaneElement.mousemove(function(a){b.onImagePaneMouseMove(a)}),$("#thumbsPane").scroll(function(){b.onThumbsPaneScroll()}),$("body").mousemove(function(a){b.onPageMouseMove(a)})},a.prototype.showMetadataPaneResponsive=function(a){this.metadataResponsiveMode=!this.metadataResponsiveMode,this.metadataResponsiveMode?($(".responsiveMetadata").show(),$(".responsiveDoc").hide()):($(".responsiveMetadata").hide(),$(".responsiveDoc").show())},a.prototype.init=function(){var a=window.location.search;if(a){a=a.substring(1);var b=new d.URLSearchParams(a);b.get("searchid")&&(this.searchId=b.get("searchid")),b.get("page")&&parseInt(b.get("page"))&&(this.pageNum=parseInt(b.get("page"))),b.get("id")&&parseInt(b.get("id"))&&(this.entryId=parseInt(b.get("id")),this.getInfo())}},a.prototype.ngAfterViewInit=function(){var a=this;$(".logoImage").on("load",function(){a.checkOrientation()})},a.prototype.hasExportRights=function(){var a=this;this.folderListingService.getExportRights(this.repoName).subscribe(function(b){b&&(a.canExport=b.hasExportRights)})},a.prototype.showAnnotationsChanged=function(a){this.renderTiles=!0,this.renderVisiblePages()},a.prototype.switchTab=function(a){this.tabSelected=a},a.prototype.getBreadCrumbEntries=function(){var a=this;this.docInfo&&this.folderListingService.getBreadCrumbs(this.contextService.getVdirName(),this.repoName,this.docInfo.parentId).subscribe(function(b){if(b){a.breadcrumbs=b;var c=new k.BreadcrumbEntry;c.name=a.docInfo.name,c.id=null,a.breadcrumbs.push(c)}},function(a){console.log("error fetching breadcrumbs")})},a.prototype.getTooltipPlacement=function(){return this.fullScreen?"bottom":"top"},a.prototype.navigateToFolder=function(a){window.location.replace("/"+this.contextService.getVdirName()+"/browse.aspx?id="+a.id+"&"+this.getDbOrRepoParam())},a.prototype.getInfo=function(){var a=this;this.documentService.getBasicDocumentInfo(this.repoName,this.entryId).subscribe(function(b){if(b){a.docInfo=b,a.loadPreview(),a.titleService.setTitle(a.docInfo.name),a.getBreadCrumbEntries();var c=a;b.pageCount;b.pageCount>0&&a.documentService.hasPrintRights(a.repoName).subscribe(function(a){a&&(c.canPrint=a)}),a.docPages=[];for(var d=0;d<a.docInfo.pageCount;d++)a.docPages.push({top:0,height:0,width:0,scale:0,ro:0,imgTiles:[],stickyNotes:[],attachments:[]});a.textPages=[];for(var d=0;d<a.docInfo.pageCount;d++)a.textPages.push("");if(setTimeout(function(){if("pdf"!=c.docInfo.extension||c.docInfo.hasImagedPages){if(c.docInfo.pageCount>0){c.calculatePagePositions(),c.renderPage(1);for(var a=1,b=!1;!b;)a++,a<=c.docInfo.pageCount&&c.pageTops[a]+c.docPages[a-1].height<c.tilesPaneElement.scrollTop()+c.tilesPaneElement.height()?c.renderPage(a):b=!0;c.calculateThumbsPositions(),c.pageNum>1&&c.jumpToPage()}}else{var d=document.getElementById("pdfViewerIFrame");$(d).attr("src","PdfViewer.aspx?file="+encodeURIComponent(c.docInfo.edocUrl+"&pdfView=true")),c.pdfViewerMode=!0}},1e3),a.metadata=b.metadata,a.metadata&&(a.metadata.templateName||(a.metadata.templateName="No template assigned"),a.tagInfo=[],a.metadata.tagIds))for(var e=0,f=a.metadata.tagIds;e<f.length;e++){var g=f[e];a.tagInfo.push(a.contextService.getTagInfo(g))}}})},a.prototype.getImagePaneStyle=function(){return this.imageDisplayDiv="ltr"==this.pageDir?$(".split-pane-content-primary"):$(".split-pane-content-secondary"),{width:this.imageDisplayDiv.width()-(this.pdfViewerMode||this.fullScreen||this.responsiveSmall?0:150)+"px"}},a.prototype.getDbOrRepoParam=function(){if(this.dbOrRepoParam)return this.dbOrRepoParam;var a="";return this.contextService.getParamsFromUrl().dbidRepo?a=this.contextService.getParamsFromUrl().dbidRepo:this.contextService.getDefaultRepoParam()&&(a=this.contextService.getDefaultRepoParam()),this.dbOrRepoParam=a,this.contextService.setDefaultRepoParam(this.dbOrRepoParam),this.dbOrRepoParam},a.prototype.getPrefsLink=function(){if(!this.showPrefLink)return"";var a="MyWebLink.aspx";return this.getDbOrRepoParam()&&(a+="?"+this.getDbOrRepoParam()),a},a.prototype.getHomeLink=function(){if(!this.showHomeLink)return"";var a="Welcome.aspx";return this.getDbOrRepoParam()&&(a+="?"+this.getDbOrRepoParam()),a},a.prototype.navigateToUrl=function(a){switch(a){case"About":window.open("/"+this.contextService.getVdirName()+"/About.aspx?"+this.getDbOrRepoParam(),"About Laserfiche Weblink 10","width=500, height=300");break;case"Help":window.open("https://www.laserfiche.com/support/webhelp/weblink/10/en-US/WL/WebLink.htm");break;case"SignOut":location.href="Login.aspx?showLogin=yes&"+this.getDbOrRepoParam()}},a.prototype.clickPage=function(a){this.pageNum=a,this.jumpToPage()},a.prototype.onThumbKeydown=function(a,b){var c=a.which||a.keyCode;32!==c&&10!==c&&13!==c||this.clickPage(b)},a.prototype.loadPreview=function(){var a=Math.min(this.THUMBS_TO_LOAD,this.docInfo.pageCount);this.docInfo.thumbnailPaths=[];for(var b=1;b<=this.docInfo.pageCount;b++)if(b<=a){var c="/"+this.contextService.getVdirName()+"/ThumbnailImageData.aspx?&dId="+this.entryId+"&pageNum="+b+"&"+this.getDbOrRepoParam();this.docInfo.thumbnailPaths.push(c)}else this.docInfo.thumbnailPaths.push("images/blank.gif")},a.prototype.renderVisiblePages=function(){this.renderPage(this.pageNum);for(var a=1,b=this.tilesPaneElement.scrollTop(),c=this.tilesPaneElement.height(),d=!1,e=!1;!d||!e;){var f=this.pageNum-a;f>=1&&!(f>=1&&this.pageTops[f]<b&&this.pageTops[f+1]<b)?this.renderPage(f):d=!0;var g=this.pageNum+a;g<=this.docInfo.pageCount&&this.pageTops[g]<b+c?this.renderPage(g):e=!0,a++}},a.prototype.renderPage=function(a){a>this.docInfo.pageCount||(this.generateTiles(a),this.placeAnnotations(a))},a.prototype.generateTiles=function(a){var b=this;this.calcHfactVfact();var c=this.docInfo.pageInfos[a],d=this.calculateDimensions(c),e=[],f=[],g=[];if(null!=this.docPages[a-1]&&this.docPages[a-1].scale==this.scale&&this.docPages[a-1].ro==c.rotation&&(e=this.docPages[a-1].imgTiles,f=this.docPages[a-1].stickyNotes,g=this.docPages[a-1].attachments),this.docPages[a-1]={top:0,height:0,width:0,scale:0,ro:0,imgTiles:e,stickyNotes:f,attachments:g},this.textPages.push(""),this.scale>0?this.effectiveScale=Math.round(1e4*this.scale):(this.effectiveScale=1e4,this.scale=this.effectiveScale/1e4),this.plainTextMode)this.textPages[a-1]||this.documentService.getTextHtmlForPage(this.repoName,this.entryId,a,this.showAnnotations,this.searchId).subscribe(function(c){b.textPages[a-1]=c});else for(var h=Math.ceil(this.scale*d.width/(this.TILE_SIZE*this.hfact)),i=Math.ceil(this.scale*d.height/(this.TILE_SIZE*this.vfact)),j=this.tilesPaneElement.scrollLeft(),k=j+this.tilesPaneElement.width(),l=this.tilesPaneElement.scrollTop(),m=l+this.tilesPaneElement.height(),n=0;n<i;++n)for(var o=0;o<h;++o){var p=n*h+o;if(!(!this.renderTiles&&this.docPages[a-1].imgTiles.length>p&&this.docPages[a-1].imgTiles[p].url)){var q={x:this.TILE_SIZE*o*this.hfact,y:this.TILE_SIZE*n*this.vfact,url:""};j<=q.x+this.TILE_SIZE+this.marginWidth&&q.x+this.marginWidth<=k&&l<=q.y+this.TILE_SIZE+this.pageTops[a]+this.marginHeight&&q.y+this.pageTops[a]+this.marginHeight<=m&&(q.url="Helper/TileData.aspx?repo="+this.repoName+"&docID="+this.entryId+"&x="+o+"&y="+n+"&pageNum="+a+"&scale="+this.effectiveScale+"&ro="+c.rotation+"&time="+this.loadTime.getTime()+"&showAnn="+(this.showAnnotations?"1":"0")+"&pageID="+c.pageId+"&search="+this.searchId),this.docPages[a-1].imgTiles.length<=p?this.docPages[a-1].imgTiles.push(q):this.docPages[a-1].imgTiles[p]=q}}this.docPages[a-1].top=this.marginHeight+this.pageTops[a],this.docPages[a-1].scale=this.scale,this.docPages[a-1].ro=c.rotation,c.rotation%180==0?(this.docPages[a-1].width=(c.imageWidth>0?c.imageWidth:this.TILE_SIZE)*this.scale*this.hfact,this.docPages[a-1].height=(c.imageHeight>0?c.imageHeight:this.TILE_SIZE)*this.scale*this.vfact):(this.docPages[a-1].width=(c.imageHeight>0?c.imageHeight:this.TILE_SIZE)*this.scale*this.hfact,this.docPages[a-1].height=(c.imageWidth>0?c.imageWidth:this.TILE_SIZE)*this.scale*this.vfact),this.renderTiles=!1},a.prototype.placeAnnotations=function(a){var b=this;if(!this.showAnnotations)return this.docPages[a-1].stickyNotes=[],void(this.docPages[a-1].attachments=[]);var c=this.docInfo.pageInfos[a];this.docPages[a-1].scale==this.scale&&this.docPages[a-1].ro==c.rotation&&this.docPages[a-1].stickyNotes&&this.docPages[a-1].stickyNotes.length||(this.documentService.getStickyNotesForPage(this.repoName,this.docInfo.id,a).subscribe(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f],h=0,i=0;0==c.rotation?(h=g.annPosX,i=g.annPosY):90==c.rotation?(h=c.imageHeight-g.annPosY,i=g.annPosX):180==c.rotation?(h=c.imageWidth-g.annPosX,i=c.imageHeight-g.annPosY):270==c.rotation&&(h=g.annPosY,i=c.imageWidth-g.annPosX),e.push({x:b.marginWidth+h*b.hfact*b.scale,y:b.marginHeight+i*b.vfact*b.scale,path:"images/stickies/"+g.annColor+".gif",index:g.annTypeIndex})}b.docPages[a-1].stickyNotes=e}),this.documentService.getAttachmentAnnotationsForPage(this.repoName,this.docInfo.id,a).subscribe(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f],h=0,i=0;0==c.rotation?(h=g.annPosX,i=g.annPosY):90==c.rotation?(h=c.imageHeight-g.annPosY,i=g.annPosX):180==c.rotation?(h=c.imageWidth-g.annPosX,i=c.imageHeight-g.annPosY):270==c.rotation&&(h=g.annPosY,i=c.imageWidth-g.annPosX),e.push({x:b.marginWidth+h*b.hfact*b.scale,y:b.marginHeight+i*b.vfact*b.scale,index:g.annTypeIndex,url:g.annLinkRef})}b.docPages[a-1].attachments=e}))},a.prototype.clearTiles=function(){this.docPages=[],this.textPages=[];for(var a=0;a<this.docInfo.pageCount;a++)this.docPages.push({top:0,height:0,width:0,scale:0,ro:0,imgTiles:[],stickyNotes:[],attachments:[]}),this.textPages.push("")},a.prototype.onImagePaneScroll=function(){this.scrollTimer&&clearTimeout(this.scrollTimer);var a=this;this.scrollTimer=setTimeout(function(){if(this.scrollTimer=null,a.jumpingToPage)a.jumpingToPage=!1;else{var b=a.getCurrentPage();a.pageNum!=b&&(a.pageNum=b,$("#annotationPane").length&&$("#annotationGroup"+a.pageNum).length&&$("#annotationGroup"+a.pageNum)[0].scrollIntoView())}a.renderVisiblePages(),$("#pageNum").length&&($("#pageNum")[0].value=a.pageNum)},500)},a.prototype.onThumbsPaneScroll=function(){this.thumbsScrollTimer&&clearTimeout(this.thumbsScrollTimer);var a=this;this.thumbsScrollTimer=setTimeout(function(){var b=a.getCurrentThumb();Math.max(1,b-3);for(var c=b;c<=b+a.THUMBS_TO_LOAD&&!(c>=a.docInfo.pageCount);c++){var d="/"+a.contextService.getVdirName()+"/ThumbnailImageData.aspx?&dId="+a.entryId+"&pageNum="+c+"&"+a.getDbOrRepoParam();a.docInfo.thumbnailPaths[c-1]=d}this.thumbsScrollTimer=null},500)},a.prototype.calculateDimensions=function(a){if(a){var b=a.imageWidth,c=a.imageHeight;if(a.xdpi<a.ydpi?0!=a.xdpi&&(b=a.imageWidth*a.ydpi/a.xdpi):0!=a.ydpi&&(c=a.imageHeight*a.xdpi/a.ydpi),a.rotation%180!=0){var d=c;c=b,b=d}return this.docPages[a.pageNum-1].ro=a.rotation,{width:b,height:c}}},a.prototype.calculatePagePositions=function(){if(!(h>=this.docInfo.pageCount)){this.pagePositionsCalculated=!1,this.pagePositions={},this.imagePaneWidth=this.tilesPaneElement.prop("clientWidth"),this.imagePaneHeight=this.tilesPaneElement.prop("clientHeight");for(var a=this.imagePaneHeight-2*this.marginHeight-20,b=this.imagePaneWidth-2*this.marginWidth-20,c=[null],d=0,e=0,f=1;f<=this.docInfo.pageCount;f++){var g=this.calculateDimensions(this.docInfo.pageInfos[f]);g&&(g.width>0&&g.height>0?c.push(g):c.push({height:this.TILE_SIZE,width:this.TILE_SIZE}),e=Math.max(g.height,e),d=Math.max(g.width,d))}var h=this.getCurrentPage(),i=Math.min(1e4,Math.floor(1e4*b/d))/100,j=Math.min(1e4,Math.floor(1e4*a/this.docInfo.pageInfos[h].imageHeight))/100,k=Math.min(1e4,Math.floor(1e4*b/this.docInfo.pageInfos[h].imageWidth))/100,l=Math.min(k,j);"P"==this.scaleProp.toUpperCase()?this.scale=l/100:"H"==this.scaleProp.toUpperCase()?this.scale=j/100:"W"==this.scaleProp.toUpperCase()&&(this.scale=i/100),this.calcHfactVfact();for(var d=0,m=0,n=[0],f=1;f<=this.docInfo.pageCount;f++){var g=c[f];if(g){n.push(m);var o=g.height*this.scale*this.vfact,p=Math.max(o,Math.floor(this.imagePaneHeight/3));m+=Math.ceil(p*this.vfact+this.marginHeight),d=Math.floor(Math.max(d,g.width*this.scale*this.vfact))}}this.canvasHeight=m,this.canvasWidth=d+2*this.marginWidth;var q=$("#imageCanvas");q&&(q.height(this.canvasHeight),q.width(this.canvasWidth)),this.pageTops=n,this.pagePositionsCalculated=!0}},a.prototype.calculateThumbsPositions=function(){if(0!=this.docInfo.pageCount){var a=0;this.thumbsTops=[0],this.thumbsHeights=[0];for(var b=1;b<=this.docInfo.pageCount;b++){var c=this.calculateDimensions(this.docInfo.pageInfos[b]);if(c){this.thumbsTops.push(a);var d=Math.ceil(this.THUMBNAIL_WIDTH*(c.height/c.width));this.thumbsHeights.push(d),a+=Math.max(90,d+40)+5}}var e=$("#thumbsContainer");e&&e.height(a)}},a.prototype.calcHfactVfact=function(){var a=this.getCurrentPage(),b=this.docInfo.pageInfos[a],c=1,d=1;b.xdpi!=b.ydpi&&(b.xdpi>b.ydpi?d=b.xdpi/b.ydpi:c=b.ydpi/b.xdpi),this.hfact=b.rotation%180==0?c:d,this.vfact=b.rotation%180==0?d:c},a.prototype.getCurrentPage=function(){if(!this.scale||!this.pageTops||0==this.pageTops.length||this.pageTops.length<=2||this.tilesPaneElement.scrollTop()<=this.marginHeight)return 1;for(var a=this.getImageCenter(),b=-1,c=Math.max(1,Math.floor(this.pageTops.length/2)),d=Math.max(1,Math.floor(this.pageTops.length/2)),e=0;e<150;){e++;var f=Math.max(c-1,1);if(a.y>=this.pageTops[f]&&a.y<this.pageTops[f+1]){b=f;break}if(a.y>=this.pageTops[this.pageTops.length-1]){b=this.pageTops.length-1;break}d=Math.max(1,Math.floor(d/2)),c+=(a.y>this.pageTops[f]?1:-1)*d}return b>0?b:this.pageTops.length-1},a.prototype.getCurrentThumb=function(){if(!this.thumbsTops)return 1;if(0==this.thumbsTops.length||this.thumbsTops.length<=2)return 1;for(var a=Math.floor($("#thumbsPane").scrollTop()),b=Math.max(1,Math.floor(this.thumbsTops.length/2)),c=Math.max(1,Math.floor(this.thumbsTops.length/2)),d=0;d<150;){d++;var e=Math.max(b-1,1);if(a>=this.thumbsTops[e]&&a<this.thumbsTops[e+1])return e;if(a>=this.thumbsTops[this.thumbsTops.length-1])return this.thumbsTops.length-1;c=Math.max(1,Math.floor(c/2)),b+=(a>this.thumbsTops[e]?1:-1)*c}return this.thumbsTops.length-1},a.prototype.getImageCenter=function(){return{x:Math.floor(this.tilesPaneElement.scrollLeftReverse()+this.tilesPaneElement[0].offsetWidth/2),y:Math.floor(this.tilesPaneElement[0].scrollTop+this.tilesPaneElement[0].offsetHeight/2)}},a.prototype.generatePdf=function(a){var b=this,c=this,d=c.modalService.open(n.PrintOptionsModal,{backdrop:"static"});d.componentInstance.repoName=this.repoName,d.componentInstance.pageRange=a,d.componentInstance.pageCount=this.docInfo.pageCount,d.componentInstance.pageErrorString=this.localizationService.getString("STR_PDF_PAGE_RANGE_ERROR"),d.componentInstance.exportAuditXHRErrorString=this.localizationService.getString("STR_EXPORT_AUDIT_REASON_XHR_ERROR"),d.componentInstance.exportAuditErrorString=this.localizationService.getString("STR_EXPORT_AUDIT_REASON_ERROR"),d.componentInstance.docId=this.docInfo.id,d.result.then(function(a){if(a.print){var d=c.modalService.open(n.DownloadProgressModal,{backdrop:"static"});d.componentInstance.dialogHeader="STR_GENERATING_PDF";var e;d.result.then(function(a){a&&(g.unsubscribe(),f.abort(),e=!0)});var f=new FileReader,g=b.documentService.generatePdf(b.docInfo.id,a.pageRange,b.docInfo.name,a.watermarkIdx).subscribe(function(a){if(a._body.type.includes("text/plain")){var b=new Blob([a.blob()],{type:"text/plain"});f.addEventListener("loadend",function(){function a(){c.documentService.getPDFProgress(g).subscribe(function(b){b.finished?(b.success?window.open(h):alert(b.errMsg),d.close()):setTimeout(function(){e||a()},3e3)},function(a){console.log(a)})}var b=f.result.indexOf("\n"),g=f.result.substring(0,b);console.log(g);var h="/"+c.contextService.getVdirName()+"/PDF/"+g+"/"+encodeURIComponent(c.docInfo.name)+".pdf";g=g.replace("\r",""),a()}),f.readAsText(b)}})}})},a.prototype.openAttachment=function(a){window.open(a.url)},a.prototype.onPageNumKeyPress=function(a){13===a.which&&this.jumpToPage()},a.prototype.jumpToPage=function(){this.jumpingToPage=!0;var a=this.pageTops[this.pageNum];if(this.pageNum>1&&this.pageNum<=this.docInfo.pageCount){var b=this.pageTops[this.pageNum+1]-this.pageTops[this.pageNum]-this.marginHeight,c=this.tilesPaneElement.height();b<c&&(a-=(c-b)/2)}else this.pageNum=1;this.tilesPaneElement.scrollTop(Math.min(this.pageTops[this.pageNum],a)),$("#annotationPane").length&&$("#annotationGroup"+this.pageNum).length&&$("#annotationGroup"+this.pageNum)[0].scrollIntoView()},a.prototype.pageUp=function(){this.pageNum>1&&(this.pageNum--,this.jumpToPage())},a.prototype.pageDown=function(){this.pageNum<this.docInfo.pageCount&&(this.pageNum++,this.jumpToPage())},a.prototype.togglePanningMode=function(a){a?(this.cursorMode="PAN",this.tilesPaneElement.removeClass("zoomin"),this.tilesPaneElement.addClass("grab")):(this.cursorMode="",this.tilesPaneElement.removeClass("grab"))},a.prototype.toggleZoomMode=function(a){a?(this.cursorMode="ZOOM",this.tilesPaneElement.removeClass("grab"),this.tilesPaneElement.addClass("zoomin")):(this.cursorMode="",this.tilesPaneElement.removeClass("zoomin"))},a.prototype.getNewScrollPoint=function(){var a=0,b=0;try{var c=this.lastScale>0?this.lastScale:1,d=0,e=0,f=0,g=0,h=this.tilesPaneElement.offset().left,i=h+this.tilesPaneElement.width(),j=this.tilesPaneElement.offset().top,k=j+this.tilesPaneElement.height();if(this.cursorX>=h&&this.cursorY<=i&&this.cursorY>=j&&this.cursorY<=k)d=this.cursorX-h+this.tilesPaneElement.scrollLeft(),e=this.cursorY-j+this.tilesPaneElement.scrollTop(),f=(d-this.marginWidth)/c*this.scale+this.marginWidth,g=(e-this.marginHeight*(this.pageNum+1))/c*this.scale+this.marginHeight*(this.pageNum+1),a=f-(this.cursorX-h),b=g-(this.cursorY-j);else{var l=$("#imgPage"+this.pageNum);d=this.marginWidth+Math.min(l.width()/2,this.tilesPaneElement.width()/2)+this.tilesPaneElement.scrollLeft(),e=Math.min(l.height()/2,this.tilesPaneElement.height()/2)+this.tilesPaneElement.scrollTop(),f=(d-this.marginWidth)/c*this.scale+this.marginWidth,g=(e-this.marginHeight*(this.pageNum+1))/c*this.scale+this.marginHeight*(this.pageNum+1),a=f-(d==this.marginWidth+this.tilesPaneElement.width()/2+this.tilesPaneElement.scrollLeft()?this.tilesPaneElement.width()/2:this.docPages[this.pageNum-1].width/this.lastScale*this.scale/2),b=g-(e==this.tilesPaneElement.height()/2+this.tilesPaneElement.scrollTop()?this.tilesPaneElement.height()/2:this.docPages[this.pageNum-1].height/this.lastScale*this.scale/2)}}catch(a){console.log(a)}return{x:Math.max(a,0),y:Math.max(b,0)}},a.prototype.zoomIn=function(){this.lastScale=this.scale;for(var a=100*this.scale,b=0;b<this.zoomLevels.length-1;b++)if(this.zoomLevels[b]<=a&&this.zoomLevels[b+1]>a){this.scale=this.zoomLevels[b+1]/100,this.scaleProp=this.zoomLevels[b+1]+"";break}this.zoomUnlisted=4!=this.scale&&2!=this.scale&&1!=this.scale&&.75!=this.scale&&.5!=this.scale&&.25!=this.scale;var c=this.getNewScrollPoint();this.clearTiles(),this.calculatePagePositions(),this.tilesPaneElement.scrollLeft(c.x),this.tilesPaneElement.scrollTop(c.y),this.renderPage(this.pageNum)},a.prototype.zoomOut=function(){this.lastScale=this.scale;for(var a=100*this.scale,b=this.zoomLevels.length-1;b>0;b--)if(this.zoomLevels[b]>=a&&this.zoomLevels[b-1]<a){this.scale=this.zoomLevels[b-1]/100,this.scaleProp=this.zoomLevels[b-1]+"";break}this.zoomUnlisted=4!=this.scale&&2!=this.scale&&1!=this.scale&&.75!=this.scale&&.5!=this.scale&&.25!=this.scale;var c=this.getNewScrollPoint();this.clearTiles(),this.calculatePagePositions(),this.tilesPaneElement.scrollLeft(c.x),this.tilesPaneElement.scrollTop(c.y),this.renderPage(this.pageNum)},a.prototype.scalePropChanged=function(){this.lastScale=this.scale,"400"==this.scaleProp?this.scale=4:"200"==this.scaleProp?this.scale=2:"100"==this.scaleProp?this.scale=1:"75"==this.scaleProp?this.scale=.75:"50"==this.scaleProp?this.scale=.5:"25"==this.scaleProp&&(this.scale=.25),this.zoomUnlisted=!1,this.clearTiles(),this.calculatePagePositions(),this.renderPage(this.pageNum),this.jumpToPage()},a.prototype.rotate=function(){this.docInfo.pageInfos[this.pageNum].rotation=(this.docInfo.pageInfos[this.pageNum].rotation+90)%360,this.clearTiles(),this.calculatePagePositions(),this.renderVisiblePages(),this.jumpToPage()},a.prototype.export=function(){return"/"+this.contextService.getVdirName()+"/"+this.docInfo.edocUrl},a.prototype.printToPdf=function(){this.docInfo&&this.generatePdf("1 - "+this.docInfo.pageCount)},a.prototype.email=function(){this.emailUrl||(this.emailUrl="EmailDocument.aspx?id="+this.entryId+"&"+this.contextService.getParamsFromUrl().dbidRepo),window.open(this.emailUrl)},a.prototype.stream=function(){var a=window.location.toString();try{return this.globalMediaDisplay.showVideo(this.dbOrRepoParam,this.docInfo.name,this.entryId,this.docInfo.mediaHandlerUrl,this.docInfo.mediaMimeType,a.substring(0,a.indexOf("DocView.aspx")),a.substring(a.indexOf("DocView.aspx"))),!1}catch(a){console.log(a)}},a.prototype.togglePlainTextMode=function(){this.plainTextMode=!this.plainTextMode,this.renderVisiblePages()},a.prototype.toggleFullScreenMode=function(a){void 0===a&&(a=!this.fullScreen),a?($(".docViewerMain").addClass("fullScreen"),this.fullScreen=!0):($(".docViewerMain").removeClass("fullScreen"),this.fullScreen=!1)},a.prototype.onMouseWheel=function(a){"ZOOM"==this.cursorMode&&(a.deltaY<0?this.zoomOut():a.deltaY>0&&this.zoomIn(),a.preventDefault())},a.prototype.onImagePaneClick=function(a){"ZOOM"==this.cursorMode&&this.zoomIn()},a.prototype.onImagePaneMouseDown=function(a){this.isMouseDown=!0,"PAN"==this.cursorMode&&(this.lastX=a.clientX,this.lastY=a.clientY,this.tilesPaneElement.removeClass("grab"),this.tilesPaneElement.addClass("grabbing"),a.preventDefault(),a.stopPropagation())},a.prototype.onImagePaneMouseUp=function(a){this.isMouseDown=!1,"PAN"==this.cursorMode&&(this.tilesPaneElement.removeClass("grabbing"),this.tilesPaneElement.addClass("grab"),a.preventDefault(),a.stopPropagation())},a.prototype.onImagePaneMouseMove=function(a){if("PAN"==this.cursorMode&&this.isMouseDown&&this.lastX>=0&&this.lastY>=0){var b=a.clientX,c=a.clientY;this.tilesPaneElement.scrollLeft(this.tilesPaneElement.scrollLeft()+(this.lastX-b)),this.tilesPaneElement.scrollTop(this.tilesPaneElement.scrollTop()+(this.lastY-c)),this.lastX=b,this.lastY=c}},a.prototype.onPageMouseMove=function(a){this.cursorX=a.clientX,this.cursorY=a.clientY},p([c.HostListener("window:resize",["$event"]),q("design:type",Function),q("design:paramtypes",[Object]),q("design:returntype",void 0)],a.prototype,"onResize",null),a=p([c.Component({selector:"doc-viewer-app",template:'\n        <div class="navbar navbar-inverse navbar-fixed-top actionBar dvActionBar" role="banner">\n            <div>\n                <a [hidden]="!showHomeLink" [href]="getHomeLink()" lfLocalizeAriaLabelAndTitle="STR_HOME" class="homeLink"><img class="logoImage" alt="Laserfiche WebLink" [src]="mainLogoSrc" /></a>\n                <div [hidden]="showHomeLink" class="homeLink"><img class="logoImage" alt="Laserfiche WebLink" [src]="mainLogoSrc" /></div>\n                \x3c!--<div class="returnToFolderLink">\n                    <a [href]="getFolderLink()"><div class="return-folder"></div><span lfLocalize="RETURN_TO_FOLDER"></span></a>\n                </div>--\x3e\n                <div class="topBarNavigation">\n                    <a *ngIf="showPrefLink" [href]="getPrefsLink()"><span lfLocalize="STR_MY_WEBLINK"></span></a>\n\n                    <div class="dropdown more-dropdown" dropdown>\n                        <button class="dropdownButton btn dropdown-toggle" dropdown-open aria-haspopup="true">\n                            <span lfLocalize="STR_MORE"></span> <div class="icon icon-down"></div>\n                        </button>\n                        <ul class="dropdown-menu" dropdown-not-closable-zone>\n                            <li><a href="javascript:void(0)" (click)="navigateToUrl(\'Help\')"><span lfLocalize="STR_HELP"></span></a></li>\n                            <li><a href="javascript:void(0)" (click)="navigateToUrl(\'About\')"><span lfLocalize="STR_ABOUT"></span></a></li>\n                            <li><a href="javascript:void(0)" (click)="navigateToUrl(\'SignOut\')"><span lfLocalize="STR_LOGOUT"></span></a></li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <breadcrumb-list *ngIf="showBreadcrumb" (changeFolderCrumb)="navigateToFolder($event)" [breadcrumbs]="breadcrumbs" (showMetadata)="showMetadataPaneResponsive($event)" [showMetadataIcon]="showMetadataIcon" ></breadcrumb-list>\n        <div class="noBreadcrumbTitleContainer angularPageBackground" *ngIf="!showBreadcrumb && docInfo"><span class="noBreadcrumbTitle">{{docInfo.name}}</span>  <div class="show-metadata-container" *ngIf="showMetadataIcon" (click)="showMetadataPaneResponsive($event)"  ><img class="x-icon" src="images/metadataDetails.svg" ></div></div>\n        <div class="breadcrumbIconsFloat" [ngClass]="{ \'responsiveSmall\': responsiveSmall }" *ngIf="pdfViewerMode" >\n            <a *ngIf="canExport && docInfo && docInfo.edocUrl" [href]="export()" target="_blank"><button class="btn iconography-primary shrinkIcon" type="button"  placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_DOWNLOAD\')" lfLocalizeAriaLabelAndTitle="STR_DOWNLOAD"><div class="docViewerIcon download"></div></button></a>\n        </div>\n\n        <ng-template #docImage>\n            <div class="left">\n                <div id="thumbsPane" class="thumbsPane" [hidden]="pdfViewerMode || fullScreen || responsiveSmall">\n                    <div id="thumbsContainer" class="thumbsContainer" *ngIf="docInfo && docInfo.thumbnailPaths && docInfo.thumbnailPaths.length && !responsiveSmall">\n                        <div *ngFor="let path of docInfo.thumbnailPaths; let i = index" class="thumbWrapper" tabindex="0" (click)="clickPage(i + 1)" (keydown)="onThumbKeydown($event, i + 1)" [ngClass]="{ \'selectedThumb\': pageNum == i+1 }">\n                            <img class="preview_thumbnail" src="{{path}}" [ngStyle]="{ \'height\': thumbsHeights[i + 1] + \'px\' }"><span>{{i+1}}</span>\n                        </div>\n                    </div>\n                    <div *ngIf="!docInfo || !docInfo.thumbnailPaths || !docInfo.thumbnailPaths.length" class="emptyThumbsPane" lfLocalize="NO_PREVIEW"></div>\n                </div>\n                <div class="imagePane" [ngStyle]="getImagePaneStyle()">\n                    <div id="imageToolbar" class="dvToolbar imageToolbar DocumentPageToolbar" *ngIf="!pdfViewerMode">\n                        <button class="btn iconography-primary" type="button" (click)="pageUp()" [disabled]="!docInfo || pageNum == 1 || docInfo.pageCount == 0" lfLocalizeAriaLabelAndTitle="STR_PREVIOUS_PAGE" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_PREVIOUS_PAGE\')"><div class="docViewerIcon arrow-top"></div></button>\n                        <button class="btn iconography-primary" type="button" (click)="pageDown()" [disabled]="!docInfo || pageNum == docInfo.pageCount || docInfo.pageCount == 0" lfLocalizeAriaLabelAndTitle="STR_NEXT_PAGE" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_NEXT_PAGE\')"><div class="docViewerIcon arrow-bottom"></div></button>\n                        <input type="text" [(ngModel)]="pageNum" (keypress)="onPageNumKeyPress($event)" id="pageNum" name="pageNum" style="width: 50px;" [disabled]="!docInfo || docInfo.pageCount == 0"><div style="display: inline-block;">&nbsp;/ {{ docInfo && docInfo.pageCount }}</div>\n                        &nbsp;\n                        <button class="btn iconography-primary shrinkIcon" type="button" (click)="togglePanningMode(cursorMode != \'PAN\')" [ngClass]="{ \'toolbarActive\': cursorMode == \'PAN\' }" [disabled]="!docInfo || docInfo.pageCount == 0" lfLocalizeAriaLabelAndTitle="STR_PAN" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_PAN\')"><div class="docViewerIcon panning"></div></button>\n                        <button class="btn iconography-primary" type="button" (click)="toggleZoomMode(cursorMode != \'ZOOM\')" [ngClass]="{ \'toolbarActive\': cursorMode == \'ZOOM\' }" [disabled]="!docInfo || docInfo.pageCount == 0" lfLocalizeAriaLabelAndTitle="STR_ZOOM" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_ZOOM\')"><div class="docViewerIcon zoom"></div></button>\n                        &nbsp;\n                        <button class="btn iconography-primary" type="button" (click)="zoomIn()" [disabled]="!docInfo || docInfo.pageCount == 0" lfLocalizeAriaLabelAndTitle="STR_ZOOM_IN" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_ZOOM_IN\')"><div class="docViewerIcon zoom-in"></div></button>\n                        <button class="btn iconography-primary" type="button" (click)="zoomOut()" [disabled]="!docInfo || docInfo.pageCount == 0" lfLocalizeAriaLabelAndTitle="STR_ZOOM_OUT" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_ZOOM_OUT\')"><div class="docViewerIcon zoom-out"></div></button>\n                        <select [(ngModel)]="scaleProp" id="zoomDropDown" name="zoomDropDown" (change)="scalePropChanged()" [disabled]="!docInfo || docInfo.pageCount == 0" style="width: 100px;">\n                            <option *ngIf="zoomUnlisted" [value]="scaleProp" role="menuitem">{{scaleProp + \'%\'}}</option>\n                            <option value="P" role="menuitem" lfLocalize="FIT_WINDOW">Fit window</option>\n                            <option value="W" role="menuitem" lfLocalize="FIT_WIDTH">Fit width</option>\n                            <option value="H" role="menuitem" lfLocalize="FIT_HEIGHT">Fit height</option>\n                            <option value="400" role="menuitem">400%</option>\n                            <option value="200" role="menuitem">200%</option>\n                            <option value="100" role="menuitem">100%</option>\n                            <option value="75" role="menuitem">75%</option>\n                            <option value="50" role="menuitem">50%</option>\n                            <option value="25" role="menuitem">25%</option>\n                        </select>\n                        &nbsp;\n                        <button class="btn iconography-primary shrinkIcon" type="button" (click)="rotate()" [disabled]="!docInfo || docInfo.pageCount == 0" lfLocalizeAriaLabelAndTitle="STR_ROTATE_RIGHT" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_ROTATE_RIGHT\')"><div class="docViewerIcon rotate"></div></button>\n                          \n                        <a *ngIf="canExport && docInfo && docInfo.edocUrl" [href]="export()" target="_blank"><button  class="btn iconography-primary shrinkIcon" type="button"  placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_DOWNLOAD\')" lfLocalizeAriaLabelAndTitle="STR_DOWNLOAD"><div class="docViewerIcon download"></div></button></a>\n                        <button *ngIf="canPrint" class="btn iconography-primary shrinkIcon" type="button" (click)="printToPdf()" lfLocalizeAriaLabelAndTitle="STR_DOWNLOAD_PDF" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_DOWNLOAD_PDF\')"><div class="docViewerIcon print"></div></button>\n                        <button *ngIf="emailConfigured" class="btn iconography-primary shrinkIcon" type="button" (click)="email()" lfLocalizeAriaLabelAndTitle="STR_EMAIL" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_EMAIL\')"><div class="docViewerIcon email"></div></button>\n                        <button *ngIf="docInfo && docInfo.mediaHandlerUrl" class="btn iconography-primary shrinkIcon" type="button" (click)="stream()" lfLocalizeAriaLabelAndTitle="STR_STREAM" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_STREAM\')"><div class="WLIcon16 MediaStreamIcon"></div></button>\n                        <button class="btn btn-link" type="button" (click)="togglePlainTextMode()" [disabled]="!docInfo || docInfo.pageCount == 0 || !pagePositionsCalculated">\n                            <span *ngIf="!plainTextMode" lfLocalize="STR_SHOW_TEXT_BUTTON_TEXT"></span>\n                            <span *ngIf="plainTextMode" lfLocalize="STR_SHOW_IMAGE_BUTTON_TEXT"></span>\n                        </button>\n                        <button *ngIf="!fullScreen" class="btn iconography-primary shrinkIcon" type="button" (click)="toggleFullScreenMode(true)" lfLocalizeAriaLabelAndTitle="STR_FULLSCREEN" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_FULLSCREEN\')"><div class="docViewerIcon full-screen"></div></button>\n                        <button *ngIf="fullScreen" class="btn iconography-primary shrinkIcon" type="button" (click)="toggleFullScreenMode(false)" lfLocalizeAriaLabelAndTitle="STR_NORMAL_MODE" placement="{{getTooltipPlacement()}}" [ngbTooltip]="localizationService.getString(\'STR_NORMAL_MODE\')"><div class="docViewerIcon normal-screen"></div></button>\n                    </div>\n                    <div id="tilesPane" [hidden]="!docInfo || docInfo.pageCount == 0 || pdfViewerMode" class="tilesPane" tabindex="0">\n                        <div id="imageCanvas" class="imageCanvas" >\n                            <div *ngFor="let page of docPages; let i = index" id="imgPage{{i+1}}" [ngStyle]="{ position: \'absolute\', left: (marginWidth + \'px\'), top: (page.top + \'px\'), width: (page.width + \'px\'), height: (page.height + \'px\') }" [ngClass]="{ \'imageBoxShadow\': pageNum != i+1, \'currentImageBoxShadow\': pageNum == i+1 }">\n                                <div *ngIf="!plainTextMode" class="imagePageInner">\n                                    <img *ngFor="let tile of page.imgTiles; let j = index" [src]="tile.url" [ngStyle]="{ position: \'absolute\', left: tile.x + \'px\', top: tile.y + \'px\' }" tile-loader />\n                                    <div *ngFor="let stickyNote of page.stickyNotes;" class="StickyNote" [ngStyle]="{ position: \'absolute\', left: stickyNote.x + \'px\', top: stickyNote.y + \'px\', \'background-image\': \'url(\' + stickyNote.path + \')\' }">\n                                        <div class="StickyNoteNumber">{{ stickyNote.index }}</div>\n                                    </div>\n                                    <div *ngFor="let attachment of page.attachments;" class="AttachmentAnnotation" [ngStyle]="{ position: \'absolute\', left: attachment.x + \'px\', top: attachment.y + \'px\' }" (dblclick)="openAttachment(attachment)">\n                                        <div class="placed-attachment"></div>        \n                                        <div class="AttachmentNumber">{{ attachment.index }}</div>  \n                                    </div>\n                                </div>\n                                <div *ngIf="plainTextMode" class="textPageInner TextLayer" [innerHTML]="textPages[i]"></div>\n                            </div>\n                        </div>\n                    </div>\n                    <div id="iframe-wrapper" style="height:100%">\n                        <iframe [hidden]="!docInfo || docInfo.hasImagedPages || docInfo.extension != \'pdf\'" id="pdfViewerIFrame"></iframe>\n                    </div>\n                    <div id="noPagesPane" [hidden]="!docInfo || docInfo.pageCount > 0 || (!docInfo.hasImagedPages && docInfo.extension == \'pdf\')" class="noPagesPane">\n                        <span lfLocalize="STR_DOCUMENT_NO_PAGES"></span>\n                    </div>\n                </div>\n            </div>\n         </ng-template>\n\n        <vertical-split-pane *ngIf="!responsiveSmall"\n            local-storage-key="split-pane-docview"\n            primary-component-initialratio={{ratio}}\n            separator-thickness="5"\n            class="docViewerMain"\n            (on-begin-resizing)="resizePDFPane(e)"\n            (on-ended-resizing)="panesResized()">\n\n            <div class="split-pane-content-primary">\n                <div *ngIf="pageDir == \'ltr\'" style="height: 100%"><ng-container *ngTemplateOutlet="docImage"></ng-container></div>\n                <metadata-pane *ngIf="pageDir == \'rtl\' && docInfo" [selectedEntryInfo]="docInfo" [metadata]="metadata" [tagInfo]="tagInfo" [pageNum]="pageNum" docViewer="true" [(showAnnotations)]="showAnnotations" (changeAnn)="showAnnotationsChanged($event)"></metadata-pane>\n            </div>\n            <div class="split-pane-content-secondary">\n                <metadata-pane *ngIf="docInfo && pageDir == \'ltr\'" [selectedEntryInfo]="docInfo" [metadata]="metadata" [tagInfo]="tagInfo" [pageNum]="pageNum" docViewer="true" [(showAnnotations)]="showAnnotations" (changeAnn)="showAnnotationsChanged($event)"></metadata-pane>\n                <div *ngIf="pageDir == \'rtl\'" style="height: 100%"><ng-container  *ngTemplateOutlet="docImage"></ng-container></div>\n            </div>\n        </vertical-split-pane>\n   \n        <div *ngIf="responsiveSmall" class="split-pane-content-primary docViewerMain responsiveDoc" style="height: calc(100% - 89px);">\n            <ng-container *ngTemplateOutlet="docImage"></ng-container>\n        </div>\n        <div *ngIf="responsiveSmall" class="split-pane-content-primary responsiveMetadata docViewerMain" style="height: calc(100% - 89px);">\n               <metadata-pane *ngIf="docInfo" [selectedEntryInfo]="docInfo" [metadata]="metadata" [tagInfo]="tagInfo" [pageNum]="pageNum" docViewer="true" [(showAnnotations)]="showAnnotations" (changeAnn)="showAnnotationsChanged($event)"></metadata-pane>\n        </div> \n        \n    ',providers:[g.DocumentService]}),q("design:paramtypes",[g.DocumentService,i.LocalizationService,h.CustomizationService,l.ContextService,e.Title,j.FolderListingService,m.SharedService,f.NgbModal])],a)}(),a("DocViewerComponent",o)}}}),System.register("dist/app/metadata-pane.component.js",["@angular/core","./folder-listing.service.js","./document.service.js","./weblinkcontrols-types.js","./localization.service.js","./util.js"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},l=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a}],execute:function(){i=function(){function a(){}return a}(),j=function(){function a(a,b,d,e){this.folderListingService=a,this.localizationService=b,this.documentService=d,this.contextService=e,this.displayName="",this.metadata=null,this.tabSelected="metadata",this.folderId=0,this.multipleSelected=!1,this.showAnnotationsChange=new c.EventEmitter,this.changeAnn=new c.EventEmitter,this.annotTypeNameDict={},this.annotIconClassDict={},this.annotationsLoaded=!1}return a.prototype.ngOnInit=function(){this.repoName=this.contextService.getRepoName(),this.annotTypeNameDict={0:this.localizationService.getString("STR_HIGHLIGHT"),2:this.localizationService.getString("STR_BLACKOUT"),4:this.localizationService.getString("STR_STRIKEOUT"),6:this.localizationService.getString("STR_UNDERLINE"),8:this.localizationService.getString("STR_STICKY_NOTE"),9:this.localizationService.getString("STR_ATTACHMENT"),10:this.localizationService.getString("STR_TEXTBOX"),11:this.localizationService.getString("STR_BITMAP"),12:this.localizationService.getString("STR_LINE"),13:this.localizationService.getString("STR_RECTANGLE"),14:this.localizationService.getString("STR_POLYGON"),15:this.localizationService.getString("STR_CALLOUT"),16:this.localizationService.getString("STR_STAMP"),17:this.localizationService.getString("STR_FREEHAND")},this.annotIconClassDict={0:"highlight",2:"redact",4:"strikethrough",6:"underline",8:"sticky-note",9:"attachment",10:"text",11:"image",12:"line",13:"rectangle",14:"polygon",15:"callout",16:"stamp",17:"freehand"},this.pageDir=$("body").attr("class")},a.prototype.ngOnChanges=function(a){this.selectedEntryInfo&&(this.loadPreview(),this.metadata&&(this.metadata.localizedName?this.displayName=this.metadata.localizedName:this.displayName=this.metadata.templateName))},a.prototype.switchTab=function(a){this.tabSelected=a,"preview"==a?this.loadPreview():"annotations"==a&&this.loadAnnotationInfo()},a.prototype.onTabKeydown=function(a,b){var c=a.which||a.keyCode;32!==c&&10!==c&&13!==c||this.switchTab(b)},a.prototype.onAnnotationSwitchKeyDown=function(a){var b=a.which||a.keyCode;32!==b&&10!==b&&13!==b||(this.showAnnotations=!this.showAnnotations,this.showAnnotationsChange.emit(!!this.showAnnotations),this.changeAnn.emit(!!this.showAnnotations))},a.prototype.onChangeShowAnnotations=function(a){this.showAnnotations=a,this.showAnnotationsChange.emit(!!this.showAnnotations),this.changeAnn.emit(!!this.showAnnotations)},a.prototype.loadPreview=function(){var a=this;if("true"!=this.docViewer&&(this.selectedEntryInfo.thumbnailPaths=[],this.selectedEntryInfo.targetType==f.EntryType.Document)){var b=this.selectedEntryInfo.id;this.selectedEntryInfo.linkTo!=this.selectedEntryInfo.id&&(b=this.selectedEntryInfo.linkTo),this.folderListingService.getDocumentInfo(this.repoName,b).subscribe(function(c){if(c){a.selectedEntryInfo.thumbnailPaths=[];for(var d=1;d<=c.pageCount;d++){var e="/"+a.contextService.getVdirName()+"/ThumbnailImageData.aspx?&dId="+b+"&pageNum="+d+"&"+a.dbid;a.selectedEntryInfo.thumbnailPaths.push(e)}}})}},a.prototype.getDocViewLink=function(a){return"/"+this.contextService.getVdirName()+"/DocView.aspx?id="+this.selectedEntryInfo.id+"&page="+a+"&"+this.contextService.getParamsFromUrl().dbidRepo},a.prototype.clickLinkedEntry=function(a){if(a.type==f.EntryType.Document)var b="/"+this.contextService.getVdirName()+"/DocView.aspx?id="+a.id+"&"+this.contextService.getParamsFromUrl().dbidRepo;else if(a.type==f.EntryType.Folder||a.type==f.EntryType.RecordSeries)var b="/"+this.contextService.getVdirName()+"/Browse.aspx?id="+a.id+"&"+this.contextService.getParamsFromUrl().dbidRepo;window.open(b)},a.prototype.clickLinkGroupEntry=function(a){var b="/"+this.contextService.getVdirName()+"/DocView.aspx?id="+a.id+"&"+this.contextService.getParamsFromUrl().dbidRepo;window.open(b)},a.prototype.loadAnnotationInfo=function(){var a=this;if(!this.annotationsLoaded){var b=this.selectedEntryInfo.id;this.documentService.getAllAnnotations(this.repoName,b).subscribe(function(b){if(b){a.annotations=[];for(var c=0;c<b.length;c++){for(var d=b[c],e=[],f=0;f<d.length;f++){var g=d[f],h=new i;h.type=a.annotTypeNameDict[g.annType],h.iconClass=a.annotIconClassDict[g.annType],h.propNames=[],h.propValues=[],g.annTypeIndex&&(h.propNames.push(a.localizationService.getString("STR_ID")),h.propValues.push(g.annTypeIndex.toString())),g.annCreator&&(h.propNames.push(a.localizationService.getString("STR_CREATOR")),h.propValues.push(g.annCreator)),h.propNames.push(a.localizationService.getString("STR_CREATED")),h.propValues.push(g.annCreated),h.propNames.push(a.localizationService.getString("STR_MODIFIED")),h.propValues.push(g.annModified),g.annComments&&(h.propNames.push(a.localizationService.getString("STR_COMMENT")),h.propValues.push(g.annComments)),g.annCurrentText&&(h.propNames.push(a.localizationService.getString("STR_TEXT")),h.propValues.push(g.annCurrentText)),g.annReason&&(h.propNames.push(a.localizationService.getString("STR_REASON")),h.propValues.push(g.annReason)),9==g.annType&&(h.annFileName=g.annFileName,h.annFileSize=g.annFileSize,h.annLinkRef=g.annLinkRef),e.push(h)}a.annotations.push(e)}a.annotationsLoaded=!0}})}},a.prototype.isMVFGroupHeader=function(a){return!!a&&(a.isMvfg&&a.name&&!a.values)},a.prototype.updateEntryId=function(){var a=window.location.search;if(a){a=a.substring(1);try{var b=new URLSearchParams(a);b.get("id")&&parseInt(b.get("id"))&&(this.parentId=parseInt(b.get("id")))}catch(b){var c=new RegExp(/\id=\d+/i),d=a.match(c);d&&d[0]&&(this.parentId=parseInt(d[0].substring(3)))}}},a.prototype.getSelectedEntryLink=function(){var a,b=window.location.search;switch(this.selectedEntryInfo.targetType){case f.EntryType.Document:a="DocView.aspx"+b;break;case f.EntryType.Folder:case f.EntryType.RecordSeries:default:a="Browse.aspx"+b}return this.updateEntryId(),a.indexOf("?id=")>=0?a=a.replace("?id="+this.parentId,"?id="+this.selectedEntryInfo.id):a.indexOf("&id=")>=0?a=a.replace("&id="+this.parentId,"&id="+this.selectedEntryInfo.id):b&&b.length>0?a+="&id="+this.selectedEntryInfo.id:a+="?id="+this.selectedEntryInfo.id,a},a.prototype.displayPath=function(){return this.contextService.getDisplayBreadcrumb()},k([c.Input(),l("design:type",Number)],a.prototype,"parentId",void 0),k([c.Input(),l("design:type",String)],a.prototype,"docViewer",void 0),k([c.Input(),l("design:type",f.BasicDocumentInfo)],a.prototype,"selectedEntryInfo",void 0),k([c.Input(),l("design:type",f.MetaData)],a.prototype,"metadata",void 0),k([c.Input(),l("design:type",Array)],a.prototype,"tagInfo",void 0),k([c.Input(),l("design:type",Number)],a.prototype,"pageNum",void 0),k([c.Input(),l("design:type",Boolean)],a.prototype,"multipleSelected",void 0),k([c.Output(),l("design:type",c.EventEmitter)],a.prototype,"showAnnotationsChange",void 0),k([c.Input(),l("design:type",Boolean)],a.prototype,"showAnnotations",void 0),k([c.Output(),l("design:type",c.EventEmitter)],a.prototype,"changeAnn",void 0),a=k([c.Component({selector:"metadata-pane",template:'\n        <div [dir]="pageDir" class="metaData" [ngClass]="{ \'dvMetadata DocViewerMainTable\': docViewer == \'true\' }" tabindex="0" role="document">\n            <div class="header">\n                <div id="title" *ngIf="docViewer != \'true\'">\n                    <div [ngClass]="[\'EntryImage\', (selectedEntryInfo.iconClass || \'\')]"></div> \n                    <span *ngIf="selectedEntryInfo.name != \'\'" class="folderName">{{selectedEntryInfo.name}}</span>\n                </div>\n                <ul class="ulTabs">\n                        <li [ngClass]="{\'selectedTab\': tabSelected == \'metadata\'}" (click)="switchTab(\'metadata\')" tabindex="0" (keydown)="onTabKeydown($event, \'metadata\')"><span lfLocalize="STR_METADATA"></span></li>  \n                        <li *ngIf="docViewer != \'true\'" [ngClass]="{\'selectedTab\': tabSelected == \'preview\'}" (click)="switchTab(\'preview\')" tabindex="0" (keydown)="onTabKeydown($event, \'preview\')"><span lfLocalize="PREVIEW"></span></li>\n                        <li *ngIf="docViewer == \'true\'" [ngClass]="{\'selectedTab\': tabSelected == \'annotations\'}" (click)="switchTab(\'annotations\')" tabindex="0" (keydown)="onTabKeydown($event, \'annotations\')"><span lfLocalize="STR_ANNOTATIONS"></span></li>\n                </ul>\n            </div>\n\n            <div class="previewPane" [hidden]="!(tabSelected == \'preview\')">\n                <ng-container *ngIf="!multipleSelected">\n                <div *ngFor="let path of selectedEntryInfo.thumbnailPaths; let i = index">\n                    <a [href]="getDocViewLink(i+1)" target="_blank"><img class="preview_thumbnail" src="{{path}}"><span>{{i+1}}</span></a>\n                </div>\n                </ng-container>\n                <table *ngIf="!selectedEntryInfo.thumbnailPaths || !selectedEntryInfo.thumbnailPaths?.length || multipleSelected" class="NoPreview" style="height: 100%; width:100%; margin:0; padding:0; border:0">\n                    <tr>\n                        <td style="text-align:center; vertical-align: middle" lfLocalize="NO_PREVIEW">\n                        </td>\n                    </tr>\n                </table>\n           \n            </div> \x3c!-- end preview tab --\x3e\n\n            <div [hidden]="!(tabSelected == \'metadata\' && !multipleSelected)" class="tableContainer LeftPanelContentDiv LeftPanel">\n                    <table id="metadataTable" tabindex="0">\n                    <tr class="mainHeader">\n                        <td colspan="2" lfLocalize="STR_ENTRY_PROPERTIES"></td>\n                    </tr>\n            \n                    <tr *ngIf="metadata && tagInfo && tagInfo?.length">\n                        <td><div class="mTitle" lfLocalize="STR_TAGS"></div></td>\n                        <td>\n                            <div>\n                                <div *ngFor="let tag of tagInfo">\n                                    <div class="tagIcon"></div> &nbsp;&nbsp;<span>{{tag?.displayName}}</span>\n                                    <span id="watermark{{$index}}" *ngIf="tag?.watermarkText">Watermark: {{tag.watermarkText}}</span>\n                                </div>\n                            </div>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td><div class="mTitle" lfLocalize="STR_MODIFIED"></div></td> \n                        <td><span *ngIf="metadata">{{metadata.modified}}</span></td>\n                    </tr>\n                    <tr>\n                        <td><div class="mTitle" lfLocalize="STR_CREATED"></div></td> \n                        <td><span *ngIf = "metadata">{{metadata.created}}</span></td>\n                    </tr>\n                    <tr *ngIf="displayPath()">\n                        <td><div class="mTitle" lfLocalize="STR_PATH"></div></td>\n                        <td><span *ngIf="metadata"><a [href]="getSelectedEntryLink()" target="_blank">{{metadata.path}}</a></span></td>\n                    </tr>\n\n                    \x3c!-- template/fields --\x3e\n                    <tr class="mainHeader">\n                        <td colspan="2"><span lfLocalize="STR_TEMPLATE"></span></td>\n                    </tr>\n                    <tr>\n                        <td colspan="2" style="padding-bottom:25px"><span *ngIf="metadata">{{displayName}}</span></td>\n                    \n                    </tr>\n                    <ng-container *ngIf="metadata && metadata.fInfo && metadata.fInfo?.length > 0">\n                        <tr class="fieldPane" *ngFor = "let field of metadata.fInfo; let i = index"> \n                            <td [ngClass]="{\'mvfgGroupField\': isMVFGroupHeader( metadata.fInfo[i - 1]) }" *ngIf= "field.isMvfg && field.name && field.values ">\n                                <div>{{field.name}}</div>\n                            </td>\n                            <td colspan="2" class="mainHeader borderSeparator2 " *ngIf= "field.isMvfg && field.name && !field.values">{{field.name}}</td>\n                          \n                            <td [ngClass]="{\'mvfgGroupField\': isMVFGroupHeader( metadata.fInfo[i - 1]) }" *ngIf="field.isMvfg">\n                                <div *ngFor="let fValue of field.values" >{{fValue}}</div>\n                            </td>\n                        </tr>\n                        <tr class="mainHeader borderSeparator"><td colspan="2" lfLocalize="STR_FIELDS"></td></tr>\n                        <tr class="fieldPane" *ngFor="let field of metadata.fInfo"> \n                            <td *ngIf= "!field.isMvfg && field.name && field.values">\n                                <div>{{field.name}}</div>\n                            </td>\n                            <td colspan="2" class="mainHeader borderSeparator2" *ngIf="!field.isMvfg && field.name && !field.values">{{field.name}}</td>\n                            \n                            <td *ngIf="!field.isMvfg">\n                                <div *ngFor="let fValue of field.values">{{fValue}}</div>\n                            </td>\n                        </tr>\n                    </ng-container>\n                    <ng-container *ngIf="metadata && metadata.documentRelationships?.length > 0">\n                        \x3c!-- document relationships --\x3e\n                        <tr class="mainHeader">\n                            <td colspan="2"><span lfLocalize="STR_LINKED_DOCUMENTS"></span></td>\n                        </tr>\n                        \x3c!-- TODO --\x3e\n                       <ng-container *ngFor="let r of metadata.documentRelationships">\n                            <tr class="EntryLinkRow">\n                                <td class="EntryLinks" colspan="2" >\n                                    <a style="font-weight: normal;" href="javascript:void(0)" (click)="clickLinkedEntry(r)">{{r.name}}</a>\n                                </td>\n                            </tr>\n                            <tr class="EntryLinkRow"> \n                                <td class="EntryLinks relationshipName" colspan="2">\n                                    <div>({{r.relationship}})</div>\n                                </td>\n                            </tr>\n                            <br/>\n                        </ng-container>\n                    </ng-container>\n                    <ng-container *ngIf="metadata && metadata.linkGroup && metadata.linkGroup.entries.length > 0">\n                        \x3c!-- link groups --\x3e\n                        <tr class="mainHeader">\n                            <td colspan="2"><span lfLocalize="STR_LINK_GROUPS"></span></td>\n                        </tr>\n                       <ng-container *ngFor="let e of metadata.linkGroup.entries">\n                            <tr class="LinkGroupEntryRow">\n                                <td class="LinkGroupEntries" colspan="2">\n                                    <a style="font-weight: normal;" href="javascript:void(0)" (click)="clickLinkGroupEntry(e)">{{e.name}}</a>\n                                </td>\n                            </tr>\n                            <tr class="LinkGroupEntryRow" *ngIf="e.lastModified"> \n                                <td class="LinkGroupEntries linkGroupDetail"><span lfLocalize="STR_LAST_MODIFIED"></span></td>\n                                <td class="LinkGroupEntries linkGroupDetail">{{ e.lastModified }}</td>\n                            </tr>\n                            <tr class="LinkGroupEntryRow" *ngIf="e.linkNum"> \n                                <td class="LinkGroupEntries linkGroupDetail"><span lfLocalize="LINK_NUMBER_PROMPT"></span></td>\n                                <td class="LinkGroupEntries linkGroupDetail">{{ e.linkNum }}</td>\n                            </tr>\n                            <tr class="LinkGroupEntryRow" *ngIf="e.path"> \n                                <td class="LinkGroupEntries linkGroupDetail"><span lfLocalize="STR_PATH"></span></td>\n                                <td class="LinkGroupEntries linkGroupDetail">{{ e.path }}</td>\n                            </tr>\n                            <tr class="LinkGroupEntryRow" *ngIf="e.comment"> \n                                <td class="LinkGroupEntries linkGroupDetail"><span lfLocalize="STR_COMMENT"></span></td>\n                                <td class="LinkGroupEntries linkGroupDetail">{{ e.comment }}</td>\n                            </tr>\n                            <br/>\n                        </ng-container>\n                    </ng-container>\n                </table>\n                \n                \n            </div> \n            <div [hidden]="!(tabSelected == \'metadata\' && multipleSelected)" class="tableContainer LeftPanelContentDiv LeftPanel">\n                <table *ngIf="multipleSelected" class="NoPreview" style="height: 100%; width:100%; margin:0; padding:0; border:0">\n                    <tr>\n                        <td style="text-align:center; vertical-align: middle" lfLocalize="MULTIPLE_ENTRIES">\n                        </td>\n                    </tr>\n                </table>\n            </div>\n            \x3c!-- end metadata tab --\x3e\n\n            \n            <div id="annotationPane" class="annotationPane tableContainer LeftPanelContentDiv LeftPanel" *ngIf="docViewer == \'true\'" [hidden]="!(tabSelected == \'annotations\' && !multipleSelected)">\n                <div [hidden]="!annotations">\n                    <label>\n                        <span lfLocalize="DISPLAY_ANNOTATIONS_PROMPT"></span>&nbsp; \n                        <switch [status]="showAnnotations" [onText]="localizationService.getString(\'ON\')" [offText]="localizationService.getString(\'OFF\')" [onColor]="\'blue\'" (statusChange)="onChangeShowAnnotations($event)" tabindex="0" (keydown)="onAnnotationSwitchKeyDown($event)"></switch>\n                    </label>\n                    <div *ngFor="let pageGroup of annotations; let i = index">\n                        <div class="annotationsPageGroup" id="annotationGroup{{i + 1}}" [hidden]="!pageGroup.length">\n                            {{ localizationService.getString(\'STR_PAGE_NUMBER_LABEL\').replace(\'{0}\', i+1) }} \n                        </div>\n                        <div *ngFor="let annot of pageGroup; let j = index">\n                            <div class="annotation" tabindex="0">\n                                <div>\n                                    <div class="annotationIcon" [ngClass]="annot.iconClass"></div>\n                                    <span style="font-weight: bold; margin-left: 5px;">{{ annot.type }}</span>\n                                </div>\n                                <div>\n                                    <table>\n                                        <tr *ngFor="let annotPropName of annot.propNames; let k = index">\n                                            <td class="annotationTableLabel">\n                                                <div class="body2">{{ annotPropName }}</div>\n                                            </td>\n                                            <td>\n                                                <div class="annotationTableValue">{{ annot.propValues[k] }}</div>\n                                            </td>\n                                        </tr>\n                                        <tr *ngIf="annot.annLinkRef && annot.annFileName">\n                                            <td class="annotationTableLabel">\n                                                <div class="body2"><span lfLocalize="STR_ATTACHMENT"></span></div>\n                                            </td>\n                                            <td>\n                                                <div class="annotationTableValue"><a [href]="annot.annLinkRef" target="_blank" style="font-weight: 600;">{{ annot.annFileName }}</a> ({{ annot.annFileSize }})</div>\n                                            </td>\n                                        </tr>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div> \x3c!-- end annotations tab --\x3e\n    ',providers:[d.FolderListingService,e.DocumentService]}),l("design:paramtypes",[d.FolderListingService,g.LocalizationService,e.DocumentService,h.ContextService])],a)}(),a("MetadataPaneComponent",j)}}}),System.register("dist/app/document.service.js",["@angular/core","@angular/http","./angular-http-proxy.js"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a){this.http=a,this.headers=new d.Headers({"Content-Type":"application/json","X-Lf-Suppress-Login-Redirect":"1"})}return a.prototype.getRepoNameByDbid=function(a){return this.http.postRequest("DocumentService.aspx/GetRepoNameByDbid",JSON.stringify({dbid:a}),{headers:this.headers},this.handleError)},a.prototype.getBasicDocumentInfo=function(a,b){return this.http.postRequest("DocumentService.aspx/GetBasicDocumentInfo",JSON.stringify({repoName:a,entryId:b}),{headers:this.headers},this.handleError)},a.prototype.getAllAnnotations=function(a,b){return this.http.postRequest("DocumentService.aspx/GetAllAnnotations",JSON.stringify({repoName:a,documentId:b}),{headers:this.headers},this.handleError)},a.prototype.getStickyNotesForPage=function(a,b,c){return this.http.postRequest("DocumentService.aspx/GetStickyNotesForPage",JSON.stringify({repoName:a,documentId:b,pageNum:c}),{headers:this.headers},this.handleError)},a.prototype.getAttachmentAnnotationsForPage=function(a,b,c){return this.http.postRequest("DocumentService.aspx/GetAttachmentAnnotationsForPage",JSON.stringify({repoName:a,documentId:b,pageNum:c}),{headers:this.headers},this.handleError)},a.prototype.getTextHtmlForPage=function(a,b,c,d,e){return this.http.postRequest("DocumentService.aspx/GetTextHtmlForPage",JSON.stringify({repoName:a,documentId:b,pageNum:c,showAnn:d,searchUuid:e}),{headers:this.headers},this.handleError)},a.prototype.getDocViewerSettings=function(a,b){return this.http.postRequest("DocumentService.aspx/GetDocViewerSettings",JSON.stringify({vdirName:a,repoName:b}),{headers:this.headers},this.handleError)},a.prototype.hasPrintRights=function(a){return this.http.postRequest("DocumentService.aspx/HasPrintRights",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.generatePdf=function(a,b,c,e){return this.http.post("GeneratePDF10.aspx?key="+a+"&PageRange="+b+"&Watermark="+e,JSON.stringify({}),{method:d.RequestMethod.Post,responseType:d.ResponseContentType.Blob,headers:this.headers})},a.prototype.getPDFProgress=function(a){return this.http.postRequest("DocumentService.aspx/PDFTransition",JSON.stringify({Key:a}),{headers:this.headers},this.handleError)},a.prototype.handleError=function(a){console.error("An error occurred"),console.log(a),500==a.status&&("BADLOGIN"==a.statusText||a.statusText.indexOf("BAD_LOGIN")>-1)&&(console.log("bad login error"),location.reload())},a=g([c.Injectable(),h("design:paramtypes",[e.HttpProxy])],a)}(),a("DocumentService",f)}}}),System.register("dist/app/breadcrumb.component.js",["@angular/core","./folder-listing.service.js","./document.service.js","./weblinkcontrols-types.js"],function(a,b){"use strict";var c,d,e,f,g,h=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},i=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(){this.changeFolderCrumb=new c.EventEmitter,this.showMetadata=new c.EventEmitter,this.showMetadataBool=!1,this.breadcrumbAbbreviated=!1}return a.prototype.ngOnInit=function(){var a=this;window.onresize=function(b){a.updateBreadCrumbOverflow()}},a.prototype.navigateToFolder=function(a,b){b++,this.breadcrumbs&&b!=this.breadcrumbs.length&&this.changeFolderCrumb.emit(a)},a.prototype.ngOnChanges=function(a){this.breadcrumbs&&this.updateBreadCrumb()},a.prototype.showMetadataResponsive=function(){this.showMetadataBool=!this.showMetadataBool,this.showMetadata.emit(this.showMetadataBool)},a.prototype.updateBreadCrumb=function(){var a=(new f.BreadcrumbEntry,this);setTimeout(function(){a.updateBreadCrumbOverflow()},200)},a.prototype.updateBreadCrumbOverflow=function(){var a=$(".breadcrumbEntry ul");if(a.length)try{var b=$(a[0]).find("li");$(b).show(),this.breadcrumbAbbreviated=!1;for(var c=a[0].scrollWidth-a[0].offsetWidth;c>0&&b.length>=2;)c-=b[1].offsetWidth,$(b[1]).hide(),this.breadcrumbAbbreviated=!0,b=$(a[0]).find("li:visible")}catch(a){console.log(a)}},h([c.Output(),i("design:type",Object)],a.prototype,"changeFolderCrumb",void 0),h([c.Output(),i("design:type",Object)],a.prototype,"showMetadata",void 0),h([c.Input(),i("design:type",Object)],a.prototype,"totalRecords",void 0),h([c.Input(),i("design:type",Array)],a.prototype,"breadcrumbs",void 0),h([c.Input(),i("design:type",Object)],a.prototype,"showMetadataIcon",void 0),a=h([c.Component({selector:"breadcrumb-list",template:'\n        <div class="breadcrumbEntry angularPageBackground">\n            <ul>\n                <li *ngFor="let crumb of breadcrumbs; let i = index" [ngClass]="{\'selectedFolder\': i == breadcrumbs.length-1 }">\n                    <a href="javascript:void(0)" (click)="navigateToFolder(crumb, i)">\n                        {{crumb.name}} <div *ngIf="i < breadcrumbs.length - 1" style="display: inline-block;"><div class="arrow-right-icon separator"></div></div>\n                        <div *ngIf="i == 0 && breadcrumbAbbreviated" style="display: inline-block;">...&nbsp;<div class="arrow-right-icon separator"></div></div>\n                    </a>\n                </li>            \n            </ul>\n            <div id="numberEntries" *ngIf="totalRecords">\n                {{totalRecords}} <span *ngIf="totalRecords != 1" lfLocalize="STR_ENTRIES"></span><span *ngIf="totalRecords == 1" lfLocalize="STR_ENTRY"></span>\n            </div>\n\n              <div class="show-metadata-container" *ngIf="showMetadataIcon" (click)="showMetadataResponsive()"  ><img class="x-icon" src="images/metadataDetails.svg" ></div>\n             \n        </div>\n    ',providers:[d.FolderListingService,e.DocumentService]})],a)}(),a("BreadcrumbComponent",g)}}}),System.register("dist/app/download_progress.js",["@angular/core","@ng-bootstrap/ng-bootstrap","./localization.service.js","./shared.service.js","./util.js"],function(a,b){"use strict";var c,d,e,f,g,h,i,j=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},k=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(){function a(a,b){this.activeModal=a,this.localizationService=b}return a.prototype.ngOnInit=function(){this.init()},a.prototype.init=function(){},a.prototype.log=function(a){console.log(a)},a.prototype.cancel=function(){this.activeModal.close(!0)},j([c.Input(),k("design:type",String)],a.prototype,"dialogHeader",void 0),a=j([c.Component({selector:"download-progress",template:'\n    <div class="modal-header">\n        <span class="dialogTitle">\n            <span class="dialogHeaderText" lfLocalize={{dialogHeader}} ></span>\n        </span>\n        <a href="javascript:void(0)" class="icon icon-close icon-fading" (click)="cancel()"></a>\n    </div>\n    <div class="modal-body">\n        <div class="modal-body-inner section" style="overflow: visible;">\n            <div style="width: 500px">\n                <img src="./images/WLnetloadingAnim.gif">\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <div id="dialogButtons">\n            <button style="font-size:16px" class="btn btn-neutral" type="submit" (click) = "cancel()">Cancel</button>\n        </div>\n    </div>\n    '}),k("design:paramtypes",[d.NgbActiveModal,e.LocalizationService])],a)}(),a("DownloadProgressModal",h),i=function(){function a(a,b,c,d){this.activeModal=a,this.localizationService=b,this.sharedService=c,this.contextService=d,this.selectedWatermarkIdx=0,this.auditreasons=[],this.comment="",this.result={print:!1,pageRange:this.pageRange,watermarkIdx:this.selectedWatermarkIdx},this.validiatePageRange=function(a){if(!a)return!1;if(!/^[, \-\d]*$/.test(a))return!1;for(var b=a.split(","),c=0;c<b.length;c++)if(b[c]){var d=b[c].split("-");if(0==d.length||d.length>2)return!1;if(1==d.length){var e=d[0]-0;if(0==e||e>this.pageCount)return!1}else if(2==d.length){var e=d[0]-0,f=d[1]-0;if(0==e||0==f)return!1;if(e>f)return!1;if(e>this.pageCount||f>this.pageCount)return!1}}return!0}}return a.prototype.ngOnInit=function(){var a=this;this.sharedService.getWatermarkOptions(this.repoName).subscribe(function(b){b&&(a.watermarks=b)}),this.sharedService.getAuditReasons(this.repoName).subscribe(function(b){b&&(a.auditreasons=b,a.auditreasons.length>0&&(a.selectedReason=a.auditreasons[0]))})},a.prototype.okClick=function(){var a=this,b=function(){var b=0;a.selectedReason.name;b=a.selectedReason.id,console.log(a.contextService.getVdirName());var c="/"+a.contextService.getVdirName()+"/ExportReason.aspx?Print=true",d=a.docId,e="/"+a.contextService.getVdirName()+"/ExportReason.aspx?id="+b+"&DOCID="+d+"&Comment="+encodeURIComponent(a.comment)+(/(\?|&)print=true(&|$)/i.test(c)?"&print=true":"");e+="&"+a.contextService.getDefaultRepoParam();var f={type:"GET",url:e,data:{},dataType:"html",cache:!1,success:function(b){var c=b.indexOf('<div id="key">')+14;if((parseInt(b.substring(c),10)||0)>0)return void a.activeModal.close(a.result);a.result.print=!1,a.activeModal.close(a.result),alert(a.exportAuditErrorString)},error:function(){a.result.print=!1,a.activeModal.close(a.result),alert(a.exportAuditXHRErrorString)}};return $.ajax(f),!1};this.validiatePageRange(this.pageRange)?(this.result.pageRange=this.pageRange,this.result.print=!0,this.result.watermarkIdx=this.selectedWatermarkIdx,this.auditreasons.length>0?b():this.activeModal.close(this.result)):alert(this.pageErrorString)},a.prototype.cancel=function(){this.result.print=!1,this.activeModal.close(this.result)},j([c.Input(),k("design:type",Object)],a.prototype,"repoName",void 0),j([c.Input(),k("design:type",Object)],a.prototype,"exportRights",void 0),j([c.Input(),k("design:type",Object)],a.prototype,"exportReason",void 0),j([c.Input(),k("design:type",Object)],a.prototype,"exportComment",void 0),j([c.Input(),k("design:type",Object)],a.prototype,"pageRange",void 0),j([c.Input(),k("design:type",Object)],a.prototype,"pageCount",void 0),j([c.Input(),k("design:type",Object)],a.prototype,"pageErrorString",void 0),j([c.Input(),k("design:type",Object)],a.prototype,"exportAuditErrorString",void 0),j([c.Input(),k("design:type",Object)],a.prototype,"exportAuditXHRErrorString",void 0),j([c.Input(),k("design:type",Object)],a.prototype,"docId",void 0),a=j([c.Component({selector:"pages-to-print",template:'\n    <div class="modal-header">\n        <span class="dialogTitle">\n            <span class="dialogHeaderText" lfLocalize="STR_PRINT" ></span>\n        </span>\n        <a href="javascript:void(0)" class="icon icon-close icon-fading" (click)="cancel()"></a>\n    </div>\n    <div class="modal-body">\n        <div class="modal-body-inner section" style="overflow: visible;">\n            <div style="width: 500px; margin-bottom: 10px">\n                <table>\n                    \n                    <tr *ngIf="auditreasons?.length > 0">\n                        <td><span lfLocalize="STR_SELECT_A_REASON"></span></td>\n                          <td>\n                                <select [(ngModel)]="selectedReason"><option *ngFor="let reason of auditreasons" [ngValue]="reason">{{reason.name}}</option></select>\n                          </td>\n                    </tr>\n                    <tr *ngIf="auditreasons?.length > 0">\n                        <td><span lfLocalize="STR_COMMENT"></span></td>\n                        <td><textarea [(ngModel)]="comment"></textarea></td>\n                    </tr>\n                 \n                    <tr>\n                        <td><span lfLocalize="STR_PDF_PROMPT"></span></td>\n                        <td>\n                            <input [(ngModel)]="pageRange" type="text" /> \n                            <div style="margin-top: 10px; margin-bottom: 10px;" lfLocalize="STR_PAGE_RANGE_EXAMPLE"></div>\n                        </td>\n                    </tr>\n                    <tr *ngIf="watermarks && watermarks.length > 1">\n                        <td><span lfLocalize="STR_WATERMARK"></span></td>\n                        <td>\n                            <select [(ngModel)]="selectedWatermarkIdx">\n                                <option *ngFor="let watermark of watermarks; let i = index" [value]="i">{{watermark}}</option>\n                            </select>\n                        </td>\n                    </tr>\n                </table>\n            </div>\n        </div>\n    </div>\n    <div class="modal-footer">\n        <div id="dialogButtons">\n            <button class="btn" type="submit" (click) = "okClick()" lfLocalize="STR_DOWNLOAD_PRINT"></button>\n            <button class="btn btn-neutral" type="submit" (click) = "cancel()" lfLocalize="STR_CANCEL" ></button>\n        </div>\n    </div>\n    '}),k("design:paramtypes",[d.NgbActiveModal,e.LocalizationService,f.SharedService,g.ContextService])],a)}(),a("PrintOptionsModal",i)}}}),System.register("dist/app/doc-viewer/app.module.js",["@angular/core","@angular/platform-browser","@angular/forms","@angular/http","angular2-bootstrap-switch","@angular/platform-browser/animations","./../angular-http-proxy.js","./doc-viewer.component.js","./../localization.service.js","./../localization.directive.js","ng2-split-pane/lib/ng2-split-pane","./../customization.service.js","./../metadata-pane.component.js","./../util.js","./../folder-listing.service.js","./../breadcrumb.component.js","./../shared.service.js","ngx-dropdown","@ng-bootstrap/ng-bootstrap","./../download_progress.js"],function(a,b){"use strict";function c(a,b){return new j.HttpProxy(a,b)}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};b&&b.id;return a("httpFactory",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a}],execute:function(){x=function(){function a(){}return a=y([d.NgModule({imports:[e.BrowserModule,g.HttpModule,n.SplitPaneModule,f.FormsModule,h.BootstrapSwitchModule.forRoot(),i.BrowserAnimationsModule,u.DropdownModule,v.NgbModule.forRoot()],declarations:[k.DocViewerComponent,m.LocalizationDirective,p.MetadataPaneComponent,s.BreadcrumbComponent,w.DownloadProgressModal,w.PrintOptionsModal,m.LocalizedAriaLabelDirective],providers:[{provide:j.HttpProxy,useFactory:c,deps:[g.XHRBackend,g.RequestOptions]},l.LocalizationService,o.CustomizationService,q.ContextService,r.FolderListingService,t.SharedService],bootstrap:[k.DocViewerComponent],entryComponents:[w.DownloadProgressModal,w.PrintOptionsModal]})],a)}(),a("AppModule",x)}}}),System.register("dist/app/doc-viewer/doc-viewer-main.js",["@angular/platform-browser-dynamic","@angular/core","./app.module.js"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){d.enableProdMode(),c.platformBrowserDynamic().bootstrapModule(e.AppModule)}}}),System.register("dist/app/search/search.component.js",["@angular/core","./../folder-listing.service.js","@angular/platform-browser","./../shared.service.js","./../util.js","./../localization.service.js","./../customization.service.js","./../search.service.js","./search-results.component.js"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},o=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a}],execute:function(){l=function(){function a(){this.submitButtonClicked=!1,this.searchArray=new Set(["GeneralSearch"]),this.generateSearchEvent=new c.EventEmitter,this.searchTermsCleared=new c.EventEmitter,this.numSearchPanesUpdate=new c.EventEmitter,this.setGenSearchTermEvent=new c.EventEmitter,this.selectedCustomSearch="CustomizeSearch",this.rmSearch="RecordsManagement",this.resetButtonClicked=!1,this.searchStringArrLength=0}return a.prototype.ngOnInit=function(){this.pageDir=$("body").attr("class").split(" ")[0],$("removeable-search-panes").attr("dir",this.pageDir)},a.prototype.generateSearch=function(a){this.searchStringArrLength++,this.submitButtonClicked&&(this.generateSearchEvent.emit(a),this.searchStringArrLength==this.searchArray.size&&(this.submitButtonClicked=!1))},a.prototype.setGenSearchTerm=function(a){this.setGenSearchTermEvent.emit(a)},a.prototype.customizeOptionAdded=function(a){this.searchArray.add(a),this.numSearchPanesUpdate.emit(this.searchArray.size),$(".customizeDropwdown").val("CustomizeSearch"),$(".customizeDropwdown option[value='"+a+"']").prop("disabled",!0),this.rmSearch="RecordsManagement"},a.prototype.recordsSearchAdded=function(a){$(".recordsDropdown").val("RecordsManagement"),$(".recordsDropdown option[value='"+a+"']").prop("disabled",!0),this.searchArray.add(a),this.numSearchPanesUpdate.emit(this.searchArray.size)},a.prototype.resetSearch=function(){$(".customizeDropwdown option").each(function(a){$(this).prop("disabled",!1)}),$(".recordsDropdown option").each(function(a){$(this).prop("disabled",!1)}),this.resetButtonClicked=!0,this.searchArray.clear(),this.searchArray.add("GeneralSearch"),this.numSearchPanesUpdate.emit(this.searchArray.size),this.selectedCustomSearch="CustomizeSearch",this.rmSearch="RecordsManagement",this.searchTermsCleared.emit()},a.prototype.removeFromArr=function(a){$(".customizeDropwdown option[value='"+a+"']").prop("disabled",!1),$(".recordsDropdown option[value='"+a+"']").prop("disabled",!1),this.searchArray.has(a)&&this.searchArray.delete(a),this.numSearchPanesUpdate.emit(this.searchArray.size)},a.prototype.submit=function(){this.submitButtonClicked=!0,this.searchStringArrLength=0,this.searchTermsCleared.emit()},n([c.Output(),o("design:type",Object)],a.prototype,"generateSearchEvent",void 0),n([c.Output(),o("design:type",Object)],a.prototype,"searchTermsCleared",void 0),n([c.Output(),o("design:type",Object)],a.prototype,"numSearchPanesUpdate",void 0),n([c.Output(),o("design:type",Object)],a.prototype,"setGenSearchTermEvent",void 0),a=n([c.Component({selector:"removeable-search-panes",template:'\n                   <div class="searchOptions">\n                    <select class="dropdown customizeDropwdown" [(ngModel)]="selectedCustomSearch" (change)="customizeOptionAdded($event.target.value)">\n                        <option value="CustomizeSearch" lfLocalize="STR_CUSTOMIZE_SEARCH"></option>\n                        <option value="Text" lfLocalize="STR_TEXT"></option>\n                        <option value="Name" lfLocalize="STR_NAME"></option>\n                        <option value="Template" lfLocalize="STR_TEMPLATE"></option>\n                        <option value="Field" lfLocalize="STR_FIELD"></option>\n                        <option value="WithinFolder" lfLocalize="STR_WITHIN_FOLDER"></option>\n                        <option value="WithinVolume" lfLocalize="STR_WITHIN_VOLUME"></option>\n                        <option value="StickyNote" lfLocalize="STR_STICKY_NOTE"></option>\n                        <option value="CreationDate" lfLocalize="STR_COLUMN_TYPE_CREATEDATE"></option>\n                        <option value="ModificationDate" lfLocalize="STR_MODIFICATION_DATE"></option>\n                        <option value="ElectronicDocument" lfLocalize="STR_ELECTRONIC_DOCUMENTS"></option>\n                        <option value="HasPages" lfLocalize="STR_HAS_PAGES"></option>\n                        <option value="Relationship" lfLocalize="STR_RELATIONSHIP"></option>\n                        <option value="Tags" lfLocalize="STR_TAGS"></option>\n                        <option value="GeneralSearch" lfLocalize="STR_WEBLINK_SEARCH"></option>\n                        <option value="AdvancedSearch" lfLocalize="STR_ADVANCED_SEARCH"></option>\n                    </select>\n                    <select class="dropdown recordsDropdown" [(ngModel)]="rmSearch" (change)="recordsSearchAdded($event.target.value)">\n                        <option value="RecordsManagement" lfLocalize="STR_RECORDS_MANAGEMENT"></option>\n                        <option value="Series" lfLocalize="STR_SERIES"></option>\n                        <option value="PermanentRecords" lfLocalize="STR_PERMANENT_RECORDS"></option>\n                        <option value="VitalRecords" lfLocalize="STR_VITAL_RECORDS"></option>\n                        <option value="Frozen" lfLocalize="STR_FROZEN"></option>\n                        <option value="Cutoff" lfLocalize="STR_CUTOFF"></option>\n                        <option value="CutoffInstructionType" lfLocalize="STR_DISPOSITION_TYPE"></option>\n                        <option value="DispositionEligibility" lfLocalize="STR_DISPOSITION_ELIGIBILITY"></option>\n                        <option value="CurrentLocation" lfLocalize="STR_CURRENT_LOCATION"></option>\n                        <option value="DispositionAuthority" lfLocalize="STR_DISPOSITION_AUTHORITY"></option>\n                    </select>\n                </div>\n                <div class="searchBlocks LeftPanel" role="list">\n                    <frozen-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'Frozen\')" (removeEvent)="removeFromArr($event)" role="listitem"></frozen-pane>\n                    <permanent-records-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'PermanentRecords\')" (removeEvent)="removeFromArr($event)" role="listitem"></permanent-records-pane>\n                    <series-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'Series\')" (removeEvent)="removeFromArr($event)" role="listitem"></series-pane>\n                    <cutoff-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'Cutoff\')" (removeEvent)="removeFromArr($event)" role="listitem"></cutoff-pane>\n                    <cutoff-instruction-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'CutoffInstructionType\')" (removeEvent)="removeFromArr($event)" role="listitem"></cutoff-instruction-pane>\n                    <disposition-eligibility-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'DispositionEligibility\')" (removeEvent)="removeFromArr($event)" role="listitem"></disposition-eligibility-pane>\n                    <vital-records-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'VitalRecords\')" (removeEvent)="removeFromArr($event)" role="listitem"></vital-records-pane>\n                    <current-location-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'CurrentLocation\')" (removeEvent)="removeFromArr($event)" role="listitem"></current-location-pane>\n                    <disposition-authority-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'DispositionAuthority\')" (removeEvent)="removeFromArr($event)" role="listitem"></disposition-authority-pane>\n\n                    <text-pane (searchStringEmit)="generateSearch($event)" (searchTerm)="setGenSearchTerm($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'Text\')" (removeEvent)="removeFromArr($event)" role="listitem"></text-pane>\n                    <name-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'Name\')" (removeEvent)="removeFromArr($event)" role="listitem"></name-pane>\n                    <field-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'Field\')" (removeEvent)="removeFromArr($event)" role="listitem"></field-pane>\n                    <template-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'Template\')" (removeEvent)="removeFromArr($event)" role="listitem"></template-pane>\n                    <withinfolder-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'WithinFolder\')" (removeEvent)="removeFromArr($event)" role="listitem"></withinfolder-pane>\n                    <stickyNote-pane (searchStringEmit)="generateSearch($event)" (searchTerm)="setGenSearchTerm($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'StickyNote\')" (removeEvent)="removeFromArr($event)" role="listitem"></stickyNote-pane>\n                    <withinVolume-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'WithinVolume\')" (removeEvent)="removeFromArr($event)" role="listitem"></withinVolume-pane>\n                    <creationdate-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'CreationDate\')" (removeEvent)="removeFromArr($event)" role="listitem"></creationdate-pane>\n                    <modificationdate-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'ModificationDate\')" (removeEvent)="removeFromArr($event)" role="listitem"></modificationdate-pane>\n                    <electronicdoc-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'ElectronicDocument\')" (removeEvent)="removeFromArr($event)" role="listitem"></electronicdoc-pane>\n                    <hasPages-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'HasPages\')" (removeEvent)="removeFromArr($event)" role="listitem"></hasPages-pane>\n                    <relationship-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'Relationship\')" (removeEvent)="removeFromArr($event)" role="listitem"></relationship-pane>\n                    <tags-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'Tags\')" (removeEvent)="removeFromArr($event)" role="listitem"></tags-pane>\n                    <general-search-pane (searchStringEmit)="generateSearch($event)" (searchTerm)="setGenSearchTerm($event)" [formSubmit]="submitButtonClicked" [resetEvent]="resetButtonClicked" *ngIf="searchArray.has(\'GeneralSearch\')" (removeEvent)="removeFromArr($event)" role="listitem"></general-search-pane>\n                    <advanced-search-pane (searchStringEmit)="generateSearch($event)" [formSubmit]="submitButtonClicked" *ngIf="searchArray.has(\'AdvancedSearch\')" (removeEvent)="removeFromArr($event)" role="listitem"></advanced-search-pane>\n                </div>\n                <div style="text-align:center" class="SaveFooter">\n                    <button style="width: 110px; margin-right: 5px" (click)="submit()" class="btn btn-primary" type="submit"><span lfLocalize="STR_SUBMIT"></span></button>\n                    <button class="btn btn-neutral" (click)="resetSearch()" type="submit"><span lfLocalize="STR_RESET"></span></button>\n                </div>\n    '})],a)}(),a("RemovableSearchPanes",l),m=function(){function a(a,b,c,d,e,f,g){this.folderListingService=a,this.localizationService=b,this.customizationService=c,this.sharedService=d,this.titleService=e,this.contextService=f,this.searchservice=g,this.dbOrRepoParam="",this.mainLogoSrc="",this.searchStringArr=[],this.numSearchPanes=1,this.startIdx=0,this.endIdx=20,this.resultsPerPage=20,this.currPage=1,this.responsiveSmall=!1,this.showBrowseLink=!1,this.showHomeLink=!1,this.showPrefLink=!1,this.noResultsLoaded=!0}return a.prototype.ngOnInit=function(){var a=this;this.resultsLoading=!1,this.localizationService.loadAllStrings(),this.localizationSub=this.localizationService.getEmitter().subscribe(function(b){var c=a.localizationService.getString("STR_SEARCH");a.titleService.setTitle(c),a.localizationSub.unsubscribe()});var b=this,c=function(){b.sharedService.getVdirNames().subscribe(function(a){b.contextService.setVdirName(a[0]),b.searchservice.hasSearchRights(b.repoName).subscribe(function(a){if(!a){var c="/"+b.contextService.getVdirName()+"/Welcome.aspx?"+b.contextService.getParamsFromUrl().dbidRepo;location.href=c}})}),b.customizationService.getMainLogoSrc(b.repoName).subscribe(function(a){b.mainLogoSrc=a,b.ngAfterViewInit()}),b.folderListingService.showLinks(b.repoName).subscribe(function(a){a&&(b.showBrowseLink=a.ShowBrowseLink,b.showHomeLink=a.ShowHomeLink,b.showPrefLink=a.ShowMyWeblink)})};this.repoName=this.contextService.getRepoName(),this.repoName?c():this.folderListingService.getRepoNameByDbid(this.contextService.getDbid()).subscribe(function(b){b&&(a.repoName=b,a.contextService.setRepoName(a.repoName)),c()}),$(document).keypress(function(a){13==a.which&&b.removeableSearchPanes.submit()}),this.contextService.getRepoTagInfo()||this.folderListingService.getCachedInfo(this.contextService.getRepoName()).subscribe(function(b){b&&a.contextService.setRepoTagInfo(b)}),this.pageDir=$("body").attr("class"),this.ratio="ltr"==this.pageDir?.2:.8},a.prototype.ngAfterViewInit=function(){this.setSearchBlockHeight(),setTimeout(function(){var a=$(".actionBar").height();a>$(".searchMain")[0].style.top&&($(".searchMain")[0].style.top=a+1+"px")},500);var a=this.contextService.getSearchCommandFromURL();if(a&&a.length>0){this.searchStringArr.push(a);var b=this.getSearchTermFromURL(a);this.searchTerms=[],this.searchTerms.push(b),this.searchResultComponent.submitEvent(),this.removeableSearchPanes.submitButtonClicked=!1}var c=this;setTimeout(function(){c.setMobileDragEvent($("vertical-split-separator")[0])},500),$(".logoImage").on("load",function(){c.checkOrientation()})},a.prototype.setMobileDragEvent=function(a){function b(a){var b=a/c()*100;$(".left-component").first().css("width",b+"%"),$(".right-component").first().css("width","calc("+(100-b)+"% - "+$("vertical-split-separator").width()+"px)")}function c(){return $("vertical-split-pane")[0].offsetWidth}a.addEventListener("touchmove",function(a){b(a.changedTouches[0].pageX)})},a.prototype.getSearchTermFromURL=function(a){var b=a.indexOf('"'),c=a.substring(b+1,a.length),d=c.indexOf('"');return c.substring(0,d)},a.prototype.onResize=function(a){this.setSearchBlockHeight(),$(window).width()<700?this.responsiveSmall=!0:this.responsiveSmall=!1;var b=$(".actionBar").height();b>0&&($(".searchMain")[0].style.top=b+1+"px"),this.checkOrientation()},a.prototype.checkOrientation=function(){var a=$(window).width();a<=768||a<=812&&a>$(window).height()?$(".logoImage").width()>100&&$(".logoImage").addClass("scaledLogo"):$(".logoImage").removeClass("scaledLogo");var b=$(".actionBar").height();$(".searchMain").css("top",b+"px")},a.prototype.navigateToUrl=function(a){switch(a){case"About":window.open("/"+this.contextService.getVdirName()+"/About.aspx?"+this.getDbOrRepoParam(),"About Laserfiche Weblink 10","width=500, height=300");break;case"Help":window.open("https://www.laserfiche.com/support/webhelp/weblink/10/en-US/WL/WebLink.htm");break;case"SignOut":location.href="Login.aspx?showLogin=yes&"+this.contextService.getParamsFromUrl().dbidRepo}},a.prototype.getBrowseLink=function(){return"browse.aspx?"+this.contextService.getParamsFromUrl().dbidRepo},a.prototype.log=function(a){console.log(a)},a.prototype.replacer=function(a,b,c,d){return"<em>"+a+"</em>"},a.prototype.setGenSearchTerm=function(a){this.searchTerms.push(a)},a.prototype.generateSearch=function(a){this.searchStringArr.push(a),this.searchStringArr.length==this.numSearchPanes&&(this.searchResultComponent.searchStringArr=this.searchStringArr,this.searchResultComponent.submitEvent())},a.prototype.updateNumSearchPanes=function(a){this.numSearchPanes=a},a.prototype.clearSearchTerms=function(){this.searchTerms=[],this.searchStringArr=[]},a.prototype.setSearchBlockHeight=function(){},a.prototype.getSearchLink=function(){var a="Search.aspx";return this.getDbOrRepoParam()&&(a+="?"+this.getDbOrRepoParam()),a},a.prototype.getPrefsLink=function(){var a="MyWebLink.aspx";return this.getDbOrRepoParam()&&(a+="?"+this.getDbOrRepoParam()),a},a.prototype.getHomeLink=function(){if(!this.showHomeLink)return"";var a="Welcome.aspx";return this.getDbOrRepoParam()&&(a+="?"+this.getDbOrRepoParam()),a},a.prototype.getDbOrRepoParam=function(){if(this.dbOrRepoParam)return this.dbOrRepoParam;var a="";return this.contextService.getParamsFromUrl().dbidRepo?a=this.contextService.getParamsFromUrl().dbidRepo:this.contextService.getDefaultRepoParam()&&(a=this.contextService.getDefaultRepoParam()),this.dbOrRepoParam=a,this.contextService.setDefaultRepoParam(this.dbOrRepoParam),this.dbOrRepoParam},n([c.ViewChild(k.SearchResultComponent),o("design:type",k.SearchResultComponent)],a.prototype,"searchResultComponent",void 0),n([c.ViewChild(l),o("design:type",l)],a.prototype,"removeableSearchPanes",void 0),n([c.HostListener("window:resize",["$event"]),o("design:type",Function),o("design:paramtypes",[Object]),o("design:returntype",void 0)],a.prototype,"onResize",null),a=n([c.Component({selector:"search-app",templateUrl:"./app/search/search.component.html"}),o("design:paramtypes",[d.FolderListingService,h.LocalizationService,i.CustomizationService,f.SharedService,e.Title,g.ContextService,j.SearchService])],a)}(),a("SearchComponent",m)}}}),System.register("dist/app/search-bar.component.js",["@angular/core","./folder-listing.service.js","./localization.service.js","./util.js"],function(a,b){"use strict";var c,d,e,f,g,h=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},i=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){g=function(){function a(a,b,c){this.folderListingService=a,this.localizationService=b,this.contextService=c,this.searchInput="",this.searchCurrentFolder=!0}return a.prototype.ngOnInit=function(){},a.prototype.ngOnChanges=function(a){void 0!==a.folderId&&(this.folderId=a.folderId.currentValue)},a.prototype.setSearchCurrentFolder=function(a,b){this.searchCurrentFolder=b},a.prototype.onKeyPress=function(a){13===a.which&&this.search(a)},a.prototype.search=function(a){this.folderListingService.getQuickSearchQuery(this.repoName,this.searchInput,this.searchCurrentFolder?this.folderId:1).subscribe(function(a){var b=window.location.search,c="";if(b.indexOf("searchcommand")>-1){var d=new RegExp(/\&searchcommand=[^\s?&\\]+/i);b=b.replace(d,""),c="Search.aspx"+b+"&searchcommand="+encodeURIComponent(a)}else c="Search.aspx"+b+"&searchcommand="+encodeURIComponent(a);window.location.href=c})},a.prototype.getSearchLink=function(){var a="Search.aspx";return a+="?"+this.dbidRepo},h([c.Input(),i("design:type",Number)],a.prototype,"folderId",void 0),h([c.Input(),i("design:type",Object)],a.prototype,"dbidRepo",void 0),h([c.Input(),i("design:type",Boolean)],a.prototype,"showDropdownMenu",void 0),h([c.Input(),i("design:type",String)],a.prototype,"repoName",void 0),h([c.Input(),i("design:type",String)],a.prototype,"dbid",void 0),a=h([c.Component({selector:"search-bar",template:'\n         <div class="quickSearchBox" style="display: inline-block;">\n            <div class="dropdown" dropdown>\n                <button *ngIf="showDropdownMenu" class="dropdownButton btn dropdown-toggle" dropdown-open aria-haspopup="true">\n                    <div class="icon icon-down"></div>\n                </button>\n                <ul *ngIf="showDropdownMenu" class="dropdown-menu" dropdown-not-closable-zone>\n                    <li [ngClass]="{\'selectedOpt\': searchCurrentFolder}"><a href="javascript:void(0)" (click)="setSearchCurrentFolder($event, true);"><span lfLocalize="STR_CURRENT_FOLDER"></span></a></li>\n                    <li [ngClass]="{\'selectedOpt\': !searchCurrentFolder}"><a href="javascript:void(0)" (click)="setSearchCurrentFolder($event, false);"><span lfLocalize="STR_ENTIRE_REP"></span></a></li>\n                </ul>\n            </div>\n            <input type="text" [(ngModel)]="searchInput" (keypress)="onKeyPress($event)" class="searchBox" placeholder="{{ localizationService.getString(\'SEARCH_BAR_PROMPT\') }}" name="searchInput"/>\n            <button class="searchButton btn btn-primary" (click)="search($event)" [disabled]="!searchInput">\n                <img src="./images/search.png">\n            </button>\n            &nbsp;&nbsp;&nbsp;<a *ngIf="showDropdownMenu" [href]="getSearchLink()"><span lfLocalize="ADVANCED"></span></a>\n        </div>\n    ',providers:[]}),i("design:paramtypes",[d.FolderListingService,e.LocalizationService,f.ContextService])],a)}(),a("SearchBarComponent",g)}}}),System.register("dist/app/localization.directive.js",["@angular/core","./localization.service.js"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){e=function(){function a(a,b){var c=this;this.el=a,this.localizationService=b,this.subscription=this.localizationService.getEmitter().subscribe(function(a){c.el.nativeElement.innerText=c.localizationService.getString(c.key),c.subscription.unsubscribe()})}return a.prototype.ngOnInit=function(){this.el.nativeElement.innerText=this.localizationService.getString(this.key)},a.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},g([c.Input("lfLocalize"),h("design:type",String)],a.prototype,"key",void 0),a=g([c.Directive({selector:"[lfLocalize]",providers:[]}),h("design:paramtypes",[c.ElementRef,d.LocalizationService])],a)}(),a("LocalizationDirective",e),f=function(){function a(a,b){this.el=a,this.localizationService=b}return a.prototype.ngOnInit=function(){var a=this;this.subscription=this.localizationService.getEmitter().subscribe(function(b){$(a.el.nativeElement).attr("aria-label",a.localizationService.getString(a.key)),$(a.el.nativeElement).attr("title",a.localizationService.getString(a.key)),a.subscription.unsubscribe()})},g([c.Input("lfLocalizeAriaLabelAndTitle"),h("design:type",String)],a.prototype,"key",void 0),a=g([c.Directive({selector:"[lfLocalizeAriaLabelAndTitle]",providers:[]}),h("design:paramtypes",[c.ElementRef,d.LocalizationService])],a)}(),a("LocalizedAriaLabelDirective",f)}}}),System.register("dist/app/folder-listing.service.js",["@angular/core","@angular/http","rxjs/Subject","./angular-http-proxy.js","./util.js"],function(a,b){"use strict";var c,d,e,f,g,h,i=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},j=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(){function a(a,b){this.http=a,this.contextService=b,this.headers=new d.Headers({"Content-Type":"application/json","X-Lf-Suppress-Login-Redirect":"1"}),this.columnInfoObservable=new e.Subject}return a.prototype.emitColumn=function(a){this.columnInfoObservable.next(a)},a.prototype.getFolderListing=function(a,b){return this.http.postRequest("FolderListingService.aspx/GetFolderListing",JSON.stringify({repoName:a,folderId:b}),{headers:this.headers},this.handleError)},a.prototype.handleError=function(a){console.error("An error occurred"),console.log(a),500==a.status&&("BADLOGIN"==a.statusText||a.statusText.indexOf("BAD_LOGIN")>-1)&&(console.log("bad login error"),location.reload())},a.prototype.getDbid=function(){return this.http.postRequest("FolderListingService.aspx/getRepoDBID",JSON.stringify({}),{headers:this.headers},this.handleError)},a.prototype.getFolderListing2=function(a,b,c,d,e,f,g){return this.http.postRequest("FolderListingService.aspx/GetFolderListing2",JSON.stringify({repoName:a,folderId:b,getNewListing:c,start:d,end:e,sortColumn:f,sortAscending:g}),{headers:this.headers},this.handleError)},a.prototype.getRepoNameByDbid=function(a){return this.http.postRequest("FolderListingService.aspx/GetRepoNameByDbid",JSON.stringify({dbid:a}),{headers:this.headers},this.handleError)},a.prototype.getRootFolderId=function(a){return this.http.postRequest("FolderListingService.aspx/GetRootFolderId",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getBreadCrumbs=function(a,b,c){return this.http.postRequest("FolderListingService.aspx/GetBreadCrumbs",JSON.stringify({vdirName:a,repoName:b,folderId:c}),{headers:this.headers},this.handleError)},a.prototype.getMetaData=function(a,b,c){return this.http.postRequest("FolderListingService.aspx/GetMetaData",JSON.stringify({vdirName:a,repoName:b,entryId:c}),{headers:this.headers},this.handleError)},a.prototype.getCachedInfo=function(a){return this.http.postRequest("FolderListingService.aspx/CacheTagInfo",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.SaveSelectedColumnsToCookie=function(a,b,c){return this.http.postRequest("FolderListingService.aspx/W_SaveSelectedColumnsToCookie",JSON.stringify({repoName:a,selectedColumns:b,cookieName:c}),{headers:this.headers},this.handleError)},a.prototype.getColumnInfo=function(a){return this.http.postRequest("FolderListingService.aspx/GetColumnInfo",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getQuickSearchQuery=function(a,b,c){return this.http.postRequest("FolderListingService.aspx/GetQuickSearchQuery",JSON.stringify({repoName:a,input:b,folderId:c}),{headers:this.headers},this.handleError)},a.prototype.getDocumentInfo=function(a,b){return this.http.postRequest("FolderListingService.aspx/GetDocumentInfo",JSON.stringify({repoName:a,dId:b}),{headers:this.headers},this.handleError)},a.prototype.getExportRights=function(a){return this.http.postRequest("FolderListingService.aspx/GetExportRights",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.showLinks=function(a){return this.http.postRequest("FolderListingService.aspx/ShowLinks",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.exportReason=function(a){return this.http.get(a)},a.prototype.multiDownloadAsZip=function(a,b,c,d,e){return this.http.postRequest("ZipEntriesHandler.aspx/StartExport",JSON.stringify({vdirName:a,repoName:b,ids:c,key:d,watermarkIdx:e}),{headers:this.headers},this.handleError)},a.prototype.checkExportStatus=function(a){return this.http.postRequest("ZipEntriesHandler.aspx/CheckExportStatus",JSON.stringify({token:a}),{headers:this.headers},this.handleError)},a.prototype.getExportJob=function(a){var b=new d.URLSearchParams;return b.append("token",a),this.http.post("ExportJobHandler.aspx/GetExportJob",b,{method:d.RequestMethod.Post,responseType:d.ResponseContentType.Blob})},a.prototype.GetExportAuditReasonOptions=function(a){return this.http.postRequest("FolderListingService.aspx/GetExportAuditReasonOptions",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getOpenSettings=function(a,b){return this.http.postRequest("FolderListingService.aspx/GetOpenSettings",JSON.stringify({vdirName:a,repoName:b}),{headers:this.headers},this.handleError)},a=i([c.Injectable(),j("design:paramtypes",[f.HttpProxy,g.ContextService])],a)}(),a("FolderListingService",h)}}}),System.register("dist/app/shared.service.js",["@angular/core","@angular/http","./angular-http-proxy.js"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a){this.http=a,this.headers=new d.Headers({"Content-Type":"application/json","X-Lf-Suppress-Login-Redirect":"1"})}return a.prototype.getVdirNames=function(){return this.http.postRequest("SharedService.aspx/GetVirtualDirectoryNames2",JSON.stringify({}),{headers:this.headers},this.handleError)},a.prototype.getWatermarkOptions=function(a){return this.http.postRequest("SharedService.aspx/GetWatermarkOptions",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getAuditReasons=function(a){return this.http.postRequest("SharedService.aspx/GetAuditReasons",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.emailConfigured=function(a,b){return this.http.postRequest("SharedService.aspx/EmailConfigured",JSON.stringify({vdirName:a,repoName:b}),{headers:this.headers},this.handleError)},a.prototype.handleError=function(a){console.error("An error occurred"),console.log(a)},a=g([c.Injectable(),h("design:paramtypes",[e.HttpProxy])],a)}(),a("SharedService",f)}}}),System.register("dist/app/customization.service.js",["@angular/core","@angular/http","./angular-http-proxy.js"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a){this.http=a,this.headers=new d.Headers({"Content-Type":"application/json","X-Lf-Suppress-Login-Redirect":"1"})}return a.prototype.getMainLogoSrc=function(a){return this.http.postRequest("CustomizationService.aspx/GetMainLogoSrc",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.handleError=function(a){console.error("An error occurred"),console.log(a)},a=g([c.Injectable(),h("design:paramtypes",[e.HttpProxy])],a)}(),a("CustomizationService",f)}}}),System.register("dist/app/search/search-results.component.js",["@angular/core","./../folder-listing.service.js","./../shared.service.js","./../util.js","./../localization.service.js","./../customization.service.js","./../search.service.js","./../weblinkcontrols-types.js"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},m=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a}],execute:function(){k=function(){function a(a,b,c,d,e,f){this.folderListingService=a,this.localizationService=b,this.customizationService=c,this.sharedService=d,this.contextService=e,this.searchservice=f,this.resetButtonClicked=!1,this.startIdx=0,this.endIdx=20,this.resultsPerPage=20,this.currPage=1,this.noResultsLoaded=!0}return a.prototype.onResize=function(a){this.setResultContainerHeight(),this.setResponsiveMode(),this.setResultTextWidth()},a.prototype.setResultTextWidth=function(){var a=$(".SearchResultHeader").width(),b=a-250;b<=0?$("#resultText").hide():($("#resultText").show(),$("#resultText").css("max-width",b+"px"))},a.prototype.setResponsiveMode=function(){var a=$(window).width();a<=768||a<=1024&&this.isTouchDevice?this.responsiveSmall=!0:this.responsiveSmall=!1},a.prototype.updatePaginationOverflow=function(){var a=$(".SearchResultFooter ul");if(this.pages){var b=$(a[0]).find("li");$(b).show();$(".SearchResultFooter");this.paginationAbbreviated=!1;var c=$(window).width(),d=$(".SearchResultFooter").width(),e=2,f=5;for(1!=this.currPage&&(f=6);c<d&&b.length>f;){$(b[e]).first().text()!=this.currPage?$(b[e]).hide():e++,b=$(a[0]).find("li:visible"),this.paginationAbbreviated=!0}}},a.prototype.getThumbnails=function(a){var b=a.entryId;a.type==j.EntryType.Shortcut&&(b=a.shortcutTargetId);for(var c=[],d=1;d<=a.thumbnailPageCount;d++){var e="/"+this.contextService.getVdirName()+"/ThumbnailImageData.aspx?&dId="+b+"&pageNum="+d+"&"+this.contextService.getParamsFromUrl().dbidRepo;c.push(e)}return c},a.prototype.createThumbnailLink=function(a,b){var c=parseInt(a);return c+=1,"/"+this.contextService.getVdirName()+"/DocView.aspx?id="+b+"&page="+c+"&"+this.contextService.getParamsFromUrl().dbidRepo},a.prototype.submitEvent=function(){this.startIdx=0,this.endIdx=20,this.currPage=1,this.totalPages=[],this.getSearchResults(!0)},a.prototype.ngOnInit=function(){this.searchStringArr.length>0&&this.getSearchResults(!0),this.setResponsiveMode(),this.pageDir=$("body").attr("class")},a.prototype.formatContext=function(a){if(a&&this.searchTerms&&this.searchTerms.length)for(var b=0,c=this.searchTerms;b<c.length;b++){var d=c[b],e=a.replace(/</g,"&lt;");return e=e.replace(/>/g,"&gt;"),"... "+(e=e.replace(new RegExp(this.escapeFirstChar(d),"ig"),this.replacer))+" ..."}},a.prototype.replacer=function(a,b,c,d){return"<em>"+a+"</em>"},a.prototype.escapeFirstChar=function(a){return a.replace(/^[.*+?^${}()|[\]\\]/g,"\\$&")},a.prototype.getNextPage=function(a){this.currPage=-2==a?this.currPage-1:-1==a?this.currPage+1:a,this.currPage<0&&(this.currPage=1),this.currPage<=this.pages&&this.currPage>0&&(this.endIdx=this.currPage*this.resultsPerPage,this.startIdx=this.endIdx-this.resultsPerPage,this.getSearchResults(!1))},a.prototype.setNumPages=function(a){this.setResultContainerHeight(),this.pages=Math.floor(a/this.resultsPerPage),a%this.resultsPerPage>0&&(this.pages+=1);var b=this.currPage-5;b<1&&(b=1);var c=this.currPage+5;c>this.pages&&(c=this.pages),this.totalPages=[];for(var d=b;d<=c;d++)this.totalPages.push(d)},a.prototype.setResultContainerHeight=function(){var a=$(".left").outerHeight()+$(".navbar").height(),b=a-$("#SearchResultFooter").outerHeight()-$(".navbar").height()-40;$(".ResultListingContainer").height(b),$(".ResultListingContainer").scrollTop(0)},a.prototype.setSortColumn=function(a){this.currPage=1,this.sortColumn=a,this.startIdx=0,this.endIdx=this.resultsPerPage,this.getSearchResults(!0)},a.prototype.getSearchResults=function(a){var b=this;this.searchStringArr=this.searchStringArr.filter(function(a){return a.length>0});var c=this.searchStringArr.join("&");if(c.length>0)this.resultsLoading=!0,"&"==c[c.length-1]&&(c=c.substring(0,c.length-1)),"&"==c[0]&&(c=c.substring(1)),this.sortColumn?this.searchservice.getSearchResults(this.contextService.getRepoName(),c,this.sortColumn.name,this.startIdx,this.endIdx,a,!1).subscribe(function(a){if(a){if(a.results&&1==a.results.length&&a.openIfOneResult){var c=a.results[0],d=c.type;d==j.EntryType.Shortcut&&(d=c.targetType);var e=c.entryId;c.type==j.EntryType.Shortcut&&(e=c.shortcutTargetId),d==j.EntryType.Document&&(window.location.href="/"+b.contextService.getVdirName()+"/DocView.aspx?id="+e+"&"+b.contextService.getParamsFromUrl().dbidRepo),d!=j.EntryType.Folder&&d!=j.EntryType.RecordSeries||(window.location.href="/"+b.contextService.getVdirName()+"/Browse.aspx?id="+e+"&"+b.contextService.getParamsFromUrl().dbidRepo)}b.searchResults=a,b.resultsLoading=!1,a.failed?"ConnectionError"==a.errMsg?location.reload():alert(a.errMsg):b.setNumPages(b.searchResults.hitCount)}},function(a){b.resultsLoading=!1}):this.searchservice.getSearchResults(this.contextService.getRepoName(),c,"",this.startIdx,this.endIdx,a,!1).subscribe(function(a){if(a){if(a.results&&1==a.results.length&&a.openIfOneResult){var c=a.results[0],d=c.type;d==j.EntryType.Shortcut&&(d=c.targetType);var e=c.entryId;c.type==j.EntryType.Shortcut&&(e=c.shortcutTargetId),d==j.EntryType.Document&&(window.location.href="/"+b.contextService.getVdirName()+"/DocView.aspx?id="+e+"&"+b.contextService.getParamsFromUrl().dbidRepo),d!=j.EntryType.Folder&&d!=j.EntryType.RecordSeries||(window.location.href="/"+b.contextService.getVdirName()+"/Browse.aspx?id="+e+"&"+b.contextService.getParamsFromUrl().dbidRepo)}b.searchResults=a,b.resultsLoading=!1,a.failed?"ConnectionError"==a.errMsg?location.reload():alert(a.errMsg):b.setNumPages(b.searchResults.hitCount);var f=b;setTimeout(function(){f.setResultTextWidth()},500)}},function(a){b.resultsLoading=!1});else{var d=this.localizationService.getString("STR_NO_VALID_SEARCH_CRITERIA");alert(d)}this.noResultsLoaded=!1},a.prototype.createLink=function(a){var b=a.type;b==j.EntryType.Shortcut&&(b=a.targetType);var c=a.entryId;a.type==j.EntryType.Shortcut&&(c=a.shortcutTargetId),b==j.EntryType.Document&&window.open("/"+this.contextService.getVdirName()+"/DocView.aspx?id="+c+"&"+this.contextService.getParamsFromUrl().dbidRepo),b!=j.EntryType.Folder&&b!=j.EntryType.RecordSeries||window.open("/"+this.contextService.getVdirName()+"/browse.aspx?id="+c+"&"+this.contextService.getParamsFromUrl().dbidRepo)},a.prototype.createContextHitLink=function(a,b){window.open("/"+this.contextService.getVdirName()+"/DocView.aspx?id="+a+"&page="+b+"&"+this.contextService.getParamsFromUrl().dbidRepo)},a.prototype.resultsHaveMinimizedProperties=function(){var a=this.searchResults;return!(!this.searchResults||1!=a.entryPropsDisplay&&1!=a.contextHitDisplay&&1!=a.metadataDisplay&&1!=a.userSelectedFieldsDisplay&&1!=a.thumbnailsDisplay)},l([c.Input(),m("design:type",Array)],a.prototype,"searchStringArr",void 0),l([c.Input(),m("design:type",Array)],a.prototype,"searchTerms",void 0),l([c.Input(),m("design:type",Object)],a.prototype,"responsiveSmall",void 0),l([c.Input(),m("design:type",Object)],a.prototype,"isTouchDevice",void 0),l([c.HostListener("window:resize",["$event"]),m("design:type",Function),m("design:paramtypes",[Object]),m("design:returntype",void 0)],a.prototype,"onResize",null),a=l([c.Component({selector:"search-results",template:'\n<div style="height:100%" [dir]="pageDir">\n    <div *ngIf="noResultsLoaded" style="height: 100%; width: 100%" >\n\n        <table style="height: 100%; width:100%; margin:0; padding:0; border:0">\n            <tr>\n                <td style="text-align:center; vertical-align: middle">\n                    <div><span style="font-size: 24px; color: #646464" lfLocalize="STR_NO_RESULTS_YET_HEADING"></span></div>\n                    <div><span style="font-size: 15px; color: #646464" lfLocalize="STR_NO_RESULTS_YET_EXPLANATION"></span></div>\n                </td>\n            </tr>\n        </table>\n    </div>\n\n    <div *ngIf="resultsLoading" style="height: 100%; width: 100%">\n        <table style="height: 100%; width:100%; margin:0; padding:0; border:0">\n            <tr><td style="text-align:center; vertical-align: middle"><i class="icon-spinner icon-spin"></i></td></tr>\n        </table>\n    </div>\n\n\n    <div *ngIf="!resultsLoading && searchResults" class="SearchResultHeader">\n        <span lfLocalize="STR_SORT_PROMPT"> </span>:\n        <div  style="display: inline-block" *ngIf="searchResults.sortColumns?.length > 0" class="dropdown" dropdown>\n            <button class="dropdownButton btn dropdown-toggle" dropdown-open aria-haspopup="true">\n                {{searchResults.sortColumns[0].localizedName}}\n            </button>\n            <ul class="dropdown-menu" dropdown-not-closable-zone>\n                <li class="ColumnSort" *ngFor="let column of searchResults.sortColumns"><a href="javascript:void(0)" (click)="setSortColumn(column);"><span>{{column.localizedName}}</span></a></li>\n            </ul>\n        </div>\n        <div id="resultText" style="float: right">\n            <span lfLocalize="STR_RESULTS"> </span>\n            <span *ngIf="searchResults.hitCount > 0 && searchResults.hitCount > endIdx">{{startIdx+1}} - {{endIdx}} of {{searchResults.hitCount}}</span>\n            <span *ngIf="searchResults.hitCount > 0 && searchResults.hitCount < endIdx">{{startIdx+1}} - {{searchResults.hitCount}} of {{searchResults.hitCount}}</span>\n            <span *ngIf="searchResults.hitCount == 0">0 - 0 of {{searchResults.hitCount}}</span>\n        </div>\n       \n    </div>\n    <div *ngIf="!resultsLoading" class="ResultListingContainer SearchResultContainer">\n        <div *ngIf="searchResults?.results.length == 0">\n            <span lfLocalize="STR_NO_RESULTS_FOUND"></span>\n\n        </div>\n\n        <div class="ResultItem" *ngFor="let r of searchResults?.results">\n            <div style="position: relative;" class="DocumentTitle">\n                <a href="javascript:void(0)" (click)="createLink(r)">\n\n                    <div *ngIf="r.type == -1" class="shortcutOverlay"></div>\n                    <div class="EntryImage FolderIcon DocumentBrowserNameImage" *ngIf="r.targetType == 0"></div>\n                    <div class="EntryImage Recordseries DocumentBrowserNameImage" *ngIf="r.targetType == 1"></div>\n                    <div *ngIf="r.targetType == -2" class="EntryImage Document {{r.iconClass}}"></div>\n\n                    <span>{{r.name}} </span>\n                </a>\n            </div>\n            <div class="SearchResultDetails" tabindex="0">\n                <div *ngFor="let property of searchResults.propertiesOrder">\n                    \x3c!--basically a switch statement of which property to show--\x3e\n                    <div *ngIf="property == \'E\' && searchResults.entryPropsDisplay == 0" class="EntryProperties"> {{r.entryProperties}} </div>\n                    <div class="Section UserProperties" *ngIf="property == \'U\' && searchResults.userSelectedFieldsDisplay == 0">\n                        <div *ngIf="!searchResults.showUserPropertiesAsList">\n                            <label *ngFor="let c of searchResults.columns; let i = index">\n                                <span class="property" *ngIf="!c.hidden && !(!searchResults.showEmptyUserProperties && !r.data[i])"> <span class="dispName">{{c.displayName}}:</span> {{r.data[i]}} </span>\n                            </label>\n                        </div>\n                        <ul class="UserPropertiesList" *ngIf="searchResults.showUserPropertiesAsList">\n                            <ng-container *ngFor="let c of searchResults.columns; let i = index"> <li *ngIf="!c.hidden && !(!searchResults.showEmptyUserProperties && !r.data[i])"><span class="dispName">{{c.displayName}}:</span> {{r.data[i]}} </li> </ng-container>\n                        </ul>\n                    </div>\n                    <div *ngIf="property == \'C\' && searchResults.contextHitDisplay == 0">\n                        <div class="ContextHits" *ngFor="let hit of r.contexthits">\n                            <span> <a href="javascript:void(0)" (click)="createContextHitLink(r.entryId, hit?.PageNumber)"><span lfLocalize="STR_CONTEXT_PREFIX_1"></span> {{hit?.PageNumber}}</a>&nbsp;<span [innerHtml]="formatContext(hit.Context) | sanitizeHtml"></span></span>\n                        </div>\n                    </div>\n                    <div class="Section Metadata" *ngIf="property == \'M\' && searchResults.metadataDisplay == 0 && r.metadata && r.metadata.length > 0">\n                        <div class="FieldsTitle" lfLocalize="STR_FIELDS"></div>\n                        <ng-container *ngIf="searchResults.showMetadataAsList">\n                            <div *ngFor="let field of r.metadata">\n                                <span style="font-weight: 600">{{field.name}}:</span><span *ngFor="let val of field.values"> {{val}} </span>\n                            </div>\n                        </ng-container>\n                        <ng-container *ngIf="!searchResults.showMetadataAsList">\n                            <div style="display:inline-block; margin-right: 5px;" *ngFor="let field of r.metadata">\n                                <span style="font-weight: 600">{{field.name}}:</span><span *ngFor="let val of field.values"> {{val}}</span>\n                            </div>\n                        </ng-container> <br>\n                        <div *ngIf="r.tags?.length > 0" class="WLIcon16 TagDisplayInformational" title="Tags"></div>\n                         <ng-container  *ngFor="let tag of r.tags; let i = index">\n                            <span>{{tag.name}} </span> <span *ngIf="i != r.tags.length - 1"> | </span>\n                        </ng-container>   \n                    </div>\n                    <div class="Section Metadata" *ngIf="property == \'M\' && searchResults.metadataDisplay == 0 && r.metadata && r.metadata.length == 0">\n                        <span lfLocalize="STR_SEARCH_RESULTS_XML_NO_FIELDS_SET"></span> <br>\n                         <div *ngIf="r.tags?.length > 0" class="WLIcon16 TagDisplayInformational" title="Tags"></div>\n                         <ng-container  *ngFor="let tag of r.tags; let i = index">\n                            <span>{{tag.name}} </span> <span *ngIf="i != r.tags.length - 1"> | </span>\n                        </ng-container>   \n                    </div>\n                    <div class="Section thumbnails" *ngIf="property == \'T\' && searchResults.thumbnailsDisplay == 0 && r.thumbnailPageCount">\n                        <a *ngFor="let path of getThumbnails(r); let i = index" href="{{createThumbnailLink(i, r.entryId)}}"><img class="SearchThumbnails" src="{{path}}" /> </a>\n                    </div>\n                    <div *ngIf="property == \'T\' && searchResults.thumbnailsDisplay == 0  && r.thumbnailPageCount == 0" lfLocalize="STR_ENTRY_HAS_NO_PAGES"> </div>\n                </div>\n\n                \x3c!--to toggle hide/show for minimized properties--\x3e\n                <div toggleDropDown *ngIf="resultsHaveMinimizedProperties()">\n\n                    <button class="btn btn-link HiddenPropertiesHeader"><div class="MoreLinkButton"><img src="images/downArrowExpand.png" /></div><span lfLocalize="STR_SHOW_MORE_TEXT"> </span></button>\n                    <div class="HiddenProperties">\n                        <div *ngFor="let property of searchResults.propertiesOrder">\n                            <span *ngIf="property == \'E\' && searchResults.entryPropsDisplay == 1" class="Section EntryProperties"> {{r.entryProperties}} </span>\n                            <div class="UserProperties" *ngIf="property == \'U\' && searchResults.userSelectedFieldsDisplay == 1">\n                                <div *ngIf="!searchResults.showUserPropertiesAsList">\n                                    <label *ngFor="let c of searchResults.columns; let i = index">\n                                        <span class="property" *ngIf="!c.hidden  && !(!searchResults.showEmptyUserProperties && !r.data[i])"> <span class="dispName">{{c.displayName}}:</span> {{r.data[i]}} </span>\n                                    </label>\n                                </div>\n                                <ul class="UserPropertiesList" *ngIf="searchResults.showUserPropertiesAsList">\n                                    <ng-container *ngFor="let c of searchResults.columns; let i = index"> <li *ngIf="!c.hidden && !(!searchResults.showEmptyUserProperties && !r.data[i])"><span class="dispName">{{c.displayName}}:</span> {{r.data[i]}} </li> </ng-container>\n                                </ul>\n                            </div>\n                            <div *ngIf="property == \'C\' && searchResults.contextHitDisplay == 1">\n                                <div class="Section  ContextHits" *ngFor="let hit of r.contexthits">\n                                    <span> <a href="javascript:void(0)" (click)="createContextHitLink(r.entryId, hit?.PageNumber)"><span lfLocalize="STR_CONTEXT_PREFIX_1"></span> {{hit?.PageNumber}}</a>&nbsp;<span [innerHtml]="formatContext(hit?.context)"></span></span>\n                                </div>\n                            </div>\n                            <div class="Section Metadata" *ngIf="property == \'M\' && searchResults.metadataDisplay == 1 && r.metadata && r.metadata.length > 0">\n                                <div class="FieldsTitle" lfLocalize="STR_FIELDS"></div>\n                                <ng-container *ngIf="searchResults.showMetadataAsList">\n                                    <div *ngFor="let field of r.metadata">\n                                        <span style="font-weight: 600">{{field.name}}:</span><span *ngFor="let val of field.values"> {{val}} </span>\n                                    </div>\n                                </ng-container>\n                                <ng-container *ngIf="!searchResults.showMetadataAsList">\n                                    <div style="display:inline-block; margin-right: 5px;" *ngFor="let field of r.metadata">\n                                        <span style="font-weight: 600">{{field.name}}:</span><span *ngFor="let val of field.values"> {{val}}</span>\n                                    </div>\n                                </ng-container> <br>\n                                <div *ngIf="r.tags?.length > 0" class="WLIcon16 TagDisplayInformational" title="Tags"></div>\n                               <ng-container  *ngFor="let tag of r.tags; let i = index">\n                                    <span>{{tag.name}} </span> <span *ngIf="i != r.tags.length - 1"> | </span>\n                                </ng-container>  \n                            </div>\n                            <div class="Section Metadata" *ngIf="property ==\'M\' && searchResults.metadataDisplay == 1 && r.metadata && r.metadata.length == 0">\n                              <span lfLocalize="STR_SEARCH_RESULTS_XML_NO_FIELDS_SET"></span> <br>\n                              <div *ngIf="r.tags?.length > 0" class="WLIcon16 TagDisplayInformational" title="Tags"></div>\n                              <ng-container  *ngFor="let tag of r.tags; let i = index">\n                                <span>{{tag.name}} </span> <span *ngIf="i != r.tags.length - 1"> | </span>\n                              </ng-container>   \n                            </div>\n                            <div class="Section SearchThumbnails thumbnails" *ngIf="property == \'T\' && searchResults.thumbnailsDisplay == 1 && r.thumbnailPageCount">\n                                <a *ngFor="let path of getThumbnails(r); let i = index" href="{{createThumbnailLink(i, r.entryId)}}"><img class="SearchThumbnails" src="{{path}}" /> </a>\n                            </div>\n                            <div *ngIf="property == \'T\' && searchResults.thumbnailsDisplay == 1 && r.thumbnailPageCount == 0" lfLocalize="STR_ENTRY_HAS_NO_PAGES"> </div>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n\n\n        </div>\n\n\n\n    </div>\n    \n \n    <div *ngIf="!resultsLoading && searchResults && !displayGridView" class="SearchResultFooter" id="SearchResultFooter">\n        <ul *ngIf="totalPages?.length > 1">  \n            <li *ngIf="totalPages.length > 5" (click)="getNextPage(1)" class="JumpToPageLink"><a href="javascript:void(0)" lfLocalize="STR_FIRST"></a></li>\n            <li *ngIf="currPage != 1" class="PrevPageLink JumpToPageLink"  (click)="getNextPage(-2)" style="padding: 7px 15px 7px 15px !important;"><a href="javascript:void(0)" ></a></li> \n            <li [ngClass]="{\'CurrentPageDiv\': page == currPage}" class="JumpToPageLink" *ngFor="let page of totalPages" (click)="getNextPage(page)"><a href="javascript:void(0)">{{page}}</a></li>\n            <li  *ngIf="paginationAbbreviated"><span >...&nbsp;</span></li>\n            <li  class="NextPageLink JumpToPageLink"  (click)="getNextPage(-1)" style="padding: 7px 15px 7px 15px !important;"><a href="javascript:void(0)" ></a></li> \n            <li  (click)="getNextPage(pages)" class="JumpToPageLink"><a href="javascript:void(0)" lfLocalize="STR_LAST"></a></li>\n        </ul>\n        <span *ngIf="totalPages?.length == 1" lfLocalize="STR_PAGE_1_1"></span>\n    </div>\n</div>\n'}),m("design:paramtypes",[d.FolderListingService,g.LocalizationService,h.CustomizationService,e.SharedService,f.ContextService,i.SearchService])],a)}(),a("SearchResultComponent",k)}}}),System.register("dist/app/search.service.js",["@angular/core","@angular/http","./angular-http-proxy.js"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a){this.http=a,this.headers=new d.Headers({"Content-Type":"application/json","X-Lf-Suppress-Login-Redirect":"1"})}return a.prototype.getFieldData=function(a){return this.http.postRequest("SearchService.aspx/GetFields",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getTemplateData=function(a){return this.http.postRequest("SearchService.aspx/GetTemplates",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getFieldsForTemplate=function(a,b){return this.http.postRequest("SearchService.aspx/RetrieveTemplateFields",JSON.stringify({repoName:a,templateName:b}),{headers:this.headers},this.handleError)},a.prototype.getAllTags=function(a){return this.http.postRequest("SearchService.aspx/GetAllTags",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getRelationshipInfo=function(a){return this.http.postRequest("SearchService.aspx/GetEntryLinks",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getCurrentLocations=function(a){return this.http.postRequest("SearchService.aspx/getCurrentLocations",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getVolumeData=function(a){return this.http.postRequest("SearchService.aspx/getVolumeData",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getSearchResults=function(a,b,c,d,e,f,g){return this.http.postRequest("SearchService.aspx/GetSearchListing",JSON.stringify({repoName:a,searchSyn:b,sortColumn:c,startIdx:d,endIdx:e,getNewListing:f,displayInGridView:g}),{headers:this.headers},this.handleError)},a.prototype.getReviewCycles=function(a){return this.http.postRequest("SearchService.aspx/GetReviewCycles",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getGeneralSearchOptions=function(a){return this.http.postRequest("SearchService.aspx/GetGeneralSearchOptions",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getTemplateMinFieldSetting=function(a){return this.http.postRequest("SearchService.aspx/GetMinTemplateFields",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.hasSearchRights=function(a){return this.http.postRequest("SearchService.aspx/HasSearchRights",JSON.stringify({repoName:a}),{headers:this.headers},this.handleError)},a.prototype.getFieldListValues=function(a,b){return this.http.postRequest("SearchService.aspx/GetFieldListValues",JSON.stringify({repoName:a,index:b}),{headers:this.headers},this.handleError)},a.prototype.getFieldDynamicValues=function(a,b,c,d){return this.http.postRequest("SearchService.aspx/GetFieldDynamicValues",JSON.stringify({templateName:a,fieldId:b,repoName:c,fieldValues:d}),{headers:this.headers},this.handleError)},a.prototype.handleError=function(a){console.error("An error occurred"),console.log(a),500==a.status&&("BADLOGIN"==a.statusText||a.statusText.indexOf("BAD_LOGIN")>-1)&&(console.log("bad login error"),location.reload())},a=g([c.Injectable(),h("design:paramtypes",[e.HttpProxy])],a)}(),a("SearchService",f)}}}),System.register("dist/app/weblinkcontrols-types.js",[],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();b&&b.id;return{setters:[],execute:function(){c=function(){function a(){}return a}(),a("DocumentPageInfo",c),d=function(){function a(){}return a}(),a("BasicDocumentInfo",d),e=function(){function a(){}return a}(),a("AnnotationDisplayInfo",e),f=function(){function a(){}return a}(),a("WLAuditReason",f),g=function(){function a(){}return a}(),a("ListingColumn",g),h=function(){function a(){}return a}(),a("ContextHit",h),i=function(){function a(){}return a}(),a("ListingRow",i),j=function(){function a(){}return a}(),a("ExportingInfo",j),k=function(){function a(){}return a}(),a("JobStatus",k),l=function(){function a(){}return a}(),a("FolderListingInfo",l),function(a){a[a.SHOW_ALWAYS=0]="SHOW_ALWAYS",a[a.SHOW_MINIMIZED=1]="SHOW_MINIMIZED",a[a.SHOW_NONE=2]="SHOW_NONE"}(m||(m={})),a("DisplayType",m),n=function(){function a(){}return a}(),a("SearchResults",n),o=function(){function a(){}return a}(),a("SortColumn",o),function(a){a[a.Document=-2]="Document",a[a.Shortcut=-1]="Shortcut",a[a.Folder=0]="Folder",a[a.RecordSeries=1]="RecordSeries"}(p||(p={})),a("EntryType",p),q=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return K(b,a),b}(l),a("FolderListingInfo2",q),r=function(){function a(){}return a}(),a("P_DocumentInfo",r),s=function(){function a(){}return a}(),a("BreadcrumbEntry",s),t=function(){function a(){}return a}(),a("EntryFieldInfo",t),u=function(){function a(){}return a}(),a("LinkGroupEntryInfo",u),v=function(){function a(){}return a}(),a("LinkGroupInfo",v),w=function(){function a(){}return a}(),a("DocumentRelationshipEntryInfo",w),x=function(){function a(){}return a}(),a("MetaData",x),y=function(){function a(){}return a}(),a("SearchInfo",y),z=function(){function a(){}return a}(),a("FieldData",z),A=function(){function a(){}return a}(),a("EntryTagInfo",A),B=function(){function a(){}return a}(),a("TemplateData",B),C=function(){function a(){}return a}(),a("Col",C),D=function(){function a(){}return a}(),a("ColumnInfo",D),E=function(){function a(){}return a}(),a("TagData",E),F=function(){function a(){}return a}(),a("RelationshipData",F),G=function(){function a(){}return a}(),a("LocationData",G),H=function(){function a(){}return a}(),a("VolumeData",H),I=function(){function a(){}return a}(),a("ReviewPeriodCycle",I),J=function(){function a(){}return a}(),a("OpenSettings",J)}}}),System.register("dist/app/angular-http-proxy.js",["@angular/core","@angular/http","rxjs/add/operator/map","rxjs/add/operator/catch","rxjs/add/observable/throw"],function(a,b){"use strict";var c,d,e,f=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}(),g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){},function(a){},function(a){}],execute:function(){e=function(a){function b(b,c){return a.call(this,b,c)||this}return f(b,a),b.prototype.getRequest=function(a,b,c){return this.getRequestHelper(a,b,c,!1)},b.prototype.getRequestHelper=function(a,b,c,d){var e=this;return this.get(a,b).map(function(f){return f.error?f.error.retry&&!d?e.getRequestHelper(a,b,c,!0):void 0:f.json().data}).catch(c)},b.prototype.postRequest=function(a,b,c,d){return this.postRequestHelper(a,b,c,d,!1)},b.prototype.postRequestHelper=function(a,b,c,d,e){var f=this;return this.post(a,b,c).map(function(g){return g.error?g.error.retry&&!e?f.postRequestHelper(a,b,c,d,!0):void 0:g.json().data}).catch(d)},b=g([c.Injectable(),h("design:paramtypes",[d.XHRBackend,d.RequestOptions])],b)}(d.Http),a("HttpProxy",e)}}}),System.register("dist/app/localization.service.js",["@angular/core","@angular/http","./angular-http-proxy.js"],function(a,b){"use strict";var c,d,e,f,g=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},h=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(a){this.http=a,this.stringsRetrieved=new c.EventEmitter,this.headers=new d.Headers({"Content-Type":"application/json","X-Lf-Suppress-Login-Redirect":"1"})}return a.prototype.loadAllStrings=function(){var a=this;this.http.postRequest("JavascriptStrings.aspx/GetAllStrings",JSON.stringify({}),{headers:this.headers},this.handleError).subscribe(function(b){window.stringCollection=b,window.GetString=function(a){return window.stringCollection[a]||a},a.stringsRetrieved.emit(!0)})},a.prototype.getString=function(a){return window&&window.GetString?window.GetString(a):""},a.prototype.getEmitter=function(){return this.stringsRetrieved},a.prototype.handleError=function(a){console.error("An error occurred"),console.log(a)},a=g([c.Injectable(),h("design:paramtypes",[e.HttpProxy])],a)}(),a("LocalizationService",f)}}}),System.register("dist/app/util.js",["@angular/core","@angular/platform-browser","./localization.service.js"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},n=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){f=function(){function a(){this.vdirName="",this.repoName="",this.dbid="",this.defaultRepoParam="",this.displayBreadcrumb=!1,this.vdirChanged=new c.EventEmitter,this.defaultRepoParamChanged=new c.EventEmitter}return a.prototype.setVdirName=function(a){this.vdirName=a,this.vdirChanged.emit(a)},a.prototype.getVdirName=function(){return this.vdirName},a.prototype.setRepoName=function(a){this.repoName=a},a.prototype.getRepoName=function(){return this.repoName?this.repoName:(this.repoName=this.getUrlParameter("repo"),this.repoName)},a.prototype.getDbid=function(){return this.dbid?this.dbid:(this.dbid=this.getUrlParameter("dbid"),this.dbid)},a.prototype.setDefaultRepoParam=function(a){this.defaultRepoParam=a,this.defaultRepoParamChanged.emit(a)},a.prototype.getDefaultRepoParam=function(){return this.defaultRepoParam},a.prototype.setRepoTagInfo=function(a){this.repoTagInfo=a},a.prototype.getRepoTagInfo=function(){return this.repoTagInfo},a.prototype.getUrlParameter=function(a){var b,c,d=decodeURIComponent(window.location.search.substring(1)),e=d.split("&");for(c=0;c<e.length;c++)if(b=e[c].split("="),b[0]===a)return void 0===b[1]?"":b[1];return""},a.prototype.msieversion=function(){return!!(window.navigator.userAgent.indexOf("MSIE ")>0||navigator.userAgent.match(/Trident.*rv\:11\./))},a.prototype.getTagInfo=function(a){for(var b=0,c=this.repoTagInfo;b<c.length;b++){var d=c[b];if(a==d.id)return d}},a.prototype.getParamsFromUrl=function(){var a=1,b=!1,c="",d=window.location.search;if(d)try{if(this.msieversion()||/Edge/.test(navigator.userAgent)){var e=new RegExp(/\?id=\d+/i),f=d.match(e);f&&f[0]&&(a=parseInt(f[0].substring(4)),b=!0);var e=new RegExp(/\?startid=\d+/i),f=d.match(e);f&&f[0]&&(a=parseInt(f[0].substring(9)),b=!0);var e=new RegExp(/dbid=\d+/i),g=d.match(e);g&&g[0]&&(c=g[0]);var e=new RegExp(/repo=[^\s?&\\]+/i),h=d.match(e);h&&h[0]&&(g&&g[0]&&(c+="&"),c+=h[0])}else{d=d.substring(1);var i=new URLSearchParams(d);i.get("id")&&parseInt(i.get("id"))?(a=parseInt(i.get("id")),b=!0):i.get("startid")&&parseInt(i.get("startid"))&&(a=parseInt(i.get("startid")),b=!0),i.get("dbid")&&(c="dbid="+i.get("dbid")),i.get("repo")&&(i.get("dbid")&&(c+="&"),c+="repo="+i.get("repo"),this.setRepoName(i.get("repo")))}}catch(a){console.log("error parsing url"+a.message)}return{entryId:a,entryIdFound:b,dbidRepo:c}},a.prototype.getSearchCommandFromURL=function(){var a=window.location.search,b="";if(a){try{this.msieversion();a=a.substring(1);var c=new URLSearchParams(a);c.get("searchcommand")&&(b=c.get("searchcommand"))}catch(a){console.log("error parsing url"+a.message)}return b}},a.prototype.getPageNumFromURL=function(){var a,b=window.location.search;if(b){try{if(this.msieversion()||/Edge/.test(navigator.userAgent)){var c=new RegExp(/\?page=\d+/i),d=b.match(c);d&&d[0]&&(a=parseInt(d[0].substring(4)));var c=new RegExp(/\?pageNum=\d+/i),d=b.match(c);d&&d[0]&&(a=parseInt(d[0].substring(9)))}else{b=b.substring(1);var e=new URLSearchParams(b);e.get("page")&&parseInt(e.get("page"))?a=parseInt(e.get("page")):e.get("pageNum")&&parseInt(e.get("pageNum"))&&(a=parseInt(e.get("pageNum")))}}catch(a){console.log("error parsing url"+a.message)}return a}},a.prototype.setDisplayBreadcrumb=function(a){this.displayBreadcrumb=a},a.prototype.getDisplayBreadcrumb=function(){return this.displayBreadcrumb},a=m([c.Injectable(),n("design:paramtypes",[])],a)}(),a("ContextService",f),g=function(){function a(a){this.sanitizer=a}return a.prototype.transform=function(a){return this.sanitizer.bypassSecurityTrustHtml(a)},a=m([c.Pipe({name:"sanitizeHtml"}),n("design:paramtypes",[d.DomSanitizer])],a)}(),a("SanitizeHtml",g),h=function(){function a(a,b){this.el=a,this.localizationService=b}return a.prototype.onClick=function(a){var b=this.el.nativeElement.querySelector(".HiddenPropertiesHeader"),c=this.el.nativeElement.querySelector(".HiddenProperties");$(c).is(":visible")?($(c).slideUp("fast",function(){}),$(b).html("<div class='MoreLinkButton'><img src='images/downArrowExpand.png' /></div><span>"+this.showMoreInformationString+"</span>")):($(c).slideDown("fast",function(){}),$(b).html("<div class='MoreLinkButton'><img src='images/upArrowCollapse.png' /> </div> <span >"+this.showLessInformationString+" </span>"))},a.prototype.ngOnInit=function(){this.showMoreInformationString=this.localizationService.getString("STR_SHOW_MORE_TEXT"),this.showLessInformationString=this.localizationService.getString("STR_SHOW_LESS_TEXT")},m([c.HostListener("click",["$event"]),n("design:type",Function),n("design:paramtypes",[Object]),n("design:returntype",void 0)],a.prototype,"onClick",null),a=m([c.Directive({selector:"[toggleDropDown]",providers:[]}),n("design:paramtypes",[c.ElementRef,e.LocalizationService])],a)}(),a("ToggleDropdownDirective",h),i=function(){function a(a){this.el=a}return a.prototype.onMouseEnter=function(){this.el.nativeElement.style.backgroundColor="#e9f9fc"},a.prototype.onMouseLeave=function(){this.el.nativeElement.style.backgroundColor="#fff"},a=m([c.Directive({selector:"[hoverDirective]",host:{"(mouseenter)":"onMouseEnter()","(mouseleave)":"onMouseLeave()"}}),n("design:paramtypes",[c.ElementRef])],a)}(),a("hoverDirective",i),j=function(){function a(a){var b=this;this.el=a,this.insideFieldCanvas=new c.EventEmitter,this.placeAtLocation=new c.EventEmitter,this.el.nativeElement.ondragover=function(c){c.preventDefault(),setTimeout(function(){b.insideFieldCanvas.emit(!0)},0);for(var d=0,e=0,f=a.nativeElement.children;e<f.length;e++){var g=f[e];b.createChildDragEvent(d,g),d++}},this.el.nativeElement.ondragleave=function(a){setTimeout(function(){b.insideFieldCanvas.emit(!1)},1e3)}}return a.prototype.createChildDragEvent=function(a,b){var c=this;b.ondragover=function(b){c.placeAtLocation.emit(a)}},m([c.Output(),n("design:type",c.EventEmitter)],a.prototype,"insideFieldCanvas",void 0),m([c.Output(),n("design:type",c.EventEmitter)],a.prototype,"placeAtLocation",void 0),a=m([c.Directive({selector:"[insideCanvas]",providers:[]}),n("design:paramtypes",[c.ElementRef])],a)}(),a("insideFieldCanvasDirective",j),k=function(){function a(a){this.el=a,this.insideFieldCanvas=new c.EventEmitter,this.getPoint=function(a,b){return a&&a.touches&&(a=a.touches[0]),{x:b?a.pageX:a.clientX,y:b?a.pageY:a.clientY}};var b=this;this.el.nativeElement.addEventListener("touchmove",function(a){b.fireEvent("dragstart",b.el.nativeElement),b.image?b.moveImage(a):b.createDragImage(a,b.el.nativeElement)},!1),this.el.nativeElement.addEventListener("touchend",function(a){b.insideFieldCanvas.emit(!0),b.fireEvent("dragend",b.el.nativeElement),b.destroyImage()},!1)}return a.prototype.fireEvent=function(a,b){var c;document.createEvent&&(c=document.createEvent("HTMLEvents"),c.initEvent(a,!0,!0)),c.eventName=a,document.createEvent?b.dispatchEvent(c):b.fireEvent("on"+c.eventType,c)},a.prototype.createDragImage=function(a,b){this.image&&this.destroyImage(),this.image=b.cloneNode(!0),this.image.style.position="absolute";var c=(b.getBoundingClientRect(),this.getPoint(a,!0));$(this.image).css("top",c.y+"px"),$(document.body).append(this.image),this.moveImage(a)},a.prototype.moveImage=function(a){var b=this;requestAnimationFrame(function(){if(b.image){var c=b.getPoint(a,!0),d=b.image.style;d.position="absolute",d.pointerEvents="none",d.zIndex="999999",d.left=c.x+"px",d.top=c.y+"px",$(b.image).is("li")&&$(b.image).css("list-style-type","none")}})},a.prototype.destroyImage=function(){this.image&&this.image.parentElement&&this.image.parentElement.removeChild(this.image),this.image=null},m([c.Output(),n("design:type",c.EventEmitter)],a.prototype,"insideFieldCanvas",void 0),a=m([c.Directive({selector:"[MobileColumnDrag]",providers:[]}),n("design:paramtypes",[c.ElementRef])],a)}(),a("MobileColumnDrag",k),l=function(){function a(a){this.el=a}return a.prototype.ngOnInit=function(){for(var a=this.el.nativeElement,b=a.parentElement;a.firstChild;)b.insertBefore(a.firstChild,a);b.removeChild(a)},a=m([c.Directive({selector:"[remove-host]"}),n("design:paramtypes",[c.ElementRef])],a)}(),a("RemoveHost",l)}}}),System.register("dist/app/search/search-pane.component.js",["@angular/core","./../search.service.js","./../weblinkcontrols-types.js","./../localization.service.js","./../util.js"],function(a,b){"use strict";var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g},H=this&&this.__metadata||function(a,b){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(a,b)};b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a}],execute:function(){h=function(){function a(a){this.localizationService=a,this.searchText1="",this.searchText2="",this.withinText="10",this.selectedValue="1",this.searchTerm=new c.EventEmitter,this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter,this.buttons=[{name:"text",value:"terms",text:this.localizationService.getString("STR_PHRASE")},{name:"text",value:"and",text:this.localizationService.getString("STR_AND")},{name:"text",value:"or",text:this.localizationService.getString("STR_OR")},{name:"text",value:"not",text:this.localizationService.getString("STR_NOT")},{name:"text",value:"within",text:this.localizationService.getString("STR_WITHIN")}],this.model={selected:"terms"}}return a.prototype.ngOnInit=function(){},a.prototype.getInfo=function(){},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},a.prototype.change=function(a){},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();b?this.searchStringEmit.emit(b):this.searchStringEmit.emit("")}},a.prototype.genSearchSyntax=function(){var a="";if(this.searchText1.length>0||this.searchText2.length>0){var b=this.searchText1,c=this.searchText2;if("terms"==this.model.selected||0==c.length)a=b,this.searchTerm.emit(a);else if(0==b.length)a=c,this.searchTerm.emit(a);else if("and"==this.model.selected)a="("+b+" & "+c+")";else if("or"==this.model.selected)a="("+b+" | "+c+")";else if("not"==this.model.selected)a="("+b+" - "+c+")";else{var d=10;try{d=parseInt(this.withinText),d<0&&(d=0)}catch(a){return}isNaN(d)||(a=b+" ^"+parseInt(this.selectedValue)*d+" "+c)}return a}},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchTerm",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"text-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_TEXT"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'Text\')"><img class="x-icon" src="images/x.svg"></button>\n            \n            <label lfLocalize="STR_PHRASE" for="searchText1" class="block"></label>\n            <input type="text" required [(ngModel)]="searchText1" name="searchText1" id="searchText1" /> <br/> \n\n            <span *ngFor="let button of buttons">\n                <input type="radio" required [(ngModel)]="model.selected" value="{{button.value}}" name="{{button.name}}" id="{{button.name}}Button"> <label for="{{button.name}}">{{button.text}}</label>\n                    </span>\n                    \n            <div *ngIf="model.selected == \'within\'">Within <br/><input type="text" required [(ngModel)]="withinText" name="withinText" value="10" > <br/>   \n                    <select class="dropdown" [(ngModel)] ="selectedValue">\n                        <option [ngValue]="1" value="1" lfLocalize="STR_WORDS"></option>\n                        <option [ngValue]="10" lfLocalize="STR_SENTENCES_WORDS"></option>\n                        <option [ngValue]="50" lfLocalize="STR_PARAGRAPHS_WORDS"></option>\n                    </select>\n                    </div>\n\n                    <input *ngIf="model.selected!=\'terms\'"  type="text" required [(ngModel)]="searchText2" name="searchText2"> <br/>   \n        </div>\n'}),H("design:paramtypes",[f.LocalizationService])],a)}(),a("TextPaneComponent",h),i=function(){function a(){this.searchSyn="",this.document=!0,this.folder=!0,this.shortcut=!0,this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){},a.prototype.getInfo=function(){},a.prototype.ngOnChanges=function(a){this.formSubmit&&(this.genSearchSyntax(),this.searchSyn?this.searchStringEmit.emit(this.searchSyn):this.searchStringEmit.emit(""))},a.prototype.genSearchSyntax=function(){if(this.name&&this.name.length>0||(this.document||this.document||this.folder)&&!(this.folder&&this.document&&this.shortcut)){var a="*";this.name.length>0&&(a=this.name.replace('"','""')),this.searchSyn='{ LF:name  = "'+a+'", Type = "',this.document&&(this.searchSyn+="D"),this.folder&&(this.searchSyn+="F"),this.shortcut&&(this.searchSyn+="S"),this.searchSyn+='" }'}else this.searchSyn=""},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"name-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize ="STR_NAME"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'Name\')"><img class="x-icon" src="images/x.svg"></button>\n            \n            <label lfLocalize="STR_ENTER_NAME_SEARCH_FOR" class="block" for="name"></label>\n            <input type="text" required [(ngModel)]="name" name="name" id="name"><br/>\n\n            <input type="checkbox" required [checked]="document" (change)="document = !document" name="docType" id="docTypeDoc"> <label lfLocalize="STR_DOCUMENT" for="docTypeDoc"></label>\n            <input type="checkbox" required [checked]="folder" (change)="folder = !folder" name="docType" id="docTypeFolder"> <label lfLocalize="STR_FOLDER" for="docTypeFolder"></label>  \n            <input type="checkbox" required [checked]="shortcut" (change)="shortcut = !shortcut" name="docType" id="docTypeShortcut"> <label lfLocalize="STR_SHORTCUT" for="docTypeShortcut"></label>\n        </div>\n'})],a)}(),a("NamePaneComponent",i),j=function(){function a(a){this.localizationService=a,this.reason="",this.buttons=[{name:"frozen",value:"notFrozen",text:this.localizationService.getString("STR_FIND_NOT_FROZEN")},{name:"frozen",value:"frozen",text:this.localizationService.getString("STR_FIND_FROZEN")}],this.searchInFrozen=!1,this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter,this.model={selected:"notFrozen"}}return a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.ngOnInit=function(){},a.prototype.genSearchSyntax=function(){var a="";return""!=this.model.selected&&("frozen"==this.model.selected&&(a='{LFRM:FrozenDocument = "Y"'),"notFrozen"==this.model.selected&&(a='{LFRM:FrozenDocument = "N"'),this.searchInFrozen&&(a='{LFRM:FrozenReason = "'+this.reason+'"'),a+="}"),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"frozen-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_FROZEN"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'Frozen\')"><img class="x-icon" src="images/x.svg"></button>\n\n            <div *ngFor="let button of buttons">\n                <input type="radio" required [(ngModel)]="model.selected" value="{{button.value}}" name="{{button.name}}" id="{{button.name}}Frozen"> <label for="{{button.name}}Frozen">{{button.text}}</label>\n                </div>   \n                \n            <input type="checkbox" [disabled]="model.selected == \'notFrozen\'" [(ngModel)]="searchInFrozen" id="searchInFrozen"> <label lfLocalize="STR_SEARCH_FROZEN_REASONS" for="searchInFrozen"></label>\n                \n            <label lfLocalize="STR_REASON" class="block" for="reason"></label>\n            <input type="text" [disabled]="!searchInFrozen" required [(ngModel)]="reason" name="reason" id="reason"> <br/>\n                \n             \x3c!-- <input type="button" value="Search" (click) = "genSearchSyntax($event)"> --\x3e\n        </div>\n'}),H("design:paramtypes",[f.LocalizationService])],a)}(),a("FrozenPaneComponent",j),k=function(){function a(){this.codereason="",this.descriptionreason="",this.code=!1,this.description=!1,this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.genSearchSyntax=function(){var a="";return this.code&&(a+='{LFRM:Code="'+this.codereason+'"}'),this.code&&this.description&&(a+=" & "),this.description&&(a+='{LFRM:SeriesDesc="'+this.descriptionreason+'"}'),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"series-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_SERIES"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'Series\')"><img class="x-icon" src="images/x.svg"></button> <br>\n\n            <input class="checkboxNoIndent" type="checkbox" required [(ngModel)]="code" id="code"> <label lfLocalize="STR_SEARCH_FOR_CODE" for="code"></label> <br>\n\n                <input  type="text" [disabled]="!code" required [(ngModel)]="codereason" name="codereason"> <br/>\n            <input class="checkboxNoIndent" type="checkbox" required [(ngModel)]="description" id="description"><label lfLocalize="STR_SEARCH_FOR_DESCRIPTION" for="description"></label>       \n\n                <input  type="text" [disabled]="!description" required [(ngModel)]="descriptionreason" name="descriptionreason"> <br/>\n        </div>\n'})],a)}(),a("SeriesPaneComponent",k),l=function(){function a(a){this.localizationService=a,this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter,this.dueString="",this.buttons=[{name:"already cutoff",value:"alreadycutoff",text:this.localizationService.getString("STR_ALREADY_CUTOFF")},{name:"due for cutoff",value:"dueforcutoff",text:this.localizationService.getString("STR_DUE_FOR_CUTOFF")}],this.model={selected:"dueforcutoff"}}return a.prototype.getYearRange=function(){var a=(new Date).getFullYear();return a-100+":"+(a+100)},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.getDateFormat=function(a){a||(this.dueString="");try{var b=a.getMonth()+1;this.dueString=b+"/"+a.getDate()+"/"+a.getFullYear()}catch(a){console.log("error formatting date")}},a.prototype.ngOnInit=function(){},a.prototype.genSearchSyntax=function(){return"alreadycutoff"==this.model.selected?"{LFRM:ActualCutoffDate=*}":this.dueString.length>0?'{LFRM:EligibleForCutoff<="'+this.dueString+'"}':""},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"cutoff-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_CUTOFF"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'Cutoff\')"><img class="x-icon" src="images/x.svg"></button>\n\n            <div *ngFor="let button of buttons">\n                <input type="radio" required [(ngModel)]="model.selected" value="{{button.value}}" name="{{button.name}}" id="{{button.name}}"> <label for="{{button.name}}">{{button.text}}</label>\n                </div>   \n\n            <label lfLocalize="STR_DATE"></label> <p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [disabled]="model.selected !=\'dueforcutoff\'" [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="dueString" dateFormat="mm/dd/yy" (ngModelChange)="getDateFormat($event)"></p-calendar> <br>\n        </div>\n'}),H("design:paramtypes",[f.LocalizationService])],a)}(),a("CutoffPaneComponent",l),m=function(){function a(){this.event=!1,this.time=!1,this.timeEvent=!1,this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.genSearchSyntax=function(){var a="{LFRM:";return this.time&&this.event&&this.timeEvent?a+"RetentionType=*}":(this.time||this.event||this.timeEvent?(a+='RetentionType="',this.time&&(a+="T,"),this.event&&(a+="E,"),this.timeEvent&&(a+="N,")):a+='RetentionType="NULL"',(a=a.substring(0,a.length-1))+'"}')},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"cutoff-instruction-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_DISPOSITION_TYPE" ></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'CutoffInstructionType\')"><img class="x-icon" src="images/x.svg"></button> <br>\n\n            <input type="checkbox" required [(ngModel)]="event" id="event"> <label lfLocalize="STR_EVENT" for="event"></label> <br>\n            <input type="checkbox" required [(ngModel)]="time" id="time"> <label lfLocalize="STR_TIME" for="time"></label> <br>\n            <input type="checkbox" required [(ngModel)]="timeEvent" id="timeEvent"> <label lfLocalize="STR_TIME_EVENT" for="timeEvent"></label> <br>\n        </div>\n'})],a)}(),a("CutoffInstructionPaneComponent",m),n=function(){function a(){this.dispositionAction="U",this.fromDate="",this.endDate="",this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.getYearRange=function(){var a=(new Date).getFullYear();return a-100+":"+(a+100)},a.prototype.getDateFormat=function(a,b,c){a||("from"==c&&(this.fromDate=""),"to"==c&&(this.endDate=""));try{var d=a.getMonth()+1;"from"==c&&(this.fromDate=d+"/"+a.getDate()+"/"+a.getFullYear()),"to"==c&&(this.endDate=d+"/"+a.getDate()+"/"+a.getFullYear())}catch(a){console.log("error formatting date")}},a.prototype.genSearchSyntax=function(){if(this.fromDate.length>0||this.endDate.length>0){var a="{LFRM:DispEligibilityAction="+this.dispositionAction;return this.fromDate.length>0&&(a+=', ELIGIBILITYDATE >= "'+this.fromDate+'"'),this.endDate.length>0&&(a+=', ELIGIBILITYDATE <= "'+this.endDate+'"'),a+"}"}return""},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"disposition-eligibility-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize ="STR_DISPOSITION_ELIGIBILITY"></div> \n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'DispositionEligibility\')"><img class="x-icon" src="images/x.svg"></button> \n\n            <label lfLocalize="STR_DISPOSITION_ACTION" class="block"> </label>\n            <select [(ngModel)]="dispositionAction" lfLocalizeAriaLabelAndTitle="STR_DISPOSITION_ACTION">\n                <option value="U" lfLocalize="STR_ALL"></option>\n                <option value="A" lfLocalize="STR_ACCESSION"></option>\n                <option value="D" lfLocalize="STR_DESTROY"></option>\n                <option value="T" lfLocalize="STR_TRANSFER"></option>\n                </select><br>\n\n            <label lfLocalize="STR_DATE_RANGE" class="block"></label>\n                <table>\n                <tr><td style="padding-right:15px;"> <span lfLocalize="STR_FROM"></span></td> <td> <p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="fromDate" [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} (ngModelChange)="getDateFormat($event, i,\'from\')"  dateFormat="mm/dd/yy" ></p-calendar> </td></tr>\n                    <tr><td style="padding-right:15px;"> <span lfLocalize="STR_TO"></span></td>   <td>  <p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="endDate" [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} (ngModelChange)="getDateFormat($event, i, \'to\')"  dateFormat="mm/dd/yy" ></p-calendar> </td></tr>\n                </table>\n        </div>\n'})],a)}(),a("DispositionEligibilityComponent",n),o=function(){function a(a,b){this.searchservice=a,this.contextService=b,this.selectedLocations=[],this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){this.getInfo()},a.prototype.getInfo=function(){var a=this;this.searchservice.getCurrentLocations(this.contextService.getRepoName()).subscribe(function(b){if(b){a.currentLocations=b.locationData;for(var c=0;c<a.currentLocations.length;c++)a.selectedLocations[c]=!1}})},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.genSearchSyntax=function(){for(var a="",b=!1,c=0;c<this.currentLocations.length;c++)this.selectedLocations[c]&&(b=!0,a+='{LFRM:CurrentLocation="'+this.currentLocations[c]+'"} | ');return b&&(a=a.substring(0,a.length-2)),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"current-location-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize ="STR_CURRENT_LOCATION"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'CurrentLocation\')"><img class="x-icon" src="images/x.svg"></button>\n\n                <div lfLocalize="STR_SELECT_LOCATIONS"> </div>\n                <div class="blockList">\n                <div class="searchBlockCheckOption" *ngFor="let location of currentLocations; let i = index">\n                    <input type="checkbox" [(ngModel)]="selectedLocations[i]" id="location{{i}}"> <label for="location{{i}}">{{location}}</label>\n                    </div>\n                </div>\n        </div>\n',styleUrls:["./app/search/search-component.css"],providers:[d.SearchService]}),H("design:paramtypes",[d.SearchService,g.ContextService])],a)}(),a("CurrentLocationComponent",o),p=function(){function a(){this.permanent="findNonPermanent",this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.genSearchSyntax=function(){var a="";return this.permanent.length>0&&(a+='{LFRM:PermanentRecord="',"findNonPermanent"==this.permanent&&(a+='N"}'),"findPermanent"==this.permanent&&(a+='Y"}')),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"permanent-records-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class = "panelHeader" lfLocalize="STR_PERMANENT_RECORDS"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'PermanentRecords\')"><img class="x-icon" src="images/x.svg"></button> <br>\n\n            <input type="radio" [(ngModel)]="permanent" value="findNonPermanent" id="nonPermanent"> <label lfLocalize="STR_FIND_NON_PERMANENT" for="nonPermanent"></label> <br>\n            <input type="radio" [(ngModel)]="permanent" value="findPermanent" id="permanent"> <label lfLocalize="STR_FIND_PERMANENT" for="permanent"></label>  <br>\n        </div>\n',styleUrls:["./app/search/search-component.css"]})],a)}(),a("PermanentRecordsComponent",p),q=function(){function a(){this.userInput="",this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.genSearchSyntax=function(){var a="";return this.userInput.length>0&&(a+='{LFRM:DispositionAuthority="'+this.userInput+'"}'),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"disposition-authority-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class = "panelHeader" lfLocalize="STR_DISPOSITION_AUTHORITY"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'DispositionAuthority\')"><img class="x-icon" src="images/x.svg"></button> <br>\n         \n            <label lfLocalize="STR_SEARCH_FOR_AUTHORITY" for="userInput"></label>\n            <input type="text" [(ngModel)]="userInput" id="userInput">\n        </div>\n',styleUrls:["./app/search/search-component.css"],providers:[d.SearchService]})],a)}(),a("DispositionAuthorityComponent",q),r=function(){function a(a,b){this.searchservice=a,this.contextService=b,this.vital="N",this.searchReviewDate=!1,this.searchReviewPeriod=!1,this.reviewDate="LastReviewDate",this.reviewDateInput1="",this.reviewDateInput2="",this.cycleDescriptions=[],this.cycleCodes=[],this.reviewPeriod="",this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){this.getReviewCycles()},a.prototype.getYearRange=function(){var a=(new Date).getFullYear();return a-100+":"+(a+100)},a.prototype.getReviewCycles=function(){var a=this;this.searchservice.getReviewCycles(this.contextService.getRepoName()).subscribe(function(b){b&&(a.reviewPeriodCycle=b,a.cycleDescriptions=a.reviewPeriodCycle.description,a.cycleCodes=a.reviewPeriodCycle.code)})},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.getDateFormat=function(a,b){a||("input1"==b&&(this.reviewDateInput1=""),"input2"==b&&(this.reviewDateInput2=""));try{var c=a.getMonth()+1;"input1"==b&&(this.reviewDateInput1=c+"/"+a.getDate()+"/"+a.getFullYear()),"input2"==b&&(this.reviewDateInput2=c+"/"+a.getDate()+"/"+a.getFullYear())}catch(a){console.log("error formatting date")}},a.prototype.genSearchSyntax=function(){var a="";return this.searchReviewDate||this.searchReviewPeriod||(a+='{LFRM:VitalRecord="'+this.vital+'"}'),this.searchReviewDate&&((this.reviewDateInput1.length>0||this.reviewDateInput2.length>0)&&(a+="{LFRM:"),this.reviewDateInput1.length>0&&(a+=this.reviewDate+'>= "'+this.reviewDateInput1+'", '),this.reviewDateInput2.length>0&&(a+=this.reviewDate+'<= "'+this.reviewDateInput2+'", ')),this.searchReviewPeriod&&(a.indexOf("LFRM")>-1?a+='VitalRecordReviewCycle="'+this.reviewPeriod+'"}':a+='{LFRM:VitalRecordReviewCycle="'+this.reviewPeriod+'"}'),a.length>2&&","==a[a.length-2]&&(a=a.substring(0,a.length-2),a+="}"),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"vital-records-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class = "panelHeader" lfLocalize="STR_VITAL_RECORDS"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'VitalRecords\')"><img class="x-icon" src="images/x.svg"></button> <br>\n            \n            <input type="radio" [(ngModel)]="vital" value="N" id="vitalN" /> <label lfLocalize="STR_FIND_NON_VITAL" for="vitalN"></label> <br>\n            <input type="radio" [(ngModel)]="vital" value="Y" id="vitalY" /> <label lfLocalize="STR_FIND_VITAL" for="vitalY"></label> <br>\n            <input type="checkbox" [disabled]="vital==\'N\'" [(ngModel)]="searchReviewDate" id="searchReviewDate" /> <label lfLocalize="STR_SEARCH_BY_REVIEW_DATE" for="searchReviewDate"></label> <br><br>\n           \n            <label class="vitalRecords block" lfLocalize="STR_FIND_RECORDS_THAT"></label>\n            <select class="vitalRecordsSelect" [disabled]="!searchReviewDate" [(ngModel)]="reviewDate" lfLocalizeAriaLabelAndTitle="STR_FIND_RECORDS_THAT">\n                <option value="LastReviewDate" lfLocalize="STR_HAVE_BEEN"></option>\n                <option value="NextReviewDate" lfLocalize="STR_NEED_TO_BE"></option>\n            </select>   \n\n            <label class="vitalRecords block" lfLocalize="STR_REVIEWED_BETWEEN"></label>\n               <p-calendar class="vitalRecords" [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [disabled]="!searchReviewDate" [ngModel]="reviewDateInput1" dateFormat="mm/dd/yy" (ngModelChange)="getDateFormat($event, \'input1\')" ></p-calendar> \n\n            <label class="vitalRecords block" lfLocalize="STR_AND"></label>\n                <p-calendar class="vitalRecords" [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [disabled]="!searchReviewDate" [ngModel]="reviewDateInput2" dateFormat="mm/dd/yy" (ngModelChange)="getDateFormat($event, \'input2\')" ></p-calendar> \n                  \n            <br>\n            <input [disabled]="vital==\'N\'" type="checkbox" [(ngModel)]="searchReviewPeriod" id="searchReviewPeriod" /> <label lfLocalize="STR_SEARCH_BY_REVIEW_PERIOD" for="searchReviewPeriod"></label>\n            <label style="padding-bottom: 5px" class="vitalRecords block" lfLocalize="STR_PERIOD"></label>\n            <select class="vitalRecordsSelect" [disabled]="!searchReviewPeriod" [(ngModel)]="reviewPeriod" lfLocalizeAriaLabelAndTitle="STR_PERIOD">\n                <option *ngFor="let cycle of cycleDescriptions; let i= index" [value]="cycleCodes[i]">{{cycle}}</option>     \n            </select>\n        </div>\n',styleUrls:["./app/search/search-component.css"]}),H("design:paramtypes",[d.SearchService,g.ContextService])],a)}(),a("VitalRecordsPane",r),s=function(){function a(a,b,d){this.searchservice=a,this.localizationService=b,this.contextService=d,this.fieldNames=[],this.fieldDisplayNames=[],this.fieldListValues={},this.selectedVals=[],this.userInputs=[],this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter,this.strFrom=[],this.strTo=[],this.str=[]}return a.prototype.ngOnInit=function(){this.getInfo(),this.selectedField=this.localizationService.getString("STR_CHOOSE_FIELD")},a.prototype.onChange=function(a){var b=this,c=a.indexOf(":");a=a.substring(c+2,a.length);var d=this.fieldNames[a],e=this.fieldTypes[a];this.selectedField=d,this.selectedVals.push({name:d,type:e,displayName:this.fieldDisplayNames[a],id:this.fieldIDs[a]}),76==e&&(this.loading=!0,this.searchservice.getFieldListValues(this.contextService.getRepoName(),this.fieldIDs[a]).subscribe(function(c){b.fieldListValues[b.fieldIDs[a]]=c,b.loading=!1}))},a.prototype.getStrChange=function(a,b){this.userInputs[b]=new t,this.userInputs[b].str=a},a.prototype.getYearRange=function(){var a=(new Date).getFullYear();return a-100+":"+(a+100)},a.prototype.getDateFormat=function(a,b,c){this.userInputs[b]||(this.userInputs[b]=new t),a||("from"==c&&(this.userInputs[b].from=""),"to"==c&&(this.userInputs[b].to=""));try{var d=a.getMonth()+1;"from"==c&&(this.userInputs[b].from=d+"/"+a.getDate()+"/"+a.getFullYear()),"to"==c&&(this.userInputs[b].to=d+"/"+a.getDate()+"/"+a.getFullYear())}catch(a){console.log("error with getting date")}},a.prototype.resetSearch=function(){this.selectedField=this.localizationService.getString("STR_CHOOSE_FIELD"),this.selectedVals=[],this.userInputs=[]},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}this.fieldInfo&&(this.fieldInfo=this.fieldInfo),this.fieldNames&&(this.fieldNames=this.fieldNames)},a.prototype.getInfo=function(){var a=this;this.loading=!0,this.searchservice.getFieldData(this.contextService.getRepoName()).subscribe(function(b){b&&(a.fieldInfo=b,a.fieldNames=a.fieldNames.concat(a.fieldInfo.fieldData),a.fieldDisplayNames=a.fieldDisplayNames.concat(a.fieldInfo.fieldDisplayNames),a.fieldTypes=a.fieldInfo.fTypes,a.loading=!1,a.fieldIDs=a.fieldInfo.fieldIDs)})},a.prototype.genSearchSyntax=function(){for(var a="",b=0,c=0,d=this.selectedVals;c<d.length;c++){var e=d[c];this.userInputs[b]&&(a+="{[]:",68==e.type||65==e.type?this.userInputs[b].from&&this.userInputs[b].to?a+="["+e.name+'] >= "'+this.userInputs[b].from+'", <= "'+this.userInputs[b].to+'" ':this.userInputs[b].from?a+="["+e.name+'] >= "'+this.userInputs[b].from+'" ':this.userInputs[b].to?a+="["+e.name+'] <= "'+this.userInputs[b].to+'" ':a+="":a+="["+e.name+'] = "'+this.userInputs[b].str+'"',a+="} &"),console.log(a),b+=1}return a=a.substring(0,a.length-2)},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Input(),H("design:type",e.FieldData)],a.prototype,"fieldInfo",void 0),G([c.Input(),H("design:type",Array)],a.prototype,"fieldNames",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"field-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_FIELD"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'Field\')"><img class="x-icon" src="images/x.svg"></button>\n                 \n            <label class="block" lfLocalize="STR_FIELD_NAME"></label>\n                \n            <div class="loading-icon" *ngIf="loading" >\n                <table style="height: 100%; width:100%; margin:0; padding:0; border:0">\n                    <tr><td style="text-align:center; vertical-align: middle"><i class="icon-spinner icon-spin"></i></td></tr>\n                </table>\n            </div>\n\n            <select style="width:100%" (change)="onChange($event.target.value)" [ngModel]="selectedField">\n                <option [disabled]=true lfLocalize="STR_CHOOSE_FIELD"></option>\n                <option *ngFor="let f of fieldNames; let i = index" [ngValue]="i">{{fieldDisplayNames[i]}}</option>\n            </select>\n\n            <div *ngFor="let button of buttons">\n                <input type="radio" required [(ngModel)]="model.selected" value="{{button.value}}" name="{{button.name}}" id="{{button.name}}"> <label for="{{button.name}}">{{button.text}}</label>\n            </div>\n                \n            <div *ngFor="let val of selectedVals; let i = index">\n                <label class="block">{{val.displayName}}</label>\n                <span *ngIf="val.type == 76"> \x3c!-- List Field--\x3e\n                        \x3c!-- <select  [ngModel] = "str[i]" (ngModelChange)="getStrChange($event, i)" >\n                        <option  *ngFor = "let item of val.list" [value]="item" name = "item" >{{item}}</option>\n                        </select> --\x3e\n                        <select  [ngModel] = "str[i]" (ngModelChange)="getStrChange($event, i)" >\n                        <option  *ngFor = "let item of fieldListValues[val.id]" [value]="item" name = "item" >{{item}}</option>\n                        </select> \n                    </span>\n                <span *ngIf="val.type == 65"> \x3c!-- DateTime Field --\x3e\n                    <table>\n                        <tr><td style="padding-right:15px;"> <span lfLocalize="STR_FROM"></span> </td> <td><p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="strFrom[i]" (ngModelChange)="getDateFormat($event, i,\'from\')"  dateFormat="mm/dd/yy" ></p-calendar> </td></tr>\n                        <tr><td style="padding-right:15px;"> <span lfLocalize="STR_TO"></span></td>   <td>  <p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="strTo[i]" (ngModelChange)="getDateFormat($event, i, \'to\')"  dateFormat="mm/dd/yy" ></p-calendar> </td></tr>\n                        </table>\n                </span>\n                <span *ngIf="val.type == 68"> \x3c!-- DateField Field --\x3e\n                    <table>\n                        <tr><td style="padding-right:15px;"> <span lfLocalize="STR_FROM"></span> </td> <td><p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="strFrom[i]" (ngModelChange)="getDateFormat($event, i, \'from\')" ></p-calendar> </td></tr>\n                        <tr><td style="padding-right:15px;"> <span lfLocalize="STR_TO"></span></td>   <td>  <p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="strTo[i]" (ngModelChange)="getDateFormat($event, i, \'to\')"  ></p-calendar> </td></tr>\n                    </table>\n                </span>\n                <span *ngIf="val.type != 65 && val.type != 76 && val.type != 68">\n                    <input [ngModel] = "str[i]" (ngModelChange)="getStrChange($event, i)" type="text">\n                </span>\n\n                \x3c!--  <input  type = "text" [(ngModel)] = "userInputs[i]" >  --\x3e\n            </div>\n\n            <button style="margin-top:15px" class="btn btn-neutral" (click)="resetSearch()" type="submit"><span lfLocalize="STR_RESET"></span></button>\n        </div>\n',styleUrls:["./app/search/search-component.css"],providers:[d.SearchService]}),H("design:paramtypes",[d.SearchService,f.LocalizationService,g.ContextService])],a)}(),a("FieldPaneComponent",s),t=function(){function a(){}return a}(),u=function(){function a(a,b,d){this.searchservice=a,this.contextService=b,this.localizationService=d,this.templateNames=[],this.templateDisplayNames=[],this.fieldNames=[],this.userFieldInput=[],this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter,this.strFrom=[],this.strTo=[],this.str=[]}return a.prototype.ngOnInit=function(){this.getTemplateNames(),this.getSearchSettings()},a.prototype.getYearRange=function(){var a=(new Date).getFullYear();return a-100+":"+(a+100)},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.getDateFormat=function(a,b,c){this.userFieldInput[b]||(this.userFieldInput[b]=new t),a||("from"==c&&(this.userFieldInput[b].from=""),"to"==c&&(this.userFieldInput[b].to=""));try{var d=a.getMonth()+1;"from"==c&&(this.userFieldInput[b].from=d+"/"+a.getDate()+"/"+a.getFullYear()),"to"==c&&(this.userFieldInput[b].to=d+"/"+a.getDate()+"/"+a.getFullYear())}catch(a){console.log("error with getting date")}},a.prototype.getStrChange=function(a,b){this.userFieldInput[b]=new t,this.userFieldInput[b].str=a;for(var c=0,d=this.fieldInfo.childrenArray[b];c<d.length;c++){var e,f=d[c];for(var g in this.fieldInfo.fieldIDs)f==this.fieldInfo.fieldIDs[g]&&(e=g);e&&this.getDynamicFieldValues(f,e)}},a.prototype.getSearchSettings=function(){var a=this;this.searchservice.getTemplateMinFieldSetting(this.contextService.getRepoName()).subscribe(function(b){b&&(a.minTemplateFields=b)})},a.prototype.getTemplateNames=function(){var a=this;this.loading=!0,this.searchservice.getTemplateData(this.contextService.getRepoName()).subscribe(function(b){b&&(a.templateInfo=b,a.templateNames=a.templateNames.concat(a.templateInfo.templateData),a.templateDisplayNames=a.templateDisplayNames.concat(a.templateInfo.templateDisplayNames),a.loading=!1)})},a.prototype.getDynamicFieldValues=function(a,b){var c=this,d=[];for(var e in this.fieldNames)this.userFieldInput[e]&&this.userFieldInput[e].str?d.push(this.userFieldInput[e].str):d.push(null);this.searchservice.getFieldDynamicValues(this.selectedTemplate,a,this.contextService.getRepoName(),d).subscribe(function(a){a&&(c.listFieldArray[b]=a)})},a.prototype.getDataListId=function(a){return"FieldInput_"+a},a.prototype.getFields=function(a){var b=this;this.loading=!0,this.searchservice.getFieldsForTemplate(this.contextService.getRepoName(),a).subscribe(function(a){a&&(b.fieldInfo=a,b.fieldNames=b.fieldInfo.fieldData,b.fieldDisplayNames=b.fieldInfo.fieldDisplayNames,b.fieldTypes=b.fieldInfo.fTypes,b.listFieldArray=b.fieldInfo.listFieldArray,b.loading=!1)}),this.userFieldInput=[]},a.prototype.genSearchSyntax=function(){var a="";if(this.selectedTemplate){if(this.selectedTemplate==this.localizationService.getString("STR_NO_TEMPLATE_ASSIGNED"))return a="{LF:templateid=0}";a+="{["+this.selectedTemplate+"]:";for(var b=0,c=0,d=0,e=this.fieldNames;d<e.length;d++){var f=e[d];this.userFieldInput[b]&&(c+=1,68==this.fieldTypes[b]||65==this.fieldTypes[b]?this.userFieldInput[b].from&&this.userFieldInput[b].to?a+="["+f+'] >= "'+this.userFieldInput[b].from+'", ['+f+'] <= "'+this.userFieldInput[b].to+'" ,':this.userFieldInput[b].from?a+="["+f+'] >= "'+this.userFieldInput[b].from+'", ':this.userFieldInput[b].to?a+="["+f+'] <= "'+this.userFieldInput[b].to+'", ':a+="":a+="["+f+'] = "'+this.userFieldInput[b].str+'", '),b+=1}if(this.minTemplateFields){if(0==c&&0==this.fieldNames.length){var g=this.templateInfo.templateData.indexOf(this.selectedTemplate);a="{LF:templateid="+this.templateInfo.templateIds[g]+"}"}if(!(c>=this.minTemplateFields))return alert("you must specify a search value for at least "+this.minTemplateFields+" fields to run this search"),"";a=a.substring(0,a.length-2),a+="}"}else if(c>0)a=a.substring(0,a.length-2),a+="}";else{var g=this.templateInfo.templateData.indexOf(this.selectedTemplate);a="{LF:templateid="+this.templateInfo.templateIds[g]+"}"}}return a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"template-pane",template:'\n\n\n        <div class="search-grid-loading-icon" *ngIf="loading" >\n            <table style="height: 100%; width:100%; margin:0; padding:0; border:0">\n                <tr><td style="text-align:center; vertical-align: middle"><i class="icon-spinner icon-spin"></i></td></tr>\n            </table>\n        </div>\n\n        <div class="panel" tabindex="0" *ngIf="!loading">\n            <div class="panelHeader" lfLocalize="STR_TEMPLATE"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'Template\')"><img class="x-icon" src="images/x.svg"></button>\n\n            <label class="block" lfLocalize="STR_TEMPLATE"></label>\n\n            <select class="dropdown" [(ngModel)] = "selectedTemplate" (change)="getFields($event.target.value)">\n                <option lfLocalize="STR_NO_TEMPLATE_ASSIGNED"></option>\n                <option *ngFor="let t of templateNames; let i = index" [value]="t" name = "t" >{{templateDisplayNames[i]}}</option>\n                </select>\n            <div *ngFor="let field of fieldNames; let i = index">\n                <label class="block">{{fieldDisplayNames[i]}}</label>\n                <span *ngIf="fieldTypes[i] == 76"> \x3c!-- List Field--\x3e\n                    <select [ngModel]="str[i]" (ngModelChange)="getStrChange($event, i)" >\n                        <option *ngFor="let item of listFieldArray[i]" [value]="item" name = "item" >{{item}}</option>\n                    </select>\n                </span>\n                <span *ngIf="fieldTypes[i] == 83 && listFieldArray[i]?.length > 0"> \x3c!-- Dynamic Field--\x3e\n\n                    <input [attr.list]="getDataListId(i)" [ngModel]="str[i]"  (ngModelChange)="getStrChange($event, i)" >\n                    <datalist [id]="getDataListId(i)" data-size="">\n                        <option *ngFor="let item of listFieldArray[i]" [value]="item" name = "item" >{{item}}</option>\n                    </datalist>\n                   \n                </span>\n\n                <span *ngIf="fieldTypes[i] == 65"> \x3c!-- DateTime Field --\x3e\n                    <table>\n                        <tr><td style="padding-right:15px;"> <span lfLocalize="STR_FROM"></span></td> <td><p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="strFrom[i]" (ngModelChange)="getDateFormat($event, i,\'from\')"  dateFormat="mm/dd/yy" ></p-calendar> </td></tr>\n                        <tr><td style="padding-right:15px;"> <span lfLocalize="STR_TO"></span></td> <td><p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="strTo[i]" (ngModelChange)="getDateFormat($event, i, \'to\')"  dateFormat="mm/dd/yy" ></p-calendar> </td></tr>\n                    </table>\n                </span>\n                <span *ngIf="fieldTypes[i] == 68"> \x3c!-- DateField Field --\x3e\n                    <table>\n                        <tr><td style="padding-right:15px;"> <span lfLocalize="STR_FROM"></span></td> <td><p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="strFrom[i]" (ngModelChange)="getDateFormat($event, i, \'from\')" ></p-calendar> </td></tr>\n                        <tr><td style="padding-right:15px;"> <span lfLocalize="STR_TO"></span></td> <td><p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="strTo[i]" (ngModelChange)="getDateFormat($event, i, \'to\')"  ></p-calendar> </td></tr>\n                    </table>\n                </span>\n                <span *ngIf="fieldTypes[i] != 65 && fieldTypes[i] != 76 && fieldTypes[i]!= 68 && listFieldArray[i]?.length == 0">\n                    <input [ngModel]="str[i]" (ngModelChange)="getStrChange($event, i)" type="text">\n                </span>\n            </div>\n            \x3c!-- <input type="button" value="Search" (click) = "genSearchSyntax($event)"> --\x3e                \n        </div>\n',styleUrls:["./app/search/search-component.css"],providers:[d.SearchService]}),H("design:paramtypes",[d.SearchService,g.ContextService,f.LocalizationService])],a)}(),a("TemplatePaneComponent",u),v=function(){function a(){this.folderName="",this.searchSubFolders=!1,this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){},a.prototype.getInfo=function(){},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.genSearchSyntax=function(){var a="";return this.folderName&&this.folderName.length>0&&(a+='{LF:Lookin="'+this.folderName+'", Subfolders=',this.searchSubFolders?a+="Y}":a+="N}"),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"withinfolder-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_WITHIN_FOLDER"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'WithinFolder\')"><img class="x-icon" src="images/x.svg"></button>\n\n            <label class="block" lfLocalize="STR_LIMIT_SEARCH_FOLDER" for="folderName"></label>\n            <input type="text" required [(ngModel)]="folderName" name="folderName" id="folderName"> <br/>\n            <input type="checkbox" [(ngModel)]="searchSubFolders" id="searchSubFolders"><label lfLocalize="STR_SEARCH_SUBFOLDERS" for="searchSubFolders"></label> <br>\n        </div>\n',styleUrls:["./app/search/search-component.css"]})],a)}(),a("WithinFolderPaneComponent",v),w=function(){function a(){this.stickyText="",this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter,this.searchTerm=new c.EventEmitter}return a.prototype.ngOnInit=function(){},a.prototype.getInfo=function(){},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.genSearchSyntax=function(){var a="";return this.stickyText.length>0&&(this.searchTerm.emit(this.stickyText),a='{LF:Sticky~="'+this.stickyText.replace('"',"'")+'"}'),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchTerm",void 0),a=G([c.Component({selector:"stickyNote-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_STICKY_NOTE"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'StickyNote\')"><img class="x-icon" src="images/x.svg"></button>\n             \n            <label class="block" lfLocalize="STR_ENTER_STICKY_TEXT" for="stickyText"></label>\n            <input type="text" required [(ngModel)]="stickyText" name="stickyText" id="stickyText"> <br/>\n        </div>\n',styleUrls:["./app/search/search-component.css"]})],a)}(),a("StickyNotePaneComponent",w),x=function(){function a(a,b){this.searchservice=a,this.contextService=b,this.checkedVolumes=[],this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){this.getInfo()},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.getInfo=function(){var a=this;this.searchservice.getVolumeData(this.contextService.getRepoName()).subscribe(function(b){b&&(a.volumes=b.volumeData)})},a.prototype.genSearchSyntax=function(){for(var a=!1,b="",c=0;c<this.volumes.length;c++)this.checkedVolumes[c]&&(a=!0,b+='{LF:VolName="'+this.volumes[c]+'"} | ');return a&&(b=b.substring(0,b.length-2)),b},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"withinVolume-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_WITHIN_VOLUME"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'WithinVolume\')"><img class="x-icon" src="images/x.svg"></button>\n\n                <div lfLocalize="STR_SELECT_VOLUMES" ></div>\n                <div class="blockList">\n                <div class="searchBlockCheckOption" *ngFor = "let v of volumes; let i = index">\n                    <input type="checkbox" [(ngModel)]="checkedVolumes[i]" id="vol{{i}}"> <label for="vol{{i}}">{{v}}</label>\n                    </div>\n                </div>\n        </div>\n',styleUrls:["./app/search/search-component.css"],providers:[d.SearchService]}),H("design:paramtypes",[d.SearchService,g.ContextService])],a)}(),a("WithinVolumePaneComponent",x),y=function(){function a(){this.fromDate="",this.toDate="",this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.getYearRange=function(){var a=(new Date).getFullYear();return a-100+":"+(a+100)},a.prototype.getDateFormat=function(a,b){a||("from"==b&&(this.fromDate=""),"to"==b&&(this.toDate=""));try{var c=a.getMonth()+1;"from"==b&&(this.fromDate=c+"/"+a.getDate()+"/"+a.getFullYear()),"to"==b&&(this.toDate=c+"/"+a.getDate()+"/"+a.getFullYear())}catch(a){console.log("error formatting date")}},a.prototype.genSearchSyntax=function(){var a="";return(this.fromDate.length>0||this.toDate.length>0)&&(this.fromDate.length>0?(a='{LF:Created>="'+this.fromDate+'"',this.toDate.length>0?(a+=",",a+='Created <="'+this.toDate+'"}'):a+="}"):this.toDate.length>0&&(a+='{LF:Created <="'+this.toDate+'"}')),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"creationdate-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_COLUMN_TYPE_CREATEDATE"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'CreationDate\')"><img class="x-icon" src="images/x.svg"></button>\n            \n            <label class="block" lfLocalize="STR_FIND_CREATE_BETWEEN"></label>\n                <table>\n                    <tr><td style="padding-right:15px;"> <span lfLocalize="STR_FROM"></span> </td> <td><p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="fromDate" dateFormat="mm/dd/yy" (ngModelChange)="getDateFormat($event, \'from\')" ></p-calendar> </td></tr>\n                    <tr><td style="padding-right:15px;"> <span lfLocalize="STR_TO"></span></td>   <td>  <p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="toDate"  dateFormat="mm/dd/yy" (ngModelChange)="getDateFormat($event,\'to\')" ></p-calendar> </td></tr>\n                </table>\n\n            \x3c!-- <input type="button" value="Search" (click)="genSearchSyntax($event)"> --\x3e\n        </div>\n',styleUrls:["./app/search/search-component.css"]})],a)}(),a("CreationDatePaneComponent",y),z=function(){function a(){this.fromDate="",this.toDate="",this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){},a.prototype.getInfo=function(){},a.prototype.getYearRange=function(){var a=(new Date).getFullYear();return a-100+":"+(a+100)},a.prototype.getDateFormat=function(a,b){a||("from"==b&&(this.fromDate=""),"to"==b&&(this.toDate=""));try{var c=a.getMonth()+1;"from"==b&&(this.fromDate=c+"/"+a.getDate()+"/"+a.getFullYear()),"to"==b&&(this.toDate=c+"/"+a.getDate()+"/"+a.getFullYear())}catch(a){console.log("error with getting date")}},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.genSearchSyntax=function(){var a="";return(this.fromDate.length>0||this.toDate.length>0)&&(this.fromDate.length>0?(a='{LF:Modified>="'+this.fromDate+'"',this.toDate.length>0?(a+=",",a+='Modified <="'+this.toDate+'"}'):a+="}"):this.toDate.length>0&&(a+='{LF:Modified <="'+this.toDate+'"}')),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"modificationdate-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_MODIFICATION_DATE"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'ModificationDate\')"><img class="x-icon" src="images/x.svg"></button>\n\n            <label class="block" lfLocalize="STR_FIND_MODIFY_BETWEEN"></label>\n                <table>\n                    <tr><td style="padding-right:15px;"> <span lfLocalize="STR_FROM"></span> </td> <td><p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="fromDate" dateFormat="mm/dd/yy" (ngModelChange)="getDateFormat($event, \'from\')" ></p-calendar> </td></tr>\n                    <tr><td style="padding-right:15px;"> <span lfLocalize="STR_TO"></span></td>   <td>  <p-calendar [monthNavigator]="true" [yearNavigator]="true" yearRange={{getYearRange()}} [ngModel]="toDate"  dateFormat="mm/dd/yy" (ngModelChange)="getDateFormat($event,\'to\')" ></p-calendar> </td></tr>\n                </table>\n  \n                 \x3c!-- <input type="button" value="Search" (click) = "genSearchSyntax($event)"> --\x3e\n        </div>\n',styleUrls:["./app/search/search-component.css"]})],a)}(),a("ModificationDatePaneComponent",z),A=function(){function a(a){this.localizationService=a,this.extensions=!1,this.extensionlist="",this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter,this.buttons=[{name:"edocs",value:"findNonElec",text:this.localizationService.getString("STR_FIND_NON_EDOCS")},{name:"edocs",value:"findElec",text:this.localizationService.getString("STR_FIND_EDOCS")}],this.model={selected:"findNonElec"}}return a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.ngOnInit=function(){},a.prototype.getInfo=function(){},a.prototype.genSearchSyntax=function(){var a="";if("findNonElec"==this.model.selected)a="({LF:Name=*,Type=DB} - {LF:Ext=*})";else{for(var b=" | ",c="(",d=!1,e=0,f=this.extensionlist.split(",");e<f.length;e++){c+='{LF:ext="'+f[e]+'"}'+b,d=!0}a=d&&this.extensions?c.substring(0,c.length-b.length)+")":"{LF:Ext=*}"}return a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"electronicdoc-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_ELECTRONIC_DOCUMENTS"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'ElectronicDocument\')"><img class="x-icon" src="images/x.svg"></button>\n            \n            <div *ngFor="let button of buttons">\n                <input type="radio" required  [(ngModel)]="model.selected" value="{{button.value}}" name="{{button.name}}" id="{{button.name}}"> <label for="{{button.name}}">{{button.text}}</label>\n                </div>\n\n            <input type="checkbox" [disabled]="model.selected ==\'findNonElec\'" require [(ngModel)]="extensions" id="extensions"><label lfLocalize="STR_SEARCH_FOR_EXTENSIONS" for="extensions"></label>  <br>\n            <input type="text" [disabled]="!extensions" require [(ngModel)]="extensionlist" >\n        </div>\n',styleUrls:["./app/search/search-component.css"]}),H("design:paramtypes",[f.LocalizationService])],a)}(),a("ElectronicDocumentsPaneComponent",A),B=function(){function a(a){this.localizationService=a,this.buttons=[{name:"pages",value:"doNotContainPages",text:this.localizationService.getString("STR_FIND_NO_PAGES")},{name:"pages",value:"containImages",text:this.localizationService.getString("STR_FIND_HAS_PAGES")},{name:"pages",value:"containTextOn",text:this.localizationService.getString("STR_SEARCH_PAGES_OCRD1")}],this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter,this.options=[{name:"all",text:this.localizationService.getString("STR_ALL")},{name:"some",text:this.localizationService.getString("STR_SOME")},{name:"no",text:this.localizationService.getString("STR_NO")}],this.selectedValue=this.options[0].name,this.model={selected:"doNotContainPages"}}return a.prototype.ngOnInit=function(){},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.getInfo=function(){},a.prototype.genSearchSyntax=function(){var a="{LF:AssociatedPages=";if(a+="doNotContainPages"===this.model.selected?"N":"Y",a+="}","containTextOn"==this.model.selected){var b="";b="no"==this.selectedValue?"none":this.selectedValue,a+=' & {LF:OCR="'+b+'"}'}return a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"hasPages-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_HAS_PAGES"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'HasPages\')"><img class="x-icon" src="images/x.svg"></button>\n            \n            <label class="block" lfLocalize="STR_FIND_DOCUMENTS_THAT"></label>\n            <form action="">\n                <div *ngFor="let button of buttons">\n                    <input type="radio" required [(ngModel)]="model.selected" value="{{button.value}}" name="{{button.name}}" id="{{button.name}}" checked /> <label for="{{button.name}}">{{button.text}}</label> <br>\n                    </div>\n                </form>\n            <select [(ngModel)]="selectedValue">\n                <option *ngFor="let o of options" [ngValue]="o.name">{{o.text}}</option>\n                 </select>\n            <label lfLocalize="STR_SEARCH_PAGES_OCRD2"></label>\n                <br>\n        </div>\n',styleUrls:["./app/search/search-component.css"]}),H("design:paramtypes",[f.LocalizationService])],a)}(),a("HasPagesPaneComponent",B),C=function(){function a(a,b){this.searchservice=a,this.contextService=b,this.connector="And",this.linksChecked=[],this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){this.getInfo()},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.getInfo=function(){var a=this;this.searchservice.getRelationshipInfo(this.contextService.getRepoName()).subscribe(function(b){b&&(a.relationshipData=b,a.linkNames=b.names)})},a.prototype.genSearchSyntax=function(){for(var a="",b=0;b<this.linkNames.length;b++)this.linksChecked[b]&&(a+="{LF:"+this.relationshipData.values[b]+"}","And"==this.connector?a+=" & ":a+=" | ");return"&"!=a[a.length-2]&&"|"!=a[a.length-2]||(a=a.substring(0,a.length-2)),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"relationship-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class = "panelHeader" lfLocalize="STR_RELATIONSHIP"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'Relationship\')"><img class="x-icon" src="images/x.svg"></button>\n            \n                <div lfLocalize="STR_FIND_DOCUMENTS_RELATIONSHIPS"></div>\n                <div class="blockList">\n                    <div class="searchBlockCheckOption" *ngFor = "let link of linkNames; let i = index">\n                    <input type="checkbox" [(ngModel)]="linksChecked[i]" id="link{{i}}"> <label for="link{{i}}">{{link}}</label>\n                    </div>\n                </div>\n                <span lfLocalize="STR_COMBINE_MULTIPLE"></span><br>\n            <input type="radio" [(ngModel)]="connector" value="And" id="relConnectorAnd"> <label lfLocalize="STR_AND" for="relConnectorAnd"></label>\n            <input type="radio" [(ngModel)]="connector" value="Or" id="relConnectorOr"> <label lfLocalize="STR_OR" for="relConnectorOr"></label>\n        </div>\n',styleUrls:["./app/search/search-component.css"],providers:[d.SearchService]}),H("design:paramtypes",[d.SearchService,g.ContextService])],a)}(),a("RelationshipPaneComponent",C),D=function(){function a(a,b){this.searchservice=a,this.contextService=b,this.tagsChecked=[],this.connector="And",this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter}return a.prototype.ngOnInit=function(){this.getInfo()},a.prototype.getInfo=function(){var a=this;this.searchservice.getAllTags(this.contextService.getRepoName()).subscribe(function(b){b&&(a.tagInfo=b.tagData,a.tagDisplayNames=b.tagDisplayNames)})},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.genSearchSyntax=function(){for(var a="",b=0;b<this.tagInfo.length;b++)this.tagsChecked[b]&&(a+='{LF:Tags="'+this.tagInfo[b]+'"}',"And"==this.connector?a+=" & ":a+=" | ");return"&"!=a[a.length-2]&&"|"!=a[a.length-2]||(a=a.substring(0,a.length-2)),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"tags-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_TAGS"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'Tags\')"><img class="x-icon" src="images/x.svg"></button>\n           \n            <label class="block" lfLocalize="STR_FIND_DOCUMENTS_TAGS"></label>\n                 <div class="blockList">\n                <div class="searchBlockCheckOption" *ngFor="let tag of tagDisplayNames; let i = index">\n                    <input type="checkbox" [(ngModel)]="tagsChecked[i]" id="tag{{i}}"> <label for="tag{{i}}">{{tag}}</label>\n                    </div>\n                </div>\n\n            <label class="block" lfLocalize="STR_COMBINE_MULTIPLE"></label>\n            <input type="radio" [(ngModel)]="connector" value="And" id="tagConnectorAnd"> <label lfLocalize="STR_AND" for="tagConnectorAnd"></label>\n            <input type="radio" [(ngModel)]="connector" value="Or" id="tagConnectorOr"> <label lfLocalize="STR_OR" for="tagConnectorOr"></label>\n        </div>\n',styleUrls:["./app/search/search-component.css"],providers:[d.SearchService]}),H("design:paramtypes",[d.SearchService,g.ContextService])],a)}(),a("TagsPaneComponent",D),E=function(){function a(a,b){this.searchservice=a,this.contextService=b,this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter,this.searchTerm=new c.EventEmitter,this.searchString="",this.searchOptions=""}return a.prototype.ngOnInit=function(){var a=this;this.searchservice.getGeneralSearchOptions(this.contextService.getRepoName()).subscribe(function(b){b&&(a.searchOptions=b)})},a.prototype.ngOnChanges=function(a){if(this.formSubmit)if(this.searchTerms){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}else this.searchStringEmit.emit("");this.resetEvent&&(this.searchTerms="")},a.prototype.genSearchSyntax=function(){var a="";return this.searchOptions.length>0&&(this.searchTerm.emit(this.searchTerms),a+='{LF:Basic ~= "'+this.searchTerms+'", option="'+this.searchOptions+'LT"}'),a},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"resetEvent",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchTerm",void 0),a=G([c.Component({selector:"general-search-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_WEBLINK_SEARCH"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'GeneralSearch\')"><img class="x-icon" src="images/x.svg"></button>\n            \n            <label class="block" lfLocalize="STR_ENTER_SEARCH" for="searchTerms">Search terms</label>\n            <input type="text" required [(ngModel)]="searchTerms" name="searchTerms" id="searchTerms"> <br/>\n        </div>\n',styleUrls:["./app/search/search-component.css"]}),H("design:paramtypes",[d.SearchService,g.ContextService])],a)}(),a("GeneralSearchComponent",E),F=function(){function a(){this.removeEvent=new c.EventEmitter,this.searchStringEmit=new c.EventEmitter,this.advancedSearchSyntax=""}return a.prototype.ngOnInit=function(){},a.prototype.getInfo=function(){},a.prototype.ngOnChanges=function(a){if(this.formSubmit){var b=this.genSearchSyntax();this.searchStringEmit.emit(b)}},a.prototype.genSearchSyntax=function(){return this.advancedSearchSyntax},a.prototype.removeFromArray=function(a){this.removeEvent.emit(a)},G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"removeEvent",void 0),G([c.Input(),H("design:type",Boolean)],a.prototype,"formSubmit",void 0),G([c.Output(),H("design:type",c.EventEmitter)],a.prototype,"searchStringEmit",void 0),a=G([c.Component({selector:"advanced-search-pane",template:'\n        <div class="panel" tabindex="0">\n            <div class="panelHeader" lfLocalize="STR_ADVANCED_SEARCH"></div>\n            <button type="button" class="btn btn-neutral x-icon-container" lfLocalizeAriaLabelAndTitle="STR_REMOVE" (click)="removeFromArray(\'AdvancedSearch\')"><img class="x-icon" src="images/x.svg"></button>\n\n            <label class="block" lfLocalize="STR_ENTER_THE_PHRASE" for="advancedSearchSyntax"></label>\n            <textarea [(ngModel)]="advancedSearchSyntax" style="width: 100%" id="advancedSearchSyntax"></textarea>\n        </div>\n',styleUrls:["./app/search/search-component.css"]})],a)}(),a("AdvancedSearchComponent",F)}}}),System.register("dist/app/search/app.module.js",["@angular/core","@angular/platform-browser","@angular/http","@angular/forms","@ng-bootstrap/ng-bootstrap","./../angular-http-proxy.js","./search.component.js","primeng/components/contextmenu/contextmenu.js","primeng/components/calendar/calendar.js","ng2-split-pane/lib/ng2-split-pane","./../search-bar.component.js","./../folder-listing.service.js","./../util.js","./../localization.directive.js","./../localization.service.js","./../shared.service.js","./../customization.service.js","ngx-dropdown","./../search.service.js","@angular/platform-browser/animations","./search-results.component.js","./search-pane.component.js"],function(a,b){"use strict";function c(a,b){return new i.HttpProxy(a,b)}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=this&&this.__decorate||function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g};b&&b.id;return a("httpFactory",c),{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a},function(a){j=a},function(a){k=a},function(a){l=a},function(a){m=a},function(a){n=a},function(a){o=a},function(a){p=a},function(a){q=a},function(a){r=a},function(a){s=a},function(a){t=a},function(a){u=a},function(a){v=a},function(a){w=a},function(a){x=a},function(a){y=a}],execute:function(){z=function(){function a(){}return a=A([d.NgModule({imports:[e.BrowserModule,f.HttpModule,g.FormsModule,l.CalendarModule,m.SplitPaneModule,k.ContextMenuModule,h.NgbModule.forRoot(),u.DropdownModule,w.BrowserAnimationsModule],exports:[j.SearchComponent],declarations:[j.SearchComponent,y.TextPaneComponent,y.NamePaneComponent,y.FrozenPaneComponent,y.SeriesPaneComponent,y.FieldPaneComponent,y.TemplatePaneComponent,y.WithinFolderPaneComponent,y.StickyNotePaneComponent,y.WithinVolumePaneComponent,y.CreationDatePaneComponent,y.ModificationDatePaneComponent,y.ElectronicDocumentsPaneComponent,y.HasPagesPaneComponent,y.RelationshipPaneComponent,y.TagsPaneComponent,y.GeneralSearchComponent,y.AdvancedSearchComponent,y.CutoffPaneComponent,y.CutoffInstructionPaneComponent,y.DispositionEligibilityComponent,y.CurrentLocationComponent,y.DispositionAuthorityComponent,y.PermanentRecordsComponent,n.SearchBarComponent,q.LocalizationDirective,y.VitalRecordsPane,p.ToggleDropdownDirective,p.SanitizeHtml,x.SearchResultComponent,j.RemovableSearchPanes],providers:[{provide:i.HttpProxy,useFactory:c,deps:[f.XHRBackend,f.RequestOptions]},o.FolderListingService,p.ContextService,r.LocalizationService,s.SharedService,t.CustomizationService,v.SearchService],bootstrap:[j.SearchComponent],entryComponents:[]})],a)}(),a("SearchModule",z)}}}),System.register("dist/app/search/search-main.js",["@angular/platform-browser-dynamic","@angular/core","./app.module.js"],function(a,b){"use strict";var c,d,e;b&&b.id;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){d.enableProdMode(),c.platformBrowserDynamic().bootstrapModule(e.SearchModule)}}});