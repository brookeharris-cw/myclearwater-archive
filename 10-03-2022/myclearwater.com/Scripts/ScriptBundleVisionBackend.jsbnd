function viewfullsite(){var t=document.getElementById("view-full").className,n;url=window.location.origin+visionOptions.virtualApplicationPath+"/Shared/ViewFullSite";n=t=="mobile_only fullsite"?"no":"yes";$.frontendAjax({url:url,type:"POST",data:{value:n},success:function(t){t&&t.success&&($("head meta[name=viewport]").attr("content",n=="no"?"width=980":"width=device-width"),n=="yes"?$("#view-full").addClass("mobile_only fullsite").text("View Full Site"):$("#view-full").removeClass("mobile_only fullsite").text("View Mobile Optimized"))}})}function RedirectAfterDropDownListSelectedChanged(n){var t=$(n[n.selectedIndex]).attr("data-url");t=$("<div><\/div>").html(t).text();window.location.href=t}function Pager(n){this.totalCount=n.totalCount;this.pageSize=n.pageSize;this.pagerName=n.pagerName;this.currentPage=n.currentPage;this.pagerContainer=n.pagerContainer;this.pages=0;this.inited=!1;Pager.Manager._allPagers.push(this);this.showRecords=n.showRecordsHtml;this.showPage=function(n){this.moveToCurrentPage(n);this.showRecords(n);this.showPageNav()};this.moveToCurrentPage=function(n){if(!this.inited){alert(Vision.Resources.UI_Common_Paging_NotInitializedError);return}var t=$("#"+this.pagerName+"pg"+this.currentPage).attr("class","pg-normal");this.currentPage=n;$("#"+this.pagerName+"pg"+this.currentPage).attr("class","pg-selected")};this.prev=function(){this.currentPage>1&&this.showPage(this.currentPage-1)};this.next=function(){this.currentPage<this.pages&&this.showPage(this.currentPage+1)};this.init=function(){var n=this.totalCount;this.pages=Math.ceil(n/this.pageSize);this.inited=!0;this.showPageNav()};this.showPageNav=function(){var i,t,n,r;if(!this.inited){alert(Vision.Resources.UI_Common_Paging_NotInitializedError);return}if(this.pages>0){for(i=$(this.pagerContainer),t="<a "+(this.currentPage>1?"onclick=\"Pager.Manager.getPager('"+this.pagerName+"').prev();\"":"")+' class="'+(this.currentPage>1?"pg-normal":"disabled")+' pg-button">'+Vision.Resources.UI_Common_Paging_PrevButtonText+"<\/a> | ",n=1;n<=this.pages;n++)r=n==this.currentPage?"":"Pager.Manager.getPager('"+this.pagerName+"').showPage("+n+");",t+='<a id="'+this.pagerName+"pg"+n+'" class="pg-normal" onclick="'+r+'">'+n+"<\/a> | ";t+="<a "+(this.currentPage<this.pages?"onclick=\"Pager.Manager.getPager('"+this.pagerName+"').next();\"":"")+' class="'+(this.currentPage<this.pages?"pg-normal":"disabled")+' pg-button"> '+Vision.Resources.UI_Common_Paging_NextButtonText+"<\/a>";i.html(t);this.moveToCurrentPage(this.currentPage)}}}function visionViewState(n){this._conatiner=$(n.conatiner);this._data=JSON.parse($(n.conatiner).val());this.data=function(n,t){if(t==null)return this._data[n];this._data[n]=t;$(this._conatiner).val(JSON.stringify(this._data))}}function onEditorClientPasteHtml(n,t){var r=t.get_commandName(),i,u,f;r=="LinkManager"?(i=t.get_value(),i=i.replace("class=ApplyClass",""),i=i.replace('class="ApplyClass"',""),t.set_value(i)):"InsertTable"==r||"TableWizard"==r?(u=t.get_value(),u=u.replace("<table>",'<table style="width:100%;">'),t.set_value(u)):"ImageManager"==r&&(f=t.get_value(),f=f.replace('style=""','style="margin:15px;"'),t.set_value(f))}function onEditorClientCommandExecuting(n,t){var i=t.get_name(),r,u,f,e;i=="InsertCustomLink"?n.get_html()=="<P>&nbsp;<\/P>"&&n.set_html(""):i=="Help"?(r=$.vision().buildPath("Admin/Components/Shared/ShowOnlineReference?appRelativeUrl=~%2FEditorTool"),u={title:"",url:r,useFrame:!1,onClosed:function(){return}},$.viClientDialog(u).open(),t.set_cancel(!0)):i=="WCAG"?(r=$.vision().buildPath("Admin/Components/Shared/ShowOnlineReference?appRelativeUrl=~%2FWCAG"),u={title:"",url:r,useFrame:!1,onClosed:function(){return}},$.viClientDialog(u).open(),t.set_cancel(!0)):i.indexOf("CustomizedHTMLCommand_")>=0?(n.setFocus(),f=t.get_value(),n.pasteHtml(f),t.set_cancel(!0)):(e=["ImageManager","DocumentManager","LinkManager","InsertTable","InsertSymbol","InsertSnippet"],e.contains(i)&&n.setFocus())}function onEditorClientCommandExecuted(n,t){var r=t.get_commandName(),i;r==="ApplyClass"&&(i=n.get_html(),i=i.replace(/<font([\w\s\-"'=]+)>([\w\s,.&;%@#$()+\-\*\/?~|\\'"`]*)<\/font>/ig,"<span$1>$2<\/span>"),n.set_html(i))}function onEditorShowDialog(n){var r=this,t=$("#"+r._element.id).getZIndex(),e=$(".RadWindow.rwNormalWindow.rwTransparentWindow"),u="RadWindowWrapper_"+r._element.id+"_dialogOpener"+n,f=$(".RadWindow.rwNormalWindow.rwTransparentWindow#"+u),i;$(e).each(function(n,i){var r=$(i).getZIndex();$(i).attr("id")!=u&&r>t&&(t=r)});i=$("div.TelerikModalOverlay");i.is(":visible")&&i.css("z-index",t+1);f.length>0&&f.css({"z-index":t+2})}function onEditorClientLoad(n){var u=$(n.get_element()).closest("form"),t,i,f,r,e,o,h,c,v,s,y;if(u.attr("data-has-editor","true"),t=u.scope(),i=u.attr("name"),t&&i&&n.attachEventHandler("onkeyup",function(){var r=$(n._element).parent().find("[data-editor-id]").attr("name"),u;r&&(u=maskTextToStore(n.get_html(!0)),t.$apply(function(){t[i][r].$setViewValue(u);t[i][r].$setDirty(!0);t[i][r].$setTouched(!0)}))}),n._contentHiddenTextarea&&$(n._contentHiddenTextarea).addClass("radeditor-textarea"),f=n.get_contentArea(),$(f).attr("radeditorbody",""),($telerik.isChrome||$telerik.isSafari)&&$telerik.addExternalHandler(f,"click",function(t){t.srcElement.tagName=="IMG"&&n.selectElement(t.srcElement)}),r=$(n._element).closest("div.simple_editor"),r.length>0&&!r.hasClass("allow_applay_class")&&(e=r.find("ul.reToolbar").find("span.ApplyClass"),o=e.closest("li"),e&&o&&o.hide()),n.showDialog&&(h=n.showDialog,n.showDialog=function(t,i,r){h.call(n,t,i,r);onEditorShowDialog.call(n,t,i)}),n.add_toggleScreenMode(function(){var t=$("#toppanel"),i=n.get_element();n._isFullScreen?($(".vi-mask").hide(),$("nav#header_nav").hide(),t.length!=0&&(t.data("isRadEditorFullScreen",!0),t.removeClass("sticky")),$(i).parents(".ngdialog").addClass("ngdialog-radedior-fullscreen")):($(".vi-mask").show(),$("nav#header_nav").show(),t.length!=0&&t.data("isRadEditorFullScreen",!1),$(i).parents(".ngdialog").removeClass("ngdialog-radedior-fullscreen"));$(i).find("iframe").height("100%")}),c=n._isInInlineEditMode(),c){n._contentArea.setAttribute("title","Click to add/edit content.");var l=function(n){n.preventDefault()},p=n._addInlineEditorSelectedStyles,w=n._removeInlineEditorSelectedStyles;n._addInlineEditorSelectedStyles=function(){p.apply(this);$(this._contentArea).closest(".widget_wrapper").addClass("inlineEditorActive");$(this._contentArea).closest(".content_area").removeClass("empty_content_area_placeholder");setTimeout(function(){$("#WidgetTabControl").length!=0&&setInlineEditorToolBarPosition("#WidgetTabControl");$("#toppanel").length!=0&&setInlineEditorToolBarPosition("#toppanel")},200);parent&&parent.$("a[href]:not([href^='javascript']):not([href='#']):not(.reTool), .command").on("click",l).attr("disabled","disabled")};n._removeInlineEditorSelectedStyles=function(){w.apply(this);$(this._contentArea).closest(".widget_wrapper").removeClass("inlineEditorActive");this.get_html(!0)||$(this._contentArea).closest(".content_area").addClass("empty_content_area_placeholder");parent&&parent.$("a[href]:not([href^='javascript']):not([href='#']):not(.reTool), .command").off("click",l).removeAttr("disabled")}}var b=null,a=(new Date).getTime(),k=function(){a=(new Date).getTime()+6e4;var n=$.vision?$.vision():$.frontendSessionManager?$.frontendSessionManager():null;n&&n.extendSessionTimeout(function(){})};n.attachEventHandler("onkeydown",function(){(new Date).getTime()>a&&(b=setTimeout(k,500))});v=navigator.userAgent.toLowerCase();/firefox/.test(v)&&setTimeout(function(){n.onParentNodeChanged()},100);s=Telerik.Web.UI.RadEditor.prototype;y=s._onAfterPaste;s._onAfterPaste=function(n,t){try{y.call(this,n,t)}catch(i){}$telerik.$(this.get_contentArea()).find(".telerik_paste_container").remove()}}function setInlineEditorToolBarPosition(n){var i=$(n),t=$(".RadEditor.reToolbarWindow.reWrapper:visible"),r=$(".RadEditor.reWrapper.reInlineEditor.reInlineEditorSelected");if(t.length!=0&&r.length!=0){var u=i.length!=0?i.offset().top+i.outerHeight(!0):$(window).scrollTop(),f=r.offset().top-t.outerHeight(!0),e=f+r.outerHeight(!0);u<e&&(u>f?t.offset({top:u}):t.offset({top:f}))}}function resizeTelerik(n){n=n||"body";var t=$find($("div.RadEditor",n).attr("id")||"");t&&t._sizer.setContentElementHeight()}function maskTextToStore(n){var t=n,i,r,u,f;return(t=="<br />"||t=="<br/>"||t=="<br>")&&(t=""),i=/(src\s*=\s*["'])(?!(http[s]?:))[^'"]*?home\/showimage\s*(\?[^>\s]*)?([\?&])(id=\d*)(.*?)(["'])/gi,r="$1home/showimage?$5$7",t=t.replace(i,r),u=/(href\s*=\s*["'])(?!(http[s]?:))[^'"]*?home\/showdocument\s*(\?[^>\s]*)?([\?&])(id=\d*)(.*?)(["'])/gi,f="$1home/showdocument?$5$7",t.replace(u,f)}function visionManager(){}function CustomAjax(n){$.vision().customAjax(n)}function RefreshSelf(){$.vision().refresh()}function RedirectAfterSearchButtonClick(n){var i=$("[name='"+n+"']#"+n+""),t=i.attr("data-url"),u=i.closest("div.search_area"),r=[];u.find(".search_option").each(function(){var n=$(this).hasClass("hasPlaceholder")?"":$(this).val(),t=encodeURIComponent($(this).is("input[type='checkbox']")?$(this).prop("checked"):n);r.push({Key:$(this).attr("name"),Value:t})});t=t.indexOf("?")<0?t+"?":t+"&";$(r).each(function(n,i){t+=i.Key+"="+i.Value+"&"});t=t.substring(0,t.length-1);$.vision().refresh(t)}function ResetIDName(){$("ol.data_source_list li").each(function(n){$(this).find('input[modeltype="value"]').attr("name","Field.Setting.DataSource["+n+"].Value").attr("id","Field_Setting_DataSource_"+n+"__Value");$(this).find('input[modeltype="value"]').prev().attr("for","Field_Setting_DataSource_"+n+"__Value");$(this).find('input[modeltype="text"]').attr("name","Field.Setting.DataSource["+n+"].Text").attr("id","Field_Setting_DataSource_"+n+"__Text");$(this).find('input[modeltype="text"]').prev().attr("for","Field_Setting_DataSource_"+n+"__Text");$(this).find('input[modeltype="index"]').val(n)})}function disableTaskItemsInTaskList(){$(".task_settings_pane ol li.task_item").each(function(){var n=$(this).attr("data-task-item-id");$(".task_list").find("li.task[data-task-item-id='"+n+"']").length>0?$(this).hasClass("disabled")||$(this).addClass("disabled"):$(this).hasClass("disabled")&&$(this).removeClass("disabled")});setTimeout(function(){$("#toolbar").hasClass("closed")?$("a.tools").hide():$(".task_settings_pane>ol>li.task_item:not(.disabled)").length==0?($("a.tools").fadeOut(300),$(".task_settings_pane").slideUp(300)):$("a.tools:hidden")&&$("a.tools").fadeIn(300)},200)}function initTaskDragAndDrop(n,t,i,r){(disableTaskItemsInTaskList(),typeof $.prototype.dragDropSort!="undefined")&&$("#"+n).dragDropSort({draggableSource:".task_settings_pane>ol>li.task_item:not(.disabled)",draggableOptions:{appendTo:"#"+n},draggableDataAttrName:"data-vision-data",sortableSource:".task_list ul",sortableOptions:{items:"li.task",placeholder:"task_drag placeholder",appendTo:"parent"},sortableDataAttrName:"data-vision-data",getPreSortItemData:function(n){var t=n.closest("ul"),i=n.prev("li.task");return $.extend({},JSON.parse(t.attr("data-vision-data")||"null"),JSON.parse(i.attr("data-vision-data")||"null"))},onDragChanged:function(u,f,e,o){var s={PreOrder:u.Order,PreID:u.ID,ID:f.ID};$.vision().post(t,s,function(u){o();typeof u.IsOk!="undefined"&&u.IsOk?(refreshTasks(n,t,i,r),$.refreshTempMessage(u.Message)):$.refreshTempMessage(Vision.Resources.Admin_MyTask_DragNewTaskFailedError)},"JSON",function(){o();$.refreshTempMessage(Vision.Resources.Admin_MyTask_DragNewTaskFailedError)})},onSortChanged:function(u,f,e,o){var s={PreOrder:u.Order,PreID:u.ID,Order:f.Order,ID:f.ID};$.vision().post(i,s,function(u){o();typeof u.IsOk!="undefined"&&u.IsOk?(refreshTasks(n,t,i,r),$.refreshTempMessage(u.Message)):$.refreshTempMessage(Vision.Resources.Admin_MyTask_MoveTaskFailedError)},"JSON",function(){o();$.refreshTempMessage(Vision.Resources.Admin_MyTask_MoveTaskFailedError)})},onSortStart:function(n,t){$(t.item).is(".task")&&($("a.tools").hasClass("active")&&($("a.tools").removeClass("active"),$(".task_settings_pane").slideUp(200)),$(".toolbar-trash-area").show())},onSortStop:function(n,t){$(t.item).is(".task")&&$(".toolbar-trash-area").slideUp(200)}})}function refreshTasks(n,t,i,r){var u=$(".task_list");u.loading(!0,{mask:!0});$.vision().get(r,{},function(f){u.loading(null,null,!0);u.html(f);initTaskDragAndDrop(n,t,i,r)},"html",function(){u.loading(null,null,!0);$.refreshTempMessage(Vision.Resources.Admin_MyTask_RefreshTaskFailedError);initTaskDragAndDrop(n,t,i,r)})}var __sortNumberFunction=function(n,t){return n-t},template,ViCategorySelector,ContentTypeCategoryModel,TelerikSliderValueChange,defaultValueInput;Array.prototype.sortNumber=function(){return this.sort(__sortNumberFunction)},function(n){var t;if(n.extend(n,{isHashValid:function(n){return n=n||window.location.hash||"",!/[<\/>]/.test(n)},cookie:function(n,t,i){var f,r,e,o,u,s;if(typeof t!="undefined"){i=i||{};t===null&&(t="",i.expires=-1);f="";i.expires&&(typeof i.expires=="number"||i.expires.toUTCString)&&(typeof i.expires=="number"?(r=new Date,r.setTime(r.getTime()+i.expires*864e5)):r=i.expires,f="; expires="+r.toUTCString());var h=i.path?"; path="+i.path:"",c=i.domain?"; domain="+i.domain:"",l=window.location.protocol=="https:"?"; secure":"";document.cookie=[n,"=",encodeURIComponent(t),f,h,c,l].join("")}else{if(e=null,document.cookie&&document.cookie!="")for(o=document.cookie.split(";"),u=0;u<o.length;u++)if(s=jQuery.trim(o[u]),s.substring(0,n.length+1)==n+"="){e=decodeURIComponent(s.substring(n.length+1));break}return e}},unbindShowImageAnchorsClick:function(t){t=t||"a[href!='#'][href]";n(t).each(function(){var t=n(this).attr("href")||"",i=t.match(/[^'"]*?home\/showimage\s*(\?.*)/gi);i&&n(this).off()})},getFileExtension:function(n){var t=n.match(/\.([^\.]+)$/);return t?t[0].toLowerCase():""},convertHtmlToText:function(t,i){var r=n.trim(t.replace(/<[^><]*?>/gi," ")||"");return(typeof i).toUpperCase()=="NUMBER"&&i>3&&r.length>i&&(r=r.substr(0,i)+"..."),r},isFileInputExtensionValid:function(t,i,r){var e,u,o,f,s;return(r=r||!1,e=n.trim(i).split(","),u=[],n(e).each(function(t,i){u.push(n.trim(i))}),o=n(t),f=o.val(),f)?(s=n.getFileExtension(f),n.inStringArray(s,u,!0)>=0):r},isLocalUrl:function(n){return n&&!/^([a-z]+:)?\/\//i.test(n)},isUrl:function(n){return n&&/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(n)},isIntranetUrl:function(n){return n&&/^(((ftp|http|https):\/\/)|(\/)|(..\/))(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/i.test(n)},redirectTo:function(n){n&&(window.location=decodeURIComponent(n))},isIEBrowser:function(n){return n=n||navigator.userAgent,n.indexOf("MSIE ")>-1||n.indexOf("Trident/")>-1},isIE9Browser:function(n){return n=n||navigator.userAgent,n.indexOf("MSIE 9")>-1},isFFoxBrowser:function(n){return n=n||navigator.userAgent,n.indexOf("Firefox")>-1},getIEVersion:function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("msie")!=-1?parseInt(n.split("msie")[1]):-1},evalFunc:function(n){return eval("(0,"+n+")")},refreshTempMessage:function(t){n.fn.tempMessage&&n(".vi-temp-message-container").tempMessage({message:t})},isEmpty:function(t,i){return typeof t=="undefined"||t==null?i?!0:typeof t=="string"&&n.trim(t)=="":n.type(t)=="string"&&n.trim(t)==""&&!i?!0:!1},refreshFriendlyUrl:function(n,t,i,r,u,f){var l,e,a,v,h,o,c,s;return f=f==="True",l=(r+"/Admin/").toLowerCase(),e=u=="undefined"||u==null?window.location.toString():u,a=e.toLowerCase().indexOf(l)>=0,v="",!a&&f?(h="/-"+n+"-"+t,o=e.indexOf(h),o>=0?e.substring(0,o)+"/-"+n+"-"+i+e.substring(o+h.length):e+"/-"+n+"-"+i):(c="&"+n+"="+t,s=e.indexOf(c),s>=0?e.substring(0,s)+"&"+n+"="+i+e.substring(s+c.length):e+"&"+n+"="+i)},format:function(){for(var i,r,t=arguments[0],n=0,u=arguments.length-1;n<u;n++)i=new RegExp("\\{"+n+"(:([^\\}]+))?\\}","gm"),r=arguments[n+1],t=t.replace(i,function(){return r});return t},_onloadFuncArray:[],prepareTriggerOnloadParams:function(n,t){return n=n||"",(typeof t=="undefined"||t==!1)&&(n=n+" "),n},triggerOnload:function(t,i){var r=this;n(r._onloadFuncArray).each(function(u,f){if(n.isFunction(f)&&f(t,i),n.type(f)==="string")try{r.evalFunc(f)()}catch(e){alert(e.message)}})},pushOnloadFunc:function(t,i){n.inArray(t,this._onloadFuncArray)<0&&this._onloadFuncArray.push(t);i==!0&&t()},inStringArray:function(t,i,r){var u=t,f=i;return typeof r!="undefined"&&r==!0&&(u=t.toLowerCase(),f=n.map(i,function(n){return n.toLowerCase()})),n.inArray(u,f)},decodeHTML:function(n){return(""+n).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},encodeHTML:function(n){return(""+n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},appendQueryString:function(n,t,i,r){return n=n||"",r=r||!0,i=i||"",i=r?encodeURIComponent(i):i,n+(n.indexOf("?")>=0?"&":"?")+t+"="+i},calculateTimespan:function(n,t){var r=new Date;n=n||r;t=t||r;var u=t.getTime()-n.getTime(),f=Math.floor(u/864e5),e=u%864e5,o=Math.floor(e/36e5),h=e%36e5,s=Math.floor(h/6e4),c=f>0?f+" days ":"",l=o>0?o+" hours ":"",a=s>0?s+" mins ":"",i=c+l+a;return i.length!=0&&(i=i.substring(0,i.length-1)),i.length==0&&(i="0 min"),i},geoEquals:function(n,t,i){i=i||7;var r=Math.pow(10,i);return Math.abs(n.lat()-t.lat())*r<1&&Math.abs(n.lng()-t.lng())*r<1},viFormatPhone:function(n,t){if(n){var u=(""+n).replace(/\D/g,""),i=u.match(/^(\d{3})(\d{3})(\d{4})$/),r=t.replace("{0:","").replace("}","").replace(/\\/g,"");return i?r?r.indexOf("9")>=0?r.replace("999",i[1]).replace("999",i[2]).replace("9999",i[3]):r.replace("000",i[1]).replace("000",i[2]).replace("0000",i[3]):"("+i[1]+") "+i[2]+"-"+i[3]:""}return""},htmlEncode:function(n){var t=document.createElement("div"),i;return t.textContent!=undefined?t.textContent=n:t.innerText=n,i=t.innerHTML,t=null,i},htmlDecode:function(n){var t=document.createElement("div"),i;return t.innerHTML=n,i=t.innerText||t.textContent,t=null,i},postify:function(t){var i={},r=function(t,u){var f,e;for(f in t){e=isFinite(f)?(u!=""?u:"")+"["+f+"]":(u!=""?u+".":"")+f;t[f]==null&&(i[e]=t[f]);switch(n.type(t[f])){case"number":case"string":case"boolean":case"regexp":i[e]=t[f];break;case"function":break;case"date":i[e]=t[f].toUTCString();break;case"array":t[f].length==0?i[e]=[]:r(t[f],e!=""?e:f);break;default:r(t[f],e!=""?e:f)}}};return r(t,""),i},parseDate:function(n){var r,t,u,i;if(!n)return null;if(r={}.toString,r.call(n)==="[object Date]")return n;t=null;try{if(n&&n.indexOf("/D")===0){if(u=/^\/Date\((.*?)\)\/$/,t=u.exec(n),t)return t=t[1],t=new Date(parseInt(t,10))}else/\dT\d/.test(n)?(i=n.split(/[: T-]/).map(parseFloat),t=new Date(i[0],i[1]-1,i[2],i[3]||0,i[4]||0,i[5]||0,0)):t=new Date(n)}catch(f){console.log("Cannot parse ["+n+"] to date. Error: "+f);t=null}return t},formatDate:function(n,t){function i(n,t,i){if(n=n+"",t=t||2,i=t-n.length,i)return["","0","00","000","0000"][t].substring(0,i)+n;return n}if(!n)return"";var r={names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},u={names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]};return t.replace(/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|zzz|zz|z|"[^"]*"|'[^']*'/g,function(t){var e,f,o;return t==="d"?f=n.getDate():t==="dd"?f=i(n.getDate()):t==="ddd"?f=u.namesAbbr[n.getDay()]:t==="dddd"?f=u.names[n.getDay()]:t==="M"?f=n.getMonth()+1:t==="MM"?f=i(n.getMonth()+1):t==="MMM"?f=r.namesAbbr[n.getMonth()]:t==="MMMM"?f=r.names[n.getMonth()]:t==="yy"?f=i(n.getFullYear()%100):t==="yyyy"?f=i(n.getFullYear(),4):t==="h"?f=n.getHours()%12||12:t==="hh"?f=i(n.getHours()%12||12):t==="H"?f=n.getHours():t==="HH"?f=i(n.getHours()):t==="m"?f=n.getMinutes():t==="mm"?f=i(n.getMinutes()):t==="s"?f=n.getSeconds():t==="ss"?f=i(n.getSeconds()):t==="f"?f=math.floor(n.getMilliseconds()/100):t==="ff"?(f=n.getMilliseconds(),f>99&&(f=math.floor(f/10)),f=i(f)):t==="fff"?f=i(n.getMilliseconds(),3):t==="tt"?f=n.getHours()<12?"AM":"PM":t==="zzz"?(e=n.getTimezoneOffset(),o=e<0,f=math.abs(e/60).toString().split(".")[0],e=math.abs(e)-f*60,f=(o?"+":"-")+i(f)+(":"+i(e))):(t==="zz"||t==="z")&&(f=n.getTimezoneOffset()/60,o=f<0,f=math.abs(f).toString().split(".")[0],f=(o?"+":"-")+(t==="zz"?i(f):f)),f!==undefined?f:t.slice(1,t.length-1)})},dateFormatMapping:function(n){return n?(n=n.toUpperCase(),n=="MM/DD/YYYY"?"mm/dd/yy":n=="DD/MM/YYYY"?"dd/mm/yy":"mm/dd/yy"):n},formatDateTime:function(t){if(t){var i={dateFormat:n.dateFormatMapping(window.visionApps?window.visionApps.cms_core.DateFormat:"mm/dd/yy"),timeFormat:window.visionApps?window.visionApps.cms_core.TimeFormat:"h:mm TT",timeAMFormat:[window.visionApps?window.visionApps.cms_core.TimeAMFormat:"AM"],timePMFormat:[window.visionApps?window.visionApps.cms_core.TimePMFormat:"PM"]},r=n.datepicker.formatDate(i.dateFormat,t),u={hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()},f={amNames:i.timeAMFormat,pmNames:i.timePMFormat},e=n.datepicker.formatTime(i.timeFormat,u,f);return r+" "+e}return dateTime},generateShowImageLink:function(n){var f,t;if(typeof n=="number"&&n%1==0&&(n={id:n}),typeof n=="object"){var s=n.id,e=n.isPublished,i=n.thbnail,o=n.includingTrash,r=n.toShowWidth,u=n.t;return window.visionOptions.loggedIn?(t=window.visionOptions.baseImageUrl+"?id="+s,(e===!0||e===!1)&&(t+="&isPublished="+e),(i===!0||i===!1)&&(t+="&thbnail="+i),(o===!0||o===!1)&&(t+="&includingTrash="+o),r&&(t+="&toShowWidth="+r),u&&(t+="&t="+u),t):(t=window.visionOptions.baseImageUrl+"/"+s,u&&(t+="/"+u),f=!1,i===!0&&(t+="?thbnail="+i,f=!0),r&&(t+=f?"&":"?toShowWidth="+r,f=!0),t)}return window.visionOptions.loggedIn?window.visionOptions.baseImageUrl+"?id="+n:window.visionOptions.baseImageUrl+"/"+n},parseJSON:function(n){if(typeof n!="string"||!n)return null;if(n=jQuery.trim(n),window.JSON&&window.JSON.parse)return window.JSON.parse(n);if(/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(rvalidtokens,"]").replace(rvalidbraces,"")))return new Function("return "+n)();jQuery.error("Invalid JSON: "+n)}}),window.visionOptions&&window.visionOptions.navigationID>0&&(t=n(".alert_container"),t)){var u=window.visionOptions.showTopTips,i=u?"":"hideContent",r=i=="hideContent"?"show":"hide";i=="hideContent"&&!window.visionOptions.loggedIn&&window.visionOptions.emergencyNoticeChanged&&(i="",r="hide");t.find(".important_alert_wrapper").removeClass("hideContent").addClass(i);t.find("#alert_controls").attr("class",r)}}(jQuery),function(){function n(n,t){this._container=n;this._options=t;this._elementArray=[];this._indexArray=[];$(this._container).data("_checkBoxListManager",this)}n.prototype={_options:{submitOnlyChecked:!0,required:!1},_container:null,_elementArray:[],_indexArray:[],_toggle:function(n,t){var r=$(n).prop("checked"),i,f,u,e;$(n).val(r);i=$(n).parent("li");i!=null&&(t._options.submitOnlyChecked?(f=parseInt(i.find("input.index").val()),u=$.inArray(f,t._indexArray),r?i.append(t._elementArray[u]):$(t._elementArray[u]).remove()):$(i).find("input.to-hidden[type='hidden'][name='"+$(n).attr("name")+"']").val(r));e=t._options;e.required&&t._requiredHidden&&(t.getSelectedValues().length>0?t._requiredHidden.val(!0):t._requiredHidden.val(""))},getSelectedValues:function(){var n=[];return $(this._container).find("input.value[type='hidden']").each(function(t,i){n.push($(i).val())}),n},build:function(){var n=this,i,t;$(this._container).find("li").each(function(t,i){var r=$(i).find("input.to-hidden[type='hidden']:not(.index)"),u,f,e;n._elementArray.push(r);u=parseInt($(i).find("input.index").val());n._indexArray.push(u);f=$(i).find("input[type='checkbox']");n._options.submitOnlyChecked&&(e=f.val().toLowerCase()=="true",e||r.remove())});$(this._container).on("click","input[type='checkbox']",function(){n._toggle($(this),n)});if($(this._container).next("input.check-all[type='checkbox']").change(function(){var t=$(this);$(n._container).find("input[type='checkbox']").each(function(i,r){$(r).prop("disabled")!=!0&&($(r).prop("checked",t.prop("checked")),n._toggle($(r),n))})}),i=n._options,t=n._container,i.required&&$.validator){var u=n._requiredHidden=t.children("input.check_box_list_required"),f=t.attr("name"),r=t.attr("data-val-required")||"",e=$.isEmpty(r)?$.format(Vision.Resources.UI_Common_CheckBoxList_RequireValidError,f):r;u.rules("add",{checkBoxListRequired:[t],messages:{checkBoxListRequired:e}})}}};$.extend($.fn,{checkBoxList:function(t){t=t||{submitOnlyChecked:!0};var i=$(this);return i.each(function(){var i=new n($(this),t);i.build()}),i},getCheckBoxListManager:function(){return $(this).data("_checkBoxListManager")},moveStyleSheetsToHead:function(n){$(this).find("link").each(function(){var t=null;t=n&&n.linksSelector?n.linksSelector:"link[href='"+$(this).attr("href")+"']";$("head").find(t).length<=0?$(this).appendTo("head"):$(this).remove()})}})}(jQuery),function(){function n(n,t){this._container=n;this._options=t;this._elementArray=[];this._indexArray=[];$(this._container).data("_zCheckBoxListManager",this)}n.prototype={_options:{submitOnlyChecked:!0,required:!1},_container:null,_elementArray:[],_indexArray:[],_toggle:function(n,t){var r=$(n).prop("checked"),i,f,u,e;$(n).val(r);i=$(n).parent("li");i!=null&&(t._options.submitOnlyChecked?(f=parseInt(i.find("input.index").val()),u=$.inArray(f,t._indexArray),r?i.append(t._elementArray[u]):$(t._elementArray[u]).remove()):$(i).find("input.to-hidden[type='hidden'][name='"+$(n).attr("name")+"']").val(r));e=t._options;e.required&&t._requiredHidden&&(t.getSelectedValues().length>0?t._requiredHidden.val(!0):t._requiredHidden.val(""))},getSelectedValues:function(){var n=[];return $(this._container).find("input.value[type='hidden']").each(function(t,i){n.push($(i).val())}),n},build:function(){var n=this,i,t;$(this._container).find("li").each(function(t,i){var r=$(i).find("input.to-hidden[type='hidden']:not(.index)"),u,f,e;n._elementArray.push(r);u=parseInt($(i).find("input.index").val());n._indexArray.push(u);f=$(i).find("input[type='checkbox']");n._options.submitOnlyChecked&&(e=f.val().toLowerCase()=="true",e||r.remove())});$(this._container).on("click","input[type='checkbox']",function(){var t,i;n._toggle($(this),n);t=$(this).prop("checked");t||(i=$(this).parents(".checkboxlist-container").next("input.check-all"),i.removeAttr("checked"),$(n._container).closest("li").find("input.check-all-hidden").val(!1))});if($(this._container).next("input.check-all[type='checkbox']").change(function(){var i=$(this),t;$(n._container).find("input[type='checkbox']").each(function(t,r){$(r).prop("disabled")!=!0&&($(r).prop("checked",i.prop("checked")),n._toggle($(r),n))});t=i.prop("checked");t&&i.val(t);$(n._container).closest("li").find("input.check-all-hidden").val(t)}),i=n._options,t=n._container,i.required&&$.validator){var u=n._requiredHidden=t.children("input.check_box_list_required"),f=t.attr("name"),r=t.attr("data-val-required")||"",e=$.isEmpty(r)?$.format(Vision.Resources.UI_Common_CheckBoxList_RequireValidError,f):r;u.rules("add",{checkBoxListRequired:[t],messages:{checkBoxListRequired:e}})}}};$.extend($.fn,{zCheckBoxList:function(t){t=t||{submitOnlyChecked:!0};var i=$(this);return i.each(function(){var i=new n($(this),t);i.build()}),i},getzCheckBoxListManager:function(){return $(this).data("_zCheckBoxListManager")}})}(jQuery);Pager.Manager={_allPagers:[],getPager:function(n){var t=null;return $(this._allPagers).each(function(i,r){if(r.pagerName==n){t=r;return}}),t}},function(n){var t=function(t,i){var f={eventName:"click",targetEl:null,rewriteTarget:!1,animSpeed:100,autoWidth:!1,minWidth:250,minHeight:220,maxHeight:220,enableInput:!0,backSpaceClear:!0,appendToBody:!0,relocateEl:"#toppanel",dialogClass:".vi-content",init:function(){},beforeShow:function(){},afterShow:function(){},onClose:n.noop,clearElement:function(){}},e=n(t).getZIndex()+1,r,u;if(this.setting=n.extend({zIndex:e},f,i),this.vars={openState:!1},this.dropDown=n(t),r=!1,typeof this.setting.targetEl=="string"?(u=n("body").children(this.setting.targetEl),r=u.length>0):r=n(this.setting.targetEl).parent()==n("body"),r&&!this.setting.rewriteTarget&&u.remove(),this.dropDownPanel=n(this.setting.targetEl),this.setting.targetEl==null){alert(Vision.Resources.UI_Common_ViDropdown_PleaseSetTargetEle);return}this.initialize()};t.prototype={initialize:function(){var i=this,o=i.vars,u=i.dropDown,r=i.dropDownPanel,t=i.setting,f=r.parent(),e=u.is(":text")?u:u.find(":text");e.attr("autocomplete","off");r.addClass("vi-dropdown-panel");f.length>0&&!f.is("body")&&t.appendToBody&&r.appendTo("body");r.data("SourceEl",u);r.css({position:"absolute","min-width":t.minWidth,"min-height":t.minHeight,"max-height":t.maxHeight,overflow:"auto","z-index":t.zIndex});t.maxWidth&&r.css({"max-width":t.maxWidth});t.dialogClass&&(i.inDialog=u.closest(t.dialogClass).length>0);i._checkInScrollbarElement();i.bindEvent();t.init&&n.isFunction(t.init)&&t.init(i)},_checkInScrollbarElement:function(){var n=this,i=n.dropDown,r=n.setting,t=i.getParentWithScrollbar();if(n.inScrollbarElement=t.length>0&&!t.is("html"),n.scrollbarElement=t,n.inScrollbarElement)if(r.appendToBody)t.off("scroll").on("scroll",function(){n.close()});else t.css("position","relative");n.inDialog&&i.closest(r.dialogClass).css("position","relative")},bindEvent:function(){var t=this,i=t.vars,r=t.dropDown,f=t.dropDownPanel,u=t.setting,h=f.parent(),e,o,s;r.on(u.eventName,function(){t._setPosition();i.openState?t.close():t.open()});if(e=r.is(":text")?r:r.find(":text"),!u.enableInput)e.on("keydown",function(n){if(u.backSpaceClear){if(n.which!==8)return!1;e.val("");u.clearElement&&u.clearElement.call(t,e,n.which)}else return!1});n(document).on("mousedown",function(u){if(f.length==0||n.contains(f[0],u.target)||f[0]==u.target)return!1;r[0]!=u.target&&i.openState&&t.close()});if(n(window).resize(function(){o&&clearTimeout(o);o=setTimeout(function(){i.openState&&t._setPosition()},20)}),n(window).scroll(function(){s&&clearTimeout(s);s=setTimeout(function(){i.openState&&t._setPosition()},20)}),t.inScrollbarElement)t.scrollbarElement.on("scroll",function(){i.openState&&t._setPosition()})},_setPosition:function(){var t=this,b=t.vars,o=t.dropDown,s=t.dropDownPanel,i=t.setting,l,c,a;t._checkInScrollbarElement();var u=o.position(),h=o.offset(),v=o.getParentElementFixedTop(),p=v!=null,f=0,e=0,k=n(window).width(),w=n(window).height(),y=o.outerWidth(!0),r=o.outerHeight(!0);p?(position="fixed",l=n(i.relocateEl),t.inDialog?(c=h.top-n(document).scrollTop(),w-c-r<i.maxHeight?(f=c-i.maxHeight,s.height(i.maxHeight)):f=r+c,e=h.left,t.inScrollbarElement&&!i.appendToBody&&(position="absolute",f=r+u.top,e=u.left)):l.length>0?(f=r+v+(h.top-l.offset().top),e=h.left):i.appendToBody||(position="absolute",f=t.inScrollbarElement?r+u.top+t.scrollbarElement.scrollTop():r+u.top,e=u.left)):(position="absolute",i.appendToBody?(f=h.top+r,e=h.left):(e=u.left,f=t.inScrollbarElement?r+u.top+t.scrollbarElement.scrollTop():u.top+r));s.data("SourceEl",o);s.css({position:position,left:e,top:f});a=y<i.minWidth?i.minWidth:y-2;i.autoWidth?(s.css({"min-width":a}),s.css({"max-width":i.maxWidth})):s.css({width:a})},open:function(){var i=this,r=i.vars,u=i.dropDownPanel,t=i.setting;t.beforeShow&&n.isFunction(t.beforeShow)&&t.beforeShow.call(i);u.slideDown(t.animSpeed,function(){r.openState=!0;t.afterShow&&n.isFunction(t.afterShow)&&t.afterShow.call(i)})},close:function(n){var t=this,r=t.vars,u=t.dropDownPanel,i=t.setting;u.slideUp(i.animSpeed,function(){r.openState=!1;i.onClose&&i.onClose(n)})},setValue:function(n){var t=this,u=t.vars,i=t.dropDown,f=t.dropDownPanel,e=t.setting,r=i.is(":text")?i:i.find(":text");r.length>0?r.val(n).trigger("change"):i.text(n)}};n.fn.viDropdown=function(i){return this.each(function(){var r=n(this),u;if(r.data("viDropdown"))return r.data("viDropdown");u=new t(this,i);r.data("viDropdown",u)})}}(jQuery),function(n){var t=function(t,i){var e={eventName:"click",targetEl:".vi-animation-container",appendHttpPrefix:!0,animSpeed:100,minWidth:120,minHeight:100,maxHeight:300,validateIntranetUrl:!1,enableFormValidate:!0,init:function(i){var e=i.dropDown,o=i.setting,r=e.is(":text")?e:e.find(".vi-input"),u=r.next(),c=i.dropDownPanel,h=i.validateIntranetUrl,s,f;o.enableInput&&(o.enableFormValidate?(n.validator.addMethod(r.attr("id")+"redirectUrl",function(t){var i=!0;if(r.is(":visible")){if(t.indexOf("?navid=")>-1||t==""||h&&n.isIntranetUrl(t))return!0;i=n.isUrl(t);i?r.removeClass("input-validation-error"):r.addClass("input-validation-error")}return i},n.validator.format(Vision.Resources.UI_Common_ViLinkComboBox_URLInValidError)),s={},s[r.attr("id")+"redirectUrl"]=!0,u.length&&u.is(":hidden")&&u.closest("form").length&&u.rules&&(f=n(t).closest("form"),f.length&&!n.data(f[0],"validator")&&f.validate(),u.rules("add",s))):r.val()===""&&o.appendHttpPrefix&&r.val("http://"))}},r=this,f,u;r.linkComboBox=n(t);f=r.linkComboBox.getZIndex()+1;u=n.extend({zIndex:f},e,i);r.linkComboBox.viDropdown(u);n.extend(r,r.linkComboBox.viDropdown(u).data("viDropdown"))};n.fn.viLinkComboBox=function(i){return this.each(function(){var r=n(this),u;if(r.data("viLinkComboBox"))return r.data("viLinkComboBox");u=new t(this,i);r.data("viLinkComboBox",u)})}}(jQuery),function(n){var t=function(t,i){var r={init:null,runTemplates:function(){},insertRowCall:n.noop,removeRowCall:n.noop,registeValidate:n.noop};if(this.setting=n.extend({},r,i),this.quickLink=n(t),r.runTemplates==null||!n.isFunction(r.runTemplates)){alert(Vision.Resources.UI_Common_ViQuickLink_RunTemplatesMethodFailedError);return}this.initialize()};t.prototype={initialize:function(){var t=this,r=t.setting,i=t.quickLink;n(i).on("click",".addlink",function(){var i=n(this).closest("tr");t.addRow(i)});n(i).on("click",".deletelink",function(){var i=n(this).closest("tr");t.removeRow(i)});t.registeValidate(i,"add");r.init&&n.isFunction(r.init)&&r.init(i)},addRow:function(t){var r=this,i=r.setting,o=r.quickLink,u=[],f=t.parent(),s=f.find("tr").length,e;u=i.runTemplates(s);n.isArray(u)&&t.after(u.join(""));e='<a href="javascript:void(0);" title="'+Vision.Resources.UI_Common_ViQuickLink_DeleteLinkButtonTitle+'" class="deletelink"><\/a>';f.find("tr").length==2&&f.find("tr:first").find("td:last").html(e);r.registeValidate(o);i.insertRowCall&&n.isFunction(i.insertRowCall)&&i.insertRowCall(t.next())},removeRow:function(t){var r=this,i=r.setting,u=t.parent();r.registeValidate(t,!1);t.remove();u.find("tr").length==1&&u.find(".deletelink").remove();i.removeRowCall&&n.isFunction(i.removeRowCall)&&i.removeRowCall()},registeValidate:function(t,i){var r=i==null?"add":i?"add":"remove";switch(r){case"add":n(":text",t).each(function(){n(this).hasClass("link_name")&&n(this).rules(r,{required:!0,messages:{required:Vision.Resources.UI_Common_ViQuickLink_LinkNameIsRequiredMessage}});n(this).hasClass("link_url")&&n(this).rules(r,{required:!0,messages:{required:Vision.Resources.UI_Common_ViQuickLink_LinkURLIsRequiredMessage}})});break;case"remove":n(".link_name",t).each(function(){n(this).rules(r)});n(".link_url",t).each(function(){n(this).rules(r)})}},generateJsonObj:function(){var u=this,f=u.quickLink,t=1,i=linkUrl=linkTarget="",r=[];return linkJsonArray=["["],n("tbody tr",f).each(function(){var u=n(this),f;i=u.find(".link_name").val();linkUrl=u.find(".link_url").val();linkTarget=u.find(".linkTarget").val();n.trim(i)!=""&&n.trim(linkUrl)!=""&&(f="{ 'ID':"+t+", 'Name':'"+i+"', 'LinkUrl':'"+linkUrl+"', 'LinkTarget':'"+linkTarget+"', 'Order': "+t+" }",r.push({ID:t,Name:i,LinkUrl:linkUrl,LinkTarget:linkTarget,Order:t}),t>1&&linkJsonArray.push(","),linkJsonArray.push(f),t+=1)}),linkJsonArray.push("]"),t==1&&(linkJsonArray=[]),JSON.stringify(r)},enable:function(n){var t=this,i=t.quickLink;(typeof n=="undefined"||n==null)&&(n=!0);t.registeValidate(i,n)}};n.fn.viQuicklink=function(i){return this.each(function(){var r=n(this),u;if(r.data("viQuicklink"))return r.data("viQuicklink");u=new t(this,i);r.data("viQuicklink",u)})}}(jQuery),function(n){n.fn.extend({rebindUnobtrusiveValidation:function(){var t=n(this);return t.is("form")&&(t.removeData("validator").removeData("unobtrusiveValidation"),t.validate(),n.validator.unobtrusive.parse(t)),t},showErrorsWCAGCompliant:function(){var t=[],u="",i=n(this),r,f,e,o;(i.find(".valid").removeAttr("aria-describedby"),i.find(".input-validation-error").each(function(){var n=this.outerHTML;t.push({id:this.id,html:n})}),t.length!=0)&&(r=i.find(".validation-summary-errors"),f=n(r.find("ul li")),f.each(function(r,f){for(var o,s=n(f).text(),e=0;e<t.length;e++)t[e].html.indexOf(s)>-1&&!t[e].found&&(o=t[e].id+"_error",u+='<li><a href="#'+t[e].id+'" id = '+o+' class="error-tags">'+s+"<\/a><\/li>",t[e].found=!0,i.find("#"+t[e].id).attr("aria-describedby",o))}),e=t.length==1?"There is 1 error in this form.":"There are "+t.length+" errors in this form.",o='<div class="panel-heading">'+e+'<\/div><div class="panel-body"><ul>'+u+"<\/ul><\/div>",r.attr("role","alert"),setTimeout(function(){r.html(o);n(".error-tags").click(function(t){t.preventDefault();var i=n(this).attr("id").replace("_error","");n("#"+i).focus()})},1))},getZIndex:function(t){if(t=="EditorDropDown")return n("body").find(".v-viClientDialog:visible, .reFullScreen:visible").length>0?1e5:998;var i;return n(this).parents().andSelf().each(function(){return i=n(this).css("zIndex"),parseFloat(i)?(i=parseFloat(i)+1,!1):void 0}),i=="auto"?1:i},getParentWithScrollbar:function(){var r=n(this),t=!1,i=null;return r.parents().each(function(r,u){return t|=u.scrollHeight>u.clientHeight&&n(u).css("overflow-y")=="auto",i=n(u),!t}),i},getParentElementFixedTop:function(){var r=n(this),t=!1,i=null;return r.parents().each(function(){return t|=n(this).css("position")=="fixed",n(this).css("position")=="fixed"&&(i=parseInt(n(this).css("top"))),!t}),i},xBrowserAddHandler:function(t,i){return n(this).each(function(){var n=this;n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent?n.attachEvent("on"+t,i):n["on"+t]=i}),n(this)},iframeLoad:function(t){return n(this).filter("iframe").xBrowserAddHandler("load",t)},tempMessage:function(t){var f=n.extend({message:"",cssClass:""},t),i=n(this),r,u;i.hasClass("vi-temp-message-container")||i.addClass("vi-temp-message-container");r=f.message||i.html();r&&(r.charAt(0)==="!"?(r=r.slice(1),i.addClass("vi-temp-message-container-error")):i.removeClass("vi-temp-message-container-error"),u=setTimeout(function(){i.html(r);i.fadeIn(200);var n=setTimeout(function(){i.fadeOut(500,function(){i.html("").removeClass("vi-temp-message-container-error")});clearTimeout(n)},5e3);clearTimeout(u)},200))},loading:function(t,i,r){var u=n(this),e,f,o;if(i=n.extend({},{text:"",description:"",className:""},i),typeof r!="undefined"&&r==!0)i&&i.hideCurrent==!0?u.find("div.loading").remove():n("div.loading","body").remove();else{succeed=typeof t=="undefined"||t?!0:!1;e=i.text||(t?Vision.Resources.UI_Common_Loading_LoadingText:Vision.Resources.UI_Common_Loading_LoadFailedText);f=t?"succeed":"failed";u.find("div.loading").length<=0&&(o="<div class='loading' style='display:none'><span class='"+f+"'>"+e+"<span><\/span><\/div>",u.append(o),i.description&&u.find("div.loading").append(n("<div class='loading-description'><\/div>").html(i.description)));i.className&&u.find("div.loading").addClass(i.className);function s(t){var r=t.find("div.loading"),c=t.outerHeight(),l=t.outerWidth(),u=n.extend({mask:!1,css:"",opacity:.8,width:l,height:c},i),h;typeof u.mask!="undefined"&&u.mask?r.addClass("mask").removeClass("succeed").removeClass("failed").addClass(f):r.removeClass("mask");typeof u.css!="undefined"&&r.addClass(u.css);h=t.offset();r.width(l).height(c).css({display:"block",position:"absolute"}).offset({top:h.top,left:h.left}).css("opacity",u.opacity).css("z-index",99999).css("overflow","hidden");u.width!=null&&r.width(u.width);u.height!=null&&r.height(u.height);var e=r.find("div.loading-description"),o=r.find(">span"),s=containerHeight=0;t.is("body")||t.is(document)?(r.width(n(document).width()),r.height(n(document).height()),s=n(window).width(),containerHeight=n(window).height(),o.css({position:"fixed"}),e.css({position:"fixed"})):(s=r.outerWidth(!0),containerHeight=r.outerHeight(!0),o.css({position:"absolute"}),e.css({position:"absolute"}));o.css({top:(containerHeight-o.outerHeight())/2,left:(s-o.outerWidth())/2});e.css({top:(containerHeight+e.outerHeight())/2,left:(s-e.outerWidth())/2})}s(u);n(window).resize(function(){})}return u},closestClientDialog:function(){var r=".v-viClientDialog",t=null,i,u;try{t=n(this).closest(r).data("viClientDialog");t||(i=self.parent.$,u=i("iframe"),n(u).each(function(n,u){var e=u.window||u.contentWindow,f;e==self&&(f=u,t=i(f).closest(r).data("viClientDialog"))}))}catch(f){}return t},outerHtml:function(){var t=this;return n(n("<div><\/div>").html(t.clone())).html()},hasXScrollBar:function(){var n=this.get(0);return this.is("body")||this.is(document)||this.is(window)?n.scrollWidth>n.clientWidth:n.scrollWidth>n.clientWidth&&(this.css("overflow")=="auto"||this.css("overflow-x")=="auto")},hasYScrollBar:function(){var n=this.get(0);return this.is("body")||this.is(document)||this.is(window)?n.scrollHeight>n.clientHeight:n.scrollHeight>n.clientHeight&&(this.css("overflow")=="auto"||this.css("overflow-y")=="auto")},hasScrollBar:function(){var n=this.get(0);return this.hasXScrollBar()||this.hasYScrollBar()},isFixed:function(){return this.css("position")=="fixed"},inFixed:function(){var t=!1;return n(this).parents().andSelf().each(function(){return t|=n(this).isFixed(),!t}),t},inScroll:function(){var t=!1;return this.parents().andSelf().each(function(){return t|=n(this).hasScrollBar(),!t}),Boolean(t)},hackPosition:function(){var t=n(this),i=t.offset(),r=t.offsetParent().offset();return{top:i.top-r.top,left:i.left-r.left}}});typeof n.visionViewState=="undefined"&&n.extend({visionViewState:function(){return new visionViewState({conatiner:"input[name='_cms_custom_view_input']"})}});typeof n.validator!="undefined"&&(n.validator.addMethod("cmsFileExtension",function(t,i,r){return n.isFileInputExtensionValid(i,r[0],r[1])},Vision.Resources.UI_Common_FileExtensionIsNotValid),n.validator.addMethod("checkBoxListRequired",function(t,i,r){var u=n.isEmpty(t);return u?r[0].addClass("input-validation-error"):r[0].removeClass("input-validation-error"),!u},Vision.Resources.UI_Common_CheckBoxList_RequireValidError))}(jQuery);var initCopyToWhenChange=function(){function n(n,t){n.is("input")||n.is("textarea")?n.val(t).trigger("change"):n.text(t).trigger("change")}$("input[copyToWhenChanged],textarea[copyToWhenChanged],select[copyToWhenChanged]").change(function(){var i=$(this).attr("copyToFuncWhenChanged"),r=null,t,u;r=i!=null&&i!=""?$.evalFunc(i)():$(this).is(":checkbox")?$(this).prop("checked"):$(this).val();t=$($(this).attr("copyToWhenChanged"));t.is(":checkbox")?t.prop("checked",r):$(this).is("select")?$(this).val()!=null&&$(this).val()!=""?(u=$("option[value="+$(this).val()+"]",$(this)).text(),n(t,u)):n(t,""):n(t,r)})},initializeMask=function(n,t){n=$.prepareTriggerOnloadParams(n,t);typeof $.prototype.mask!="undefined"&&$(n+"[inputMasked]input").each(function(){var n=$(this);if(n.attr("maskedPlaceHolder")?n.mask(n.attr("inputMasked"),{placeholder:n.attr("maskedPlaceHolder")}):n.mask(n.attr("inputMasked")),!n.attr("data-val-required"))n.on("focusout",function(){return $.isEmpty(n.val())&&n.removeClass("input-validation-error"),!1})});$(n+"[maskedType]input").each(function(){var n=$(this),t;n.attr("maskedType").toLowerCase()=="number"&&(t=0,n.attr("maskedMaxLength")&&(t=parseInt(n.attr("maskedMaxLength"))),n.keydown(function(i){i.keyCode==46||i.keyCode==8||i.keyCode==9||i.keyCode==27||i.keyCode==65&&i.ctrlKey===!0||i.keyCode>=35&&i.keyCode<=39||((i.keyCode<48||i.keyCode>57)&&(i.keyCode<96||i.keyCode>105)?i.preventDefault():n.val().length>=t&&i.preventDefault())}));n.attr("maskedType").toLowerCase()=="ext"&&(t=0,n.attr("maskedMaxLength")&&(t=parseInt(n.attr("maskedMaxLength"))),n.keydown(function(i){i.keyCode==46||i.keyCode==8||i.keyCode==9||i.keyCode==27||i.keyCode==65&&i.ctrlKey===!0||i.keyCode>=35&&i.keyCode<=39||(i.ctrlKey===!0&&i.keyCode==67||i.ctrlKey===!0&&i.keyCode==86||!(i.keyCode<48||i.keyCode>57)||!(i.keyCode<96||i.keyCode>105)?n.val().length>=t&&i.preventDefault():i.preventDefault())}))})},initializeTempAndTip=function(n,t){if(n=$.prepareTriggerOnloadParams(n,t),$.fn.poshytip){$(n+".vi-poshytip[title]").poshytip({alignX:"center"});$(n+".vi-poshytip[title].click-show").on("click",function(){var n=$(this),t=n.data("poshytip");t&&t.$tip.data("active")?n.poshytip("hide"):n.poshytip("show")})}$.fn.tempMessage&&$(n+".vi-temp-message-container").tempMessage()},initializeFieldToolTip=function(n,t){n=$.prepareTriggerOnloadParams(n,t);$.fn.poshytip&&($(n+".vi-fieldtooltip[title]").each(function(n,t){var i=$(t);if(i.poshytip({className:"tip-yellowsimple",alignTo:"target",showOn:"focus",alignX:"right",alignY:"center",offsetX:5}),i.hasClass("click-show"))i.on("click",function(){var n=$(this),t=n.data("poshytip");t&&t.$tip.data("active")?n.poshytip("hide"):n.poshytip("show")});i.closest(".vi-content").length>0&&i.data("poshytip").$tip.css("z-index",i.getZIndex()+1)}),$(n+".vi-fieldtooltip-top[title]").each(function(n,t){var i=$(t);i.poshytip({className:"tip-yellowsimple",alignTo:"target",showOn:"focus",alignX:"center",alignY:"top",offsetX:5});i.on("click",function(){var n=$(this),t=n.data("poshytip");t&&t.$tip.data("active")?n.poshytip("hide"):n.poshytip("show")});i.closest(".vi-content").length>0&&i.data("poshytip").$tip.css("z-index",i.getZIndex()+1)}))},__initializeNeedEnableForm=function(){$("form.front_end_form[need-ajax-submit='true'][need-enable-form-after-ready='true']").each(function(){var n=$(this),t=n.attr("need-enable-submit-buttons-class");typeof(t!="undefined")?n.find(t).prop("disabled",!1):n.find("input[type='submit']").prop("disabled",!1)})},initKendoMobileSwitch=function(n){n=n||document;$.fn.kendoMobileSwitch&&$(n).find(".onoffswitch-checkbox").each(function(n,t){var i=$(t);i.kendoMobileSwitch()})};$(function(){$.ajaxSettings.cache=!1;$(document).on("submit","form",function(){$(this).find("input[copyFromFuncWhenSubmit],textarea[copyFromFuncWhenSubmit]").each(function(n,t){var i=$.evalFunc($(t).attr("copyFromFuncWhenSubmit"));$(t).val(i())});$(this).find("input[copyFromWhenSubmit],textarea[copyFromWhenSubmit]").each(function(n,t){var i=$(t).attr("copyFromWhenSubmit");$(t).val($(i).val())});$(this).attr("data-has-editor")=="true"&&$(this).find("textarea.radeditor-textarea").attr("disabled","disabled");$(this).find("input.phone,input.fax").each(function(){var n=$(this).val(),t=n.replace(/[^\d]/ig,"");$(this).val(t)})});$(document).on("click","input.self-action[type='submit'],.self-action",function(n){if(n.isDefaultPrevented())n.stopPropagation();else{var t=$(this).attr("action");t&&($(this).closest("form").attr("action",t),$(this).attr("type")=="submit"&&this.tagName=="input"||$(this).closest("form").submit())}});$.unbindShowImageAnchorsClick();$("body").on("click","a[href!='#'][href]",function(){var i=$(this).attr("href")||"",t=$(this).attr("title")||$(this).text(),r=i.match(/[^'"]*?home\/showimage\s*(\?.*)/gi),n;if(r)return n=$("<img/>"),n.attr("src",$(this).attr("href")),$("body").loading(!0,{mask:!0}),n.error(function(){var n=$("<div><\/div>");n.addClass("show_image_error_message");n.html(Vision.Resources.FrontEnd_ShowImage_ErrorMessage);$.viClientDialog({title:t,html:n,useFrame:!1,width:200,height:100}).open();$("body").loading(null,null,!0)}),n.load(function(){var i=Math.min($(this).width(),$(window).width()-30),r=Math.min($(this).height(),$(window).height()-60);$(n).css({maxWidth:i,maxHeight:r});$.viClientDialog({title:t,html:$("<div><\/div>").append(n),useFrame:!1,padding:"0px 1px 0px 0px"}).open();$("body").loading(null,null,!0)}),$("body").append(n),!1});initCopyToWhenChange();$(".content-group-container select").change(function(){var n=$("input.copy-dest.cg-contentgroup");$(this).val()==""?n.val(""):n.val($($(this).find("option")[this.selectedIndex]).text())});$(".content-group-container").find("input[type='hidden']").length>0&&$("input.copy-dest.cg-contentgroup").val($(".content-group-container").find("select").text());$(".copy-placeholder-to-text[type='text']").focus(function(){var i=$(this).attr("placeholder"),n,t;$(this).val()==""&&($(this).val(i),$.support.placeholder||(n=this,n==null&&(n=event.srcElement),t=n.createTextRange(),t.moveStart("character",n.value.length),t.collapse(!0),t.select()))});$(".copy-placeholder-to-text[type='text']").blur(function(){var t=$(this).attr("placeholder"),n;$(this).val()==t&&($.support.placeholder?$(this).val(""):(n=$(this).attr("placeholder"),typeof n!="undefined"&&n!=""&&($(this).val()==""||$(this).val()==n)&&$(this).val($(this).attr("placeholder")).addClass("hasPlaceholder")))});$(document).on("keydown","input[type='password'].notallowpaste",function(n){if(n.ctrlKey&&n.keyCode==86)return!1});$(document).on("contextmenu","input[type='password']",function(){return!1});$.pushOnloadFunc(initializeTempAndTip,!0);$.pushOnloadFunc(initializeMask,!0);$.pushOnloadFunc(initializeFieldToolTip,!0);$.pushOnloadFunc(__initializeNeedEnableForm,!0);var n=function(){var n=$("input.need_update_field_name"),t;n.length>0&&(n.each(function(n,t){var i=$(t),f=i.attr("data-val-required"),e=i.attr("data-val-length"),r=i.attr("fieldValidationName"),u=i.attr("originalFieldName"),o=f.replace(u,r),s=e.replace(u,r);i.attr("data-val-required",o);i.attr("data-val-length",s)}),t=n.closest("form"),t.rebindUnobtrusiveValidation())};n()});$(function(){var n=$("ul.t-tabstrip-items li.t-item.vi-tab-lazy-load a.t-link");n.on("click",function(){var n=$(this),i;if(n.prop("actived")!=!0){var r=n.attr("actionurl"),u=n.attr("href").split("#")[1],t=n.closest("div.t-tabstrip").find("#"+u.toString());t.loading(!0,{mask:!0});i=$("#ContentGroup_ID").length>0&&$("#ContentGroup_ID").is("select")?$("#ContentGroup_ID").val():0;$.vision().get(r,{ContentGroupID:i},function(i){n.prop("actived",!0);setTimeout(function(){t.html(i);initializeMask("body");t.loading(null,null,!0)},300)})}})});$(function(){$("body").on("click",".vi-tabstrip-items .vi-item:not(.vi-state-active)",function(){$(".vi-tabstrip-items .vi-state-active").each(function(n,t){$(t).removeClass("vi-state-active");$($(t).attr("targetPanel")).hide()});$(this).addClass("vi-state-active");$($(this).attr("targetPanel")).show()})});$(function(){$("body").on("click",".scroll_container .scroll_commands .scroll_command",function(){var u=$(this),f=$(".scroll_container .scroll_list"),t=f.find(".scroll_item"),i=t.length,r=u.is(".pre"),n=t.width(),e=r?"-="+n:"+="+n;$(".scroll_container .scroll_list div.scroll_item").animate({left:e},{duration:500,easing:"linear",complete:function(){var t=$(this).position();r?(t.left==(1-i)*n&&$(this).css("left",n).removeClass("current"),t.left==-n&&$(this).addClass("current")):(t.left==(i-1)*n&&$(this).css("left",-n).removeClass("current"),t.left==0&&$(this).addClass("current"))}})})}),function(n){var t=function(){this.urlParams={};this.load()};t.prototype={load:function(n){this.urlParams={};var t,i,r,f=/\+/g,e=/([^&=]+)=?([^&]*)/g,u=function(n){return decodeURIComponent(n.replace(f," "))};for(n||(n=window.location.search),n.charAt(0)=="?"&&(n=n.substring(1));t=e.exec(n);)i=u(t[1]),r=u(t[2]),this.set(i,r);return this},toString:function(t){var r={hash:!1,traditional:!0},u,i;return t&&n.extend(r,t),u=jQuery.ajaxSettings.traditional,jQuery.ajaxSettings.traditional=r.traditional,i="?"+n.param(this.urlParams),jQuery.ajaxSettings.traditional=u,r.hash&&(i=i+encodeURI(window.location.hash)),i},set:function(t,i,r){return r=r||!1,r?this.urlParams[t]=i:t in this.urlParams?n.type(this.urlParams[t])==="array"?this.urlParams[t].push(i):this.urlParams[t]=this.urlParams[t]==""?i:[this.urlParams[t],i]:this.urlParams[t]=i,this},get:function(n){return this.urlParams[n]},remove:function(n){return n in this.urlParams&&delete this.urlParams[n],this}};n.query_string=new t}(jQuery),function(n){var t=function(n,t){this._init(n,t)};t.prototype={_target:null,_options:{currentDate:new Date,useDefaultNext:!0,useDefaultPrev:!0},_init:function(t,i){i=i||{};var r=this;r._target=n(t);r._options=n.extend(r._options,i);r._options.useDefaultNext&&n(t).find(".calendar_title .calendar_nextprev a.next").click(function(){r._redirectToMonth(r._options.currentDate,1)});r._options.useDefaultPrev&&n(t).find(".calendar_title .calendar_nextprev a.prev").click(function(){r._redirectToMonth(r._options.currentDate,-1)})},_redirectToMonth:function(t,i){var u=t.getFullYear(),o=t.getMonth()+1,f=o,e=u,r=o+i;i>0?(f=r<=12?r:1,e=r<=12?u:u+1):(f=r>=1?r:12,e=r>=1?u:u-1);n.query_string.set("curm",f,!0);n.query_string.set("cury",e,!0);window.location=n.query_string.toString()}};n.prototype.extend({viCalendar:function(i){n(this).data("data-viCalendar",new t(n(this),i))}})}(jQuery);$(function(){typeof $.prototype.tabs!="undefined"&&$.isFunction($.prototype.tabs)});var bindDateTimePicker=function(n,t,i){if(typeof $.prototype[t]!="undefined"){var r=i;$(n).each(function(n,i){var f=$(i),h=f.next(),e,u,o,s;h.is("a")&&h.hasClass("calendar_icon")||(e=$('<a class="calendar_icon"><span class="icon_button">Pick date from calendar<\/span><\/a>'),f.after(e),$(e).click(function(){f.focus()}));u={hourGrid:3,minuteGrid:15,enableInput:!0,filterTime:null,updateDateTimeCallback:function(n,t,i){var r=n._defaults;if(r.filterTime){var u=JSON.parse(r.filterTime),f={hour:u.Hour,minute:u.Minute},e=$.datepicker.formatTime(r.timeFormat,f,r);return e.toLowerCase()==n.formattedTime.toLowerCase()?i:i+(r.separator+n.formattedTime+r.timeSuffix)}return i+(r.separator+n.formattedTime+r.timeSuffix)},separator:" ",yearRange:"c-50:c+20"};o=f.attr("date_time_picker_option");typeof o!="undefined"&&(u=$.extend(u,JSON.parse(o)),u.onClose&&typeof u.onClose=="string"&&(u.onClose=$.evalFunc(u.onClose)),u.onSelect&&typeof u.onSelect=="string"&&(u.onSelect=$.evalFunc(u.onSelect)),u.beforeShowDay&&typeof u.beforeShowDay=="string"&&(u.beforeShowDay=$.evalFunc(u.beforeShowDay)),u.minDate&&typeof u.minDate=="string"&&(u.minDate=new Date(u.minDate)),u.maxDate&&typeof u.maxDate=="string"&&(u.maxDate=new Date(u.maxDate)),u.showNowButton&&typeof u.showNowButton=="boolean"&&(u.showNowButton=u.showNowButton),u.renderDate&&typeof u.renderDate=="string"&&(u.renderDate=$.evalFunc(u.renderDate)));f[t](u);s=f.closest("form");s.on("submit",function(){var n=s.data("validator");n&&n.valid()&&f.val($.datepicker.replaceDotInTime(f.val()))});u.enableInput||f.keydown(function(n){var t=n.which;if(t!=8)return!1});typeof r!="undefined"&&$.isFunction(r)&&r(i,u)})}},bindAllDateTimePicker=function(n){typeof n=="object"?(bindDateTimePicker($(n).find(".ui_need_date_time_picker"),"datetimepicker",function(n){$(n).val()&&$(n).datetimepicker("setDate",new Date($(n).val()))}),bindDateTimePicker($(n).find(".ui_need_date_picker"),"datepicker",function(n){if($(n).val()){var t=new Date($(n).datepicker("getDate"));$(n).datepicker("setDate",t)}}),bindDateTimePicker($(n).find(".ui_need_time_picker"),"timepicker")):(n=n||"",bindDateTimePicker(n+".ui_need_date_time_picker","datetimepicker",function(n){$(n).val()&&$(n).datetimepicker("setDate",new Date($(n).val()))}),bindDateTimePicker(n+".ui_need_date_picker","datepicker",function(n){if($(n).val()){var t=new Date($(n).datepicker("getDate"));$(n).datepicker("setDate",t)}}),bindDateTimePicker(n+".ui_need_time_picker","timepicker"))},initializeDotdotdot=function(n){if($.fn.dotdotdot){n=n||document;var t=$(n).find("[data-ellipsis='true']");t.addClass("ellipsis").dotdotdot({watch:!0,wrap:"letter",fallbackToLetter:!0,tolerance:0})}};$(function(){function i(){var t=$(window).scrollTop(),n=$(".page_title");if(n.length>0){var i=n.offset().top,r=$(window).height(),u=$("#header_nav").outerHeight(!0),f=$("#toppanel").outerHeight(!0);t>i&&f<r-u?$("#toppanel").addClass("sticky"):$("#toppanel").removeClass("sticky");$("#toppanel").data("isRadEditorFullScreen")&&$("#toppanel").removeClass("sticky");setInlineEditorToolBarPosition("#toppanel")}}function r(){var t=$(window).scrollTop(),i,n;if($(".page_title").length>0){if(i=$(".page_title").offset().top+150,t>i){if(!$("#WidgetTabControl").hasClass("sticky")){var r=$("#WidgetTabControl").height(),u=$(window).height(),f=$(document).height();u<f-t-r&&(n=$(".RadEditor.reToolbarWindow.reWrapper:visible"),n.length!=0&&n.offset({top:n.offset().top-$("#WidgetTabControl").outerHeight(!0)}),$("#WidgetTabControl").addClass("sticky"))}}else $("#WidgetTabControl").hasClass("sticky")&&(n=$(".RadEditor.reToolbarWindow.reWrapper:visible"),n.length!=0&&n.offset({top:n.offset().top+$("#WidgetTabControl").outerHeight(!0)}),$("#WidgetTabControl").removeClass("sticky"));$("#toppanel").data("isRadEditorFullScreen")&&$("#toppanel").removeClass("sticky");setInlineEditorToolBarPosition("#WidgetTabControl")}}var n,t,e;if($("#toolbar .toggle").click(function(){var n,t;if($("#toolbar ul").is(":hidden"))n="#toolbar ul, #toolbar .toolbar_title",$(".task_settings_pane>ol>li.task_item:not(.disabled)").length>0&&(n+=", #toolbar .tools"),$(n).slideDown("400"),$("#toolbar").toggleClass("closed"),$.cookie("data-my-task","visible",{path:"/"}),$("#toppanel")&&$("#toppanel").css("margin-top","0");else if(t=document.getElementById("toolbar"),t){var i=t.clientHeight,r=parseInt(i)-10,u="-"+r+"px";$("#toolbar ul, #toolbar .toolbar_title, #toolbar .tools").slideUp("400",function(){$("#toolbar").toggleClass("closed")});$.cookie("data-my-task","hidden",{path:"/"})}}),$.cookie("data-my-task")=="hidden"){if(n=document.getElementById("toolbar"),n){var u=n.clientHeight,f=parseInt(u)-10,o="-"+f+"px";$("#toolbar ul").css("display","none");$("#toolbar").toggleClass("closed")}}else $("#toolbar ul").css("display","block"),$("#toppanel")&&$("#toppanel").css("margin-top","0");$(function(){document.getElementById("toppanel")&&$(window).width()>480&&($(window).scroll(function(){return i(),!1}),i())});$(function(){document.getElementById("WidgetTabControl")&&$(window).width()>480&&($(window).scroll(r),r())});$(function(){function t(){var t=$(window).scrollTop(),n;$(".front_end_body").length>0&&(n=$(".front_end_body").offset().top,t>n?$("#top_bar").addClass("sticky"):$("#top_bar").removeClass("sticky"))}function i(){var n=$("#body_place_holder").offset();$("div#toppanel").css({top:n&&n.top>0?n.top:221,display:"block"})}if(document.getElementById("top_bar")&&$(window).width()>480&&($(window).scroll(t),t()),document.getElementById("toppanel")){var n;$(window).on("resize",function(){n&&clearTimeout(n);n=setTimeout(i,100)})}$("#icon_legend .toggle").click(function(){$("#icon_legend .legend_list").is(":hidden")?($("#icon_legend .legend_list").slideDown("400"),$("#icon_legend").toggleClass("closed"),$.cookie("data-legend","visible")):($("#icon_legend .legend_list").slideUp("400",function(){$("#icon_legend").toggleClass("closed")}),$.cookie("data-legend","hidden"))});$("tr").not(":first-child").find(".release_notes_version").click(function(){var n=$(this).parent().find(".release_notes_note");n.toggle();$(this).toggleClass("notesShown")});$(".sidenav .mobile_header").click(function(){$(this).parent().toggleClass("open")});window.resetLeftNavigationMobileStyle=function(){if($(".sidenav").length>0){var n=$(".sidenav .sidenav_expanded.sidenav_current"),t=n.parents(".sidenav_expanded");$(window).width()<648?(n.siblings().hide(),n.find(" > a").hide(),t.siblings().hide(),t.find(" > a").hide(),$(".sidenav .sidenav_current").length>0&&n.length==0&&$(".sidenav h2").css("display","none")):(n.siblings().show(),n.find(" > a").show(),t.siblings().show(),t.find(" > a").show(),$(".sidenav .sidenav_current").length>0&&n.length==0&&$(".sidenav h2").css("display","block"))}};window.resetLeftNavigationMobileStyle();$(window).resize(function(){window.resetLeftNavigationMobileStyle()});$("body").on("click",".settingicon",function(n){$(n.target).closest(".search_area").find(".search_settings_pane").slideToggle("400");$(n.target).closest(".content-filter-widget").find(".frontend-search-settings-pane").slideToggle("400");$(n.target).closest(".common-search-box").find(".common-search-settings-pane").slideToggle("400")});$(document).click(function(n){!$(n.target).closest(".search_area").length>0&&$(".search_settings_pane").slideUp("400");!$(n.target).closest(".content-filter-widget").length>0&&$(".frontend-search-settings-pane").slideUp("400");!$(n.target).closest(".common-search-box").length>0&&$(".common-search-settings-pane").slideUp("400")});$("#toolbar .tools_show_list").click(function(){$(this).toggleClass("active");$("#toolbar").toggleClass("show_task_items");$(".task_settings_pane").slideToggle("400")});$(document).click(function(n){!$(n.target).closest(".task_settings_pane").length>0&&$(n.target).is(":not(.tools_show_list)")&&$("#toolbar .tools_show_list").is(".active")&&($("#toolbar").toggleClass("show_task_items"),$("#toolbar .tools_show_list").toggleClass("active"),$(".task_settings_pane").slideUp("400"))});bindAllDateTimePicker();initializeDotdotdot();$(".character-count-input").characterCounter({maxLength:140,ignoreCustomMsg:!0,container:function(n){return $(n).parent().parent()}});$(window).scroll(function(){$(this).scrollTop()>100?$(".backToTop").fadeIn():$(".backToTop").fadeOut()});$(".backToTop").click(function(){return $("body,html").animate({scrollTop:0},200),!1})});t=function(n){var f="\t",t=n.target,r=t.selectionStart,u=t.selectionEnd,s;if(n.keyCode==9)if(n.preventDefault(),r!=u&&t.value.slice(r,u).indexOf("\n")!=-1){var e=t.value.slice(0,r),i=t.value.slice(r,u),o=t.value.slice(u,t.value.length);s=i.match(/\n(\t){1}/g)?i.match(/\n(\t){1}/g).length+1:i.split(/\n/).length;n.shiftKey?(i.match(/^(\t){1}/m)||i.match(/\n(\t){1}/g))&&(i=i.replace(/^(\t){1}/m,""),i=i.replace(/\n(\t){1}/g,"\n"),t.value=e.concat(i).concat(o),t.selectionStart=r,t.selectionEnd=u-s*f.length):(i=i.replace(/\n/g,"\n"+f),t.value=e.concat(f).concat(i).concat(o),t.selectionStart=r,t.selectionEnd=u+s*f.length)}else if(n.shiftKey){if(r!=u){var e=t.value.slice(0,r),o=t.value.slice(u,t.value.length),i=t.value.slice(r,u);i.match(/^(\t){1}/)&&(i=i.replace(/^(\t){1}/,""),t.value=e.concat(i).concat(o),t.selectionStart=r,t.selectionEnd=u-f.length)}}else t.value=t.value.slice(0,r).concat(f).concat(t.value.slice(r,t.value.length)),r==u?t.selectionStart=t.selectionEnd=r+f.length:(t.selectionStart=r,t.selectionEnd=u+f.length)};e=function(n){$(n).keypress(function(n){t(n)})};$(document).on("keydown",".need_tab_hotkey",function(n){t(n)});$(document).on("keydown","input.button_invoker[data-invoke-target]",function(n){n.keyCode==13&&$($(this).attr("data-invoke-target")).click()})});$(function(){if($("div.RadEditor:not(:visible)").length>0){$("body").on("click",".t-item a.t-link",function(){resizeTelerik($(this).attr("href"))});$("body .radeditor-visible-trigger").each(function(){if($(this).is("input,select"))$("body").on("change",this,function(){var n=$(this).attr("data-radeditor-trigger-container")||"body";resizeTelerik(n)})})}});$(function(){if(typeof Telerik!="undefined"){var n=Telerik.Web.UI.Editor.Modules.RadEditorNodeInspector.prototype._onToolValueSelected;Telerik.Web.UI.Editor.Modules.RadEditorNodeInspector.prototype._onToolValueSelected=function(t){n.apply(this,arguments);t&&Telerik.Web.UI.EditorTextBox.isInstanceOfType(t)&&(t._inputElement.Executed=!1)}}});$(function(){if(jQuery.support.placeholder=!1,test=document.createElement("input"),"placeholder"in test&&(jQuery.support.placeholder=!0),!$.support.placeholder){var n=null;window.top!=window&&window.focus();try{n=document.activeElement}catch(t){}$(":text,textarea").focus(function(){var n=$(this).attr("placeholder");typeof n!="undefined"&&n!=""&&$(this).val()==n&&$(this).val("").removeClass("hasPlaceholder")}).blur(function(){var n=$(this).attr("placeholder");typeof n!="undefined"&&n!=""&&($(this).val()==""||$(this).val()==n)&&$(this).val($(this).attr("placeholder")).addClass("hasPlaceholder")});$(":text,textarea").each(function(){var n=$(this).attr("placeholder");typeof n!="undefined"&&n!=""&&($(this).val()==""||$(this).val()==n)&&$(this).val($(this).attr("placeholder")).addClass("hasPlaceholder")});n!=null&&$(n).focus();$("form").submit(function(){$(this).find(".hasPlaceholder").each(function(){$(this).val("")})})}});$(function(){$(document).on("submit","form.front_end_form[need-ajax-submit='true']",function(n){var t,o,e;try{if(typeof $(this).validate=="undefined"||$(this).valid()){t=$(this);o=t.serializeArray();t.find(".post-json-info[data-post-target]").each(function(){var i=$(this),r=i.val(),u,n,t;if(r){u=i.attr("data-post-target");n=JSON.parse(r);for(t in n)n[t]!=null&&o.push({name:u+"."+t,value:n[t]+""})}});var s=t.attr("formContainer")||".front_end_form_container",r=t.closest(s),u=t.attr("needLoading")||!1,h=t.attr("data-doNotClearLoading")||!1,f=t.attr("loadingContainer")||"",i=r;f!=""&&(i=f=="parent"?t.parent():f=="self"?t:t.closest(f));e=t.attr("loadingText");u&&(e!=undefined&&e!=""?i.loading(!0,{mask:!0,text:e}):i.loading(!0,{mask:!0,opacity:.8}));$.frontendAjax({url:t.attr("action"),type:t.attr("method")||"POST",dataType:"html",data:o,success:function(n){var o,f,s,e;if(n&&$("<div>"+n+"<\/div>").find(".error_page.page_title").length>0){alert(Vision.Resources.UI_Common_FrontendFormPostFailed);u&&i.loading(null,null,!0);return}o=t.attr("need-write-proxy")||!1;f="";o&&(document.write=document.writeln=function(n){f+=n});s=t.attr("data-replace-self")||"false";s.toLowerCase()=="true"?r.replaceWith(n):r.html(n);e=t.attr("write-proxy")||"";e==""?r.append(f):r.find(e).append(f);u&&!h&&i.loading(null,null,!0)},error:function(){alert(Vision.Resources.UI_Common_FrontendFormPostFailed);u&&i.loading(null,null,!0)}})}}catch(c){n.preventDefault();n.stopPropagation();alert("JS Error Occurred:"+c.message);window.location.href=window.location.href}n.preventDefault();n.stopPropagation()})});$(function(){$(document).on("click","[widgetAjaxUrl][widgetAjaxTarget]",function(){var n=$(this),r=n.attr("widgetAjaxUrl"),o=n.attr("widgetAjaxTarget"),u=n.attr("widgetAjaxData"),i={};typeof u!="undefined"&&(i=JSON.parse(u));var f=n.attr("widgetAjaxReplace"),e=typeof f!="undefined"&&parseInt(f)==1,t=n.closest(o);return $.vision?$.vision().ajax({url:r,dataType:"html",data:i,success:function(n){e?t.replaceWith(n):t.html(n)}}):$.frontendAjax({url:r,dataType:"html",data:i,success:function(n){e?t.replaceWith(n):t.html(n)}}),!1})});$(function(){function n(n,t){$.frontendAjax({url:t,type:"POST",dataType:"json",data:{showTopTips:n},success:function(){}})}$("#alert_controls").click(function(){var i=$(this).attr("class"),t=$(this).attr("data-action");i=="hide"?($(document).find(".important_alert_wrapper").slideUp("150"),$(this).attr("class","show"),n(!1,t)):($(document).find(".important_alert_wrapper").slideDown("150"),$(this).attr("class","hide"),n(!0,t))})});$(function(){$("body").on("click","fieldset.collapse > legend.collapse_handle, fieldset.collapse > legend a.collapse_handle",function(){var t=$(this).is("legend")?$(this):$(this).closest("legend"),n=t.siblings();n.is(":visible")?(n.hide(),$(this).removeClass("expanded")):(n.show(),$(this).addClass("expanded"))})}),function(n){function i(i,r){var c=r.val(),o=n(i).val(),l=t.test(c,o),u=l.status,f,s,h,e;f=u=="weak"?"#D21C2B":u=="good"?"#2281CF":"#6ec02a";s=u=="weak"?"25px":u=="good"?"45px":"70px";h=u=="weak"?"3px 0px 0px 3px":u=="good"?"3px 0px 0px 3px":"3px 3px 3px 3px";u=="weak"?e=n.fn.PasswordStrength.defaults.WeakText:u=="good"?e=n.fn.PasswordStrength.defaults.GoodText:u=="strong"&&(e=n.fn.PasswordStrength.defaults.StrongText);o.length>=1?(n("#pstrength_text_parent").html("<span class='pstrength_text'>"+e+"<\/span>"),n(".pstrength_childbar").animate({width:s},"fast"),n(".pstrength_childbar").css({"background-color":f,"border-radius":h}),n(".pstrength_text").css("color",f),n(".pstrength_content").show()):o.length==0?n(".pstrength_content").hide():(n("#pstrength_text_parent").html("<span class='pstrength_text'>"+e+"<\/span>"),n(".pstrength_childbar").animate({width:s},"fast"),n(".pstrength_childbar").css({"background-color":f,"border-radius":h}),n(".pstrength_text").css("color",f))}var t=function(){var u=/[0-9]/,f=/[a-z]/,e=/[A-Z]/,o=/[^0-9a-zA-Z]/,s=8,n=0,t=3,i=4,r=5;this.username=null;this.password=null;this.score=0;this.status=null;this.containInvalidMatches=function(){return this.exclude?this.exclude.test?this.exclude.test(this.password.toString()):!1:!1};this.test=function(){return this.score=0,this.containInvalidMatches()?this.status="invalid":(this.password.length>=s&&(this.score+=this.scoreFor("numbers"),this.score+=this.scoreFor("lowercase"),this.score+=this.scoreFor("uppercase"),this.score+=this.scoreFor("special")),this.score<n&&(this.score=n),this.score>r&&(this.score=r),this.score<t&&(this.status="weak"),this.score>=t&&this.score<i&&(this.status="good"),this.score>=i&&(this.status="strong")),this.score};this.scoreFor=function(n){score=0;switch(n){case"numbers":this.password.match(u)&&score++;break;case"lowercase":this.password.match(f)&&score++;break;case"uppercase":this.password.match(e)&&score++;break;case"special":this.password.match(o)&&score++;break;case"username":this.password==this.username?score=0:this.password.indexOf(this.username)!=-1&&(score=-1)}return score};this.isGood=function(){return this.status=="good"};this.isWeak=function(){return this.status=="weak"};this.isStrong=function(){return this.status=="strong"};this.isInvalid=function(){return this.status=="invalid"};this.isValid=function(n){return n=="strong"?this.isStrong():n=="good"?this.isStrong()||this.isGood():!this.containInvalidMatches()};this.sequences=function(n){for(var e=0,r=0,u=[],o=n.length,t,i,f=0;f<o;f++)i=n.charCodeAt(f),t=u[u.length-1],u.push(i),t&&(i==t+1||t==i?r+=1:r=0),r==2&&(e+=1);return e};this.repetitions=function(n,t){for(var e=0,o={},s=n.length,i,f,u,r=0;r<s;r++)if(i=n.substr(r,t),f=0,u=n,!o[i]&&!(i.length<t)){for(o[i]=!0;(r=u.indexOf(i))!=-1;)f+=1,u=u.substr(r+1);f>1&&(e+=1)}return e};this.reversed=function(n){for(var i="",r=n.length,t=r-1;t>=0;t--)i+=n.charAt(t);return i}};t.test=function(n,i){return strength=new t,strength.username=n,strength.password=i,strength.test(),strength};n.fn.PasswordStrength=function(t){var r=n.extend({},n.fn.PasswordStrength.defaults,t);return this.each(function(t,u){var f=n(u),e=f.parent();e.find("#pwdstr").length==0&&e.append('<div id="pwdstr" class="pstrength_content"><span class="pwdbar"><span class="pstrength_childbar"><\/span><\/span><span id="pstrength_text_parent" class="pwdbarspan"><\/span><\/div>');f.on("keyup",function(){var t=n(r.UserName);i(this,t)})})};n.fn.PasswordStrength.defaults={UserName:"UserName",WeakText:Vision.Resources.UI_Common_PasswordStrength_WeakText,GoodText:Vision.Resources.UI_Common_PasswordStrength_GoodText,StrongText:Vision.Resources.UI_Common_PasswordStrength_StrongText}}(jQuery),function(n){function t(i){this.opts=n.extend({},t.defaults,i);this._window=window.top;this._window._timeoutIDForSessionExpirationAtFrontEnd=null;this.sessionExtendPath=this.opts.virtualApplicationPath+this.opts.extendSessionTimeoutPath}t.defaults={virtualApplicationPath:"/",frontendUserLogin:!1,backendUserLogin:!1,useSessionTimeout:!0,sessionTimeoutInMinutes:20,timeToAlertBeforeSessionTimeoutInMinutes:5,extendSessionTimeoutPath:"Home/FrontEndExtendSessionTimeout",sessionExtensionMode:"server"};t.prototype={ajax:function(t,i){var r,u;this.opts.frontendUserLogin===!0?(r=this.opts.useSessionTimeout,typeof t=="object"&&t.useSessionTimeout?r=t.useSessionTimeout:i&&i.useSessionTimeout&&(r=i.useSessionTimeout),r===!0?(u=this.opts.sessionExtensionMode,typeof t=="object"&&t.sessionExtensionMode?u=t.sessionExtensionMode:i&&i.sessionExtensionMode&&(u=i.sessionExtensionMode),u==="client"?this.extendSessionTimeout(function(){n.ajax(t,i)}):(typeof t=="object"?(t.success=this._wrapSessionExtensionSuccess(t.success),t.headers={ExtendSession:!0}):(i=i||{},i.success=this._wrapSessionExtensionSuccess(i.success),i.headers={ExtendSession:!0}),n.ajax(t,i))):n.ajax(t,i)):n.ajax(t,i)},_wrapSessionExtensionSuccess:function(t){if(this.opts.frontendUserLogin===!0){var i=this;return function(r,u,f){var e=JSON.parse(f.getResponseHeader("SessionInfo")||"");e&&e.IsAuth?(i.setTimerForSessionExpiration(e.Timeout,e.TimeToAlert),i.refreshToken(e.Token),n.isFunction(t)&&t(r,u,f)):(i._window.alert(Vision.Resources.FrontEndSessionTimeout_SessionExpired),i.refreshToken(""),i._window.location.href=i._window.location.href)}}return t},extendSessionTimeout:function(t,i){var r=this;this.opts.frontendUserLogin===!0?n.ajax({type:"POST","async":!0,url:r.sessionExtendPath,success:function(i){try{typeof i.SessionTimeoutInMinutes=="undefined"&&typeof i.TimeToAlertBeforeSessionTimeoutInMinutes=="undefined"?(r._window.alert(Vision.Resources.FrontEndSessionTimeout_SessionExpired),r.refreshToken(""),r._window.location.href=r._window.location.href):(r.setTimerForSessionExpiration(i.SessionTimeoutInMinutes,i.TimeToAlertBeforeSessionTimeoutInMinutes),r.refreshToken(i.Token),n.isFunction(t)&&t())}catch(u){}}}):i||this.opts.frontendUserLogin!==!0?n.ajax({type:"POST","async":!0,data:{onlyToken:!0},url:r.sessionExtendPath,success:function(i){try{r.refreshToken(i.Token);n.isFunction(t)&&t()}catch(u){}}}):n.isFunction(t)&&t()},extendSessionTimeoutSync:function(){var t=this;this.opts.frontendUserLogin===!0?n.ajax({type:"POST","async":!1,url:t.sessionExtendPath,success:function(n){try{typeof n.SessionTimeoutInMinutes=="undefined"&&typeof n.TimeToAlertBeforeSessionTimeoutInMinutes=="undefined"?(t._window.alert(Vision.Resources.FrontEndSessionTimeout_SessionExpired),t.refreshToken(""),t._window.location.href=t._window.location.href):(t.setTimerForSessionExpiration(n.SessionTimeoutInMinutes,n.TimeToAlertBeforeSessionTimeoutInMinutes),t.refreshToken(n.Token))}catch(i){}}}):(onlyToken||this.opts.frontendUserLogin!==!0)&&n.ajax({type:"POST","async":!1,data:{onlyToken:!0},url:t.sessionExtendPath,success:function(n){try{t.refreshToken(n.Token)}catch(i){}}})},setTimerForSessionExpiration:function(n,t){var i,r;this.opts.frontendUserLogin===!0&&(n=n||this.opts.sessionTimeoutInMinutes,t=t||this.opts.timeToAlertBeforeSessionTimeoutInMinutes,i=window.parseInt(n)*6e4-window.parseInt(t)*6e4,this._window._timeoutIDForSessionExpirationAtFrontEnd!=null&&(this._window.clearTimeout(this._window._timeoutIDForSessionExpirationAtFrontEnd),this._window._timeoutIDForSessionExpirationAtFrontEnd=null),r=this,this._window._timeoutIDForSessionExpirationAtFrontEnd=this._window.setTimeout(function(){r.promptSessionTimeout(n,t)},i))},promptSessionTimeout:function(t,i){if(this.opts.frontendUserLogin===!0){this._window.focus();var r=n.format(Vision.Resources.FrontEndSessionTimeout_SessionTip,i,t),u=this._window.confirm(r);u&&this.extendSessionTimeout(function(){})}},refreshToken:function(n){this._window.visionApps&&(this._window.visionApps.token=n)}};n.extend(n,{frontendSessionManager:function(i){var r=n("body").data("FrontEndSessionManager");return r?(r.opts=n.extend(r.opts,i),n("body").data("FrontEndSessionManager",r),r):(r=new t(i),n("body").data("FrontEndSessionManager",r),r)}})}(jQuery),function(n){n.extend(n,{frontendAjax:function(t,i){n.frontendSessionManager().ajax(t,i)}});n.prototype.extend(n.prototype,{loadAsyncContainer:function(){n(this).each(function(t,i){var r=n(i),e=r.height(),u=!1,f=r.attr("data-async-url");f&&(u&&n(r).loading(!0,null),n.frontendAjax(f,{success:function(t){r.replaceWith(t);u&&n(r).loading(null,{hideCurrent:!0},!0)},error:function(){u&&n(r).loading(null,{hideCurrent:!0},!0)}}))})}});n.scriptsStack.add(function(){n(".async_widget_container:not(.custominvoke)").loadAsyncContainer()})}(jQuery);$(function(){$(".page.edit").length<=0&&$(".column").each(function(){$(this).find(".need_hide_detail_widget").length>0&&$(this).find(".normal_content_area").each(function(n,t){$(t).parents(".mainnav").length==0&&($(t).hide(),$(t).remove())})});$("body").on("click",".ele_load_detailview_incurrentpage input:radio",function(){var n=$(this).val().toLowerCase();n=="true"?(typeof $(".ele_hide_contentareawidget_indetailview").attr("data-info")=="undefined"||$(".ele_hide_contentareawidget_indetailview").attr("data-info")=="is_list_view")&&$(".ele_hide_contentareawidget_indetailview").show():($(".ele_hide_contentareawidget_indetailview").hide(),$("input[name='Setting.HideContentAreaWidgetInDetailView'][value='False']").prop("checked",!0),$(".ele_hide_contentareawidget_indetailview").find("input:checkbox:checked").trigger("click"))});$("body").on("change","ol.formlist li.is_include_category_li :radio",function(){var n=$(this).val()==$("#UsedForCategoryConstraint").val();$.widgetSettingDisplayCategory(n)});$("body").on("change","tr.is_include_category_tr td.setting_td .is_include_category_li > :radio",function(){var n=$(this).val()==$("#UsedForCategoryConstraint").val();$.widgetDevSettingDisplayCategory(n)});$("body").on("click",".include_category_tr .display_td :checkbox",function(n,t){if(t!="false"){var i=$(this);i.prop("checked")?$(".exclude_category_tr .display_td :checkbox").siblings(".display_field_value_hidden").length<1&&$(".exclude_category_tr .display_td :checkbox").trigger("click",["false"]):$(".exclude_category_tr .display_td :checkbox").siblings(".display_field_value_hidden").length>=1&&$(".exclude_category_tr .display_td :checkbox").trigger("click",["false"])}});$("body").on("click",".exclude_category_tr .display_td :checkbox",function(n,t){if(t!="false"){var i=$(this);i.prop("checked")?$(".include_category_tr .display_td :checkbox").siblings(".display_field_value_hidden").length<1&&$(".include_category_tr .display_td :checkbox").trigger("click",["false"]):$(".include_category_tr .display_td :checkbox").siblings(".display_field_value_hidden").length>=1&&$(".include_category_tr .display_td :checkbox").trigger("click",["false"])}});$("body").on("click",".vi-expandable-tree li > a:not(.item)",function(){var n=$(this).closest("li");n.hasClass("expanded")?n.removeClass("expanded"):n.addClass("expanded")})}),function(n){n.extend(n,{widgetSettingDisplayCategory:function(t){var i=n("#UsedForCategoryConstraint").data("settingCategoryHtmlData");t.toString().toLowerCase()=="true"?(n("ol.formlist li.include_category_li").length<=0&&n("ol.formlist li.is_include_category_li").after(i),n("ol.formlist li.exclude_category_li").length>0&&n("#UsedForCategoryConstraint").data("settingCategoryHtmlData",n("ol.formlist li.exclude_category_li").detach()),n("ol.formlist li.include_category_li").removeClass("hidden").show()):(n("ol.formlist li.exclude_category_li").length<=0&&n("ol.formlist li.is_include_category_li").after(i),n("ol.formlist li.include_category_li").length>0&&n("#UsedForCategoryConstraint").data("settingCategoryHtmlData",n("ol.formlist li.include_category_li").detach()),n("ol.formlist li.exclude_category_li").removeClass("hidden").show())},widgetDevSettingDisplayCategory:function(t){var i=n("#UsedForCategoryConstraint").data("devSettingCategoryHtmlData");t.toString().toLowerCase()=="true"?(n("div.widget_dev_setting table td.include_category_td").length<=0&&n("div.widget_dev_setting table tr.include_category_tr").append(i),n("div.widget_dev_setting table td.exclude_category_td").length>0&&n("#UsedForCategoryConstraint").data("devSettingCategoryHtmlData",n("div.widget_dev_setting table td.exclude_category_td").detach()),n("div.widget_dev_setting table tr.include_category_tr").removeClass("hidden").show(),n("div.widget_dev_setting table tr.exclude_category_tr").hide()):(n("div.widget_dev_setting table td.exclude_category_td").length<=0&&n("div.widget_dev_setting table tr.exclude_category_tr").append(i),n("div.widget_dev_setting table td.include_category_td").length>0&&n("#UsedForCategoryConstraint").data("devSettingCategoryHtmlData",n("div.widget_dev_setting table td.include_category_td").detach()),n("div.widget_dev_setting table tr.exclude_category_tr").removeClass("hidden").show(),n("div.widget_dev_setting table tr.include_category_tr").hide())}})}(jQuery);template=function(n,t){return template[typeof t=="object"?"render":"compile"].apply(template,arguments)},function(n,t){"use strict";n.version="1.4.0";n.openTag="<%";n.closeTag="%>";n.parser=null;n.render=function(n,t){var i=l(n);return i===undefined?e({id:n,name:"Render Error",message:"Not Cache"}):i(t)};n.compile=function(t,r){function f(i){try{return new u(i).template}catch(f){return o?(f.id=t||r,f.name="Render Error",f.source=r,e(f)):n.compile(t,r,!0)(i)}}var o=arguments[2],u;typeof r!="string"&&(o=r,r=t,t=null);try{u=c(r,o)}catch(s){return s.id=t||r,s.name="Syntax Error",e(s)}return f.prototype=u.prototype,f.toString=function(){return u.toString()},t&&(i[t]=f),f};n.helper=function(n,t){f[n]=t};var i={},r="".trim,s=r&&!t.document,o={},u=function(){var n=Array.prototype.forEach||function(n,t){for(var r=this.length>>>0,i=0;i<r;i++)i in this&&n.call(t,this[i],i,this)};return function(t,i){n.call(t,i)}}(),h=Object.create||function(n){function t(){}return t.prototype=n,new t},f=n.prototype={$forEach:u,$render:n.render,$getValue:function(n){return n===undefined?"":n}};u("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield".split(","),function(n){o[n]=!0});var c=function(t,i){function d(n){return l+=n.split(/\n/).length-1,n=n.replace(/('|"|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),n=s[1]+"'"+n+"'"+s[2],n+"\n"}function rt(n){var t=l;return v?n=v(n):i&&(n=n.replace(/\n/g,function(){return l++,"$line="+l+";"})),n.indexOf("=")===0&&(n=n.substring(1).replace(/[\s;]*$/,""),r&&(n="$getValue("+n+")"),n=s[1]+n+s[2]),i&&(n="$line="+t+";"+n),ut(n),n+"\n"}function ut(n){n=n.replace(/\/\*.*?\*\/|'[^']*'|"[^"]*"|\.[\$\w]+/g,"");u(n.split(/[^\$\w\d]+/),function(n){if(/^this$/.test(n))throw{message:'Prohibit the use of the "'+n+'"'};!n||o.hasOwnProperty(n)||/^\d/.test(n)||y.hasOwnProperty(n)||(ft(n),y[n]=!0)})}function ft(n){var t;t=n==="print"?tt:n==="include"?it:f.hasOwnProperty(n)?"$helpers."+n:"$data."+n;p+=n+"="+t+","}var g=n.openTag,nt=n.closeTag,v=n.parser,e=t,c="",l=1,y={$out:!0,$line:!0},p="var $helpers=this,"+(i?"$line=0,":""),s=r?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],w=r?"if(content!==undefined){$out+=content;return content}":"$out.push(content);",tt="function(content){"+w+"}",it="function(id,data){if(data===undefined){data=$data}var content=$helpers.$render(id,data);"+w+"}",a,b;u(e.split(g),function(n){n=n.split(nt);var t=n[0],i=n[1];n.length===1?c+=d(t):(c+=rt(t),i&&(c+=d(i)))});e=c;i&&(e="try{"+e+"}catch(e){e.line=$line;throw e}");e=p+s[0]+e+"this.template="+s[3];try{return a=new Function("$data",e),b=a.prototype=h(f),b.toString=function(){return this.template},a}catch(k){k.temp="function anonymous($data) {"+e+"}";throw k;}},l=function(t){var u=i[t],r;if(u!==undefined||s){if(i.hasOwnProperty(t))return u}else return r=document.getElementById(t),r&&n.compile(t,r.value||r.innerHTML),i[t]},e=function(n){function r(){return r+""}var i="[template]:\n"+n.id+"\n\n[name]:\n"+n.name;return n.message&&(i+="\n\n[message]:\n"+n.message),n.line&&(i+="\n\n[line]:\n"+n.line,i+="\n\n[source]:\n"+n.source.split(/\n/)[n.line-1].replace(/^[\s\t]+/,"")),n.temp&&(i+="\n\n[temp]:\n"+n.temp),t.console&&console.error(i),r.toString=function(){return"{Template Error}"},r}}(template,this);typeof module!="undefined"&&module.exports&&(module.exports=template),function(n){var t=function(t,i){var r={addTrigger:".addlink",removeTrigger:".deletelink:not(.disabled)",leastOne:!0,itemSelector:null,allowMaxNumber:100,maxRowIndex:0,init:function(){},generateJson:function(){},rowTemplate:function(){},insertRowCall:function(){},beforeRemoveRowCall:function(){},removeRowCall:function(){}},u=this.setting=n.extend({},r,i);this.vars={maxRowIndex:0,operateType:{insert:"insert",remove:"remove"}};this.mutipleRow=n(t);this.initialize()};t.prototype={initialize:function(){var t=this,i=t.setting,r=t.vars,f=i.addTrigger,e=i.removeTrigger,u=t.mutipleRow;t.mutipleRow.addClass("mutiple_row_container");t.items=t.getItems();r.maxRowIndex=Math.max(t.items.length,i.maxRowIndex);u.on("click",f,function(){var u=t.getItems(),i=n(this).closest("tr"),f=t.getRowNum(i),e=r.maxRowIndex=Math.max(r.maxRowIndex,u.length);return t.insertRow(i,f,e),!1});u.on("click",e,function(){var u=t.getItems(),i=n(this).closest("tr"),f=t.getRowNum(i),e=r.maxRowIndex=Math.max(r.maxRowIndex,u.length);return t.removeRow(i,f,e),!1});t.checkRow();i.init&&n.isFunction(i.init)&&i.init.call(t)},insertRow:function(t,i,r){var u=this,f=u.setting,h=u.vars,e=t?t.closest("tbody"):u.mutipleRow.find("tbody"),o=f.rowTemplate(t,r),c=e.children("tr").length,s;if(c>=f.allowMaxNumber)return!1;t?t.after(o):e.append(o);h.maxRowIndex++;u.checkRow();s=t?t.next():e.children().first();u.ensureItems();f.insertRowCall&&n.isFunction(f.insertRowCall)&&f.insertRowCall.call(u,s,i,r)},removeRow:function(t,i,r){var u=this,f=u.setting,e=u.vars;f.beforeRemoveRowCall&&n.isFunction(f.beforeRemoveRowCall)&&f.beforeRemoveRowCall.call(u,t,i,r);t.remove();u.ensureItems();f.removeRowCall&&n.isFunction(f.removeRowCall)&&f.removeRowCall.call(u,i,r);u.checkRow()},ensureItems:function(){this.getItems()},getItems:function(){var t=this,i=t.setting,r=t.mutipleRow;return t.items=i.itemSelector?n(i.itemSelector):r.find("tbody > tr"),t.items},checkRow:function(){var n=this,t=n.setting,h=n.vars,s=n.mutipleRow,f=t.addTrigger,i=s.find("tbody"),r,u,e,o;t.leastOne&&(r=n.getItems().length,u=i.find(t.removeTrigger),r===1?u.hide():r===0?(n.insertRow(null,0,0),e=i.children().first(),e.find(t.removeTrigger).hide()):u.show());o=i.children("tr").length;o>=t.allowMaxNumber?i.find(f).addClass("disabled"):i.find(f).removeClass("disabled")},generateJson:function(){var n=this,t=n.setting;t.generateJson&&t.generateJson.call(n)},getRowNum:function(n){var t=this,i=t.mutipleRow;return n.is("tr")?t.items.length+1:0}};n.fn.viMutipleRow=function(i){return this.each(function(){var r=n(this),u;if(r.data("viMutipleRow"))return r.data("viMutipleRow");u=new t(this,i);r.data("viMutipleRow",u)})}}(jQuery),function(n){var t=function(t,i){var r={leastOne:!0,items:"tr",itemsContainer:"table",allowMaxCount:20,addTrigger:".addlink",removeTrigger:".deletelink:not(.disabled)",init:function(){},itemTemplate:function(){},insertItemCall:function(){},beforeRemoveItemCall:function(){},removeItemCall:function(){}};this.vars={maxIndex:0};this.settings=n.extend({},r,i);this.viMultipleItem=t;this.initialize()};t.prototype={initialize:function(){var t=this,i=t.settings,u=t.vars,f=i.addTrigger,e=i.removeTrigger,r=t.viMultipleItem;r.addClass("multiple_item_container");t.items=t._getItems();t.itemsContainer=n(i.itemsContainer);u.maxIndex=t.items.length;r.on("click",f,function(){var e=t._getItems(),r=n(this).closest(i.items),f=u.maxIndex;return t.insertItem(r,f),!1});r.on("click",e,function(){var f=t._getItems(),r=n(this).closest(i.items),u=t.getItemIndex(r);return t.removeItem(r,u),!1});t._checkItem();i.init&&i.init.call(t)},_getItems:function(){var i=this,t=i.settings;return n(t.itemsContainer).children(t.items)},_checkItem:function(){var n=this,t=n.settings,f;if(t.leastOne){var i=n.items,r=i.length,e=n.itemsContainer,u=e.find(t.removeTrigger);r===1?u.hide():r===0?(n.insertItem(null,0),i=n.items,f=i.first(),f.find(t.removeTrigger).hide()):u.show()}},getItemIndex:function(n){var t=this,i=t.settings;return n.is(i.items)?t.items.index(n):0},insertItem:function(n,t){var i=this,r=i.settings,e=i.vars,f,u;i.items.length>r.allowMaxCount||(f=r.itemTemplate(n,t),u=null,n?(n.after(f),u=n.next()):(i.itemsContainer.append(f),u=i._getItems().last()),e.maxIndex++,i.items=i._getItems(),i._checkItem(),r.insertItemCall&&r.insertItemCall.call(i,u,t))},removeItem:function(n,t){var i=this,r=i.settings;r.beforeRemoveItemCall&&r.beforeRemoveItemCall.call(i,n,t);n&&n.remove();i.items=i._getItems();i._checkItem();r.removeItemCall&&r.removeItemCall.call(i,t)}};n.fn.viMultipleItem=function(i){return this.each(function(r,u){var f=n(u),e;if(f.data("viMultipleItem"))return f.data("viMultipleItem");e=new t(f,i);f.data("viMultipleItem",e)})}}(jQuery,window),function(n){n.extend(n,{ListFormattingDecimalFormat:function(t,i){var r="";return n.type(t)==="number"&&(r+=t,r+=i?")":"."),r},ListFormattingDecimalToLetter:function(t,i,r){var u="",f;if(n.type(t)==="number"){var e=i?65:97,o=Math.floor(t/26)+1,s=--t%26;for(f=0;f<o;f++)u+=String.fromCharCode(s+e);u+=r?")":"."}return u},ListFormattingDecimalToRoman:function(n,t,i){function o(n){return Math.floor(n/2)*2}var e="",f=parseInt(n),u=t?[[1,"I"],[5,"V"],[10,"X"],[50,"L"],[100,"C"],[500,"D"],[1e3,"M"]]:[[1,"i"],[5,"v"],[10,"x"],[50,"l"],[100,"c"],[500,"d"],[1e3,"m"]],r,s,h;if(!isNaN(f)&&f>0&&f<4e3){for(r=u.length-1;r>=0;){if(f>=u[r][0])if(s=Math.floor(f/u[o(r)][0]),h=s%5,h==4)e+=u[o(r)][1]+u[r+1][1],f-=s*u[o(r)][0];else for(e+=u[r][1],f-=u[r][0];--h>0;)e+=u[o(r)][1],f-=u[o(r)][0];r--}e+=i?")":"."}else e=!1;return e},formatFacilityHour:function(t,i,r){return t>i?"":n.datepicker.formatTime(r,{hour:parseInt(t)},{})+" - "+n.datepicker.formatTime(r,{hour:parseInt(i),minute:59},{})},formattedFacilityReservedHours:function(t,i){t=t.sortNumber();var r="",u=[],f=0;return n(t).each(function(n){n==0?u.push([t[n],t[n]]):t[n]==t[n-1]+1?u[f][1]=t[n]:(u.push([t[n],t[n]]),f++)}),n(u).each(function(t,u){r+=n.formatFacilityHour(u[0],u[1],i)+" <br/>"}),r==""&&(r=Vision.Resources.FacilityDirectory_Widget_ReservationSubmission_NoTimeSelected),r},compressFormFieldArray:function(t){var u=97,f=26,i={ks:[],vs:[]},r=function(n){var i="",t=n,r=0;if(t==0)return String.fromCharCode(u);while(t>0)r=t%f,t=Math.floor(t/f),i=String.fromCharCode(u+r-(i.length<=0?0:1))+i;return i},e=function(t){t=t||"";var u="",f=t.split(".");return n(f).each(function(n,t){var e=t.indexOf("["),f=e>0?t.substr(0,e):t;i.ks.length<n+1?(i.ks.push({max:0,i:n,k:{}}),i.ks[n].k[f]=r(i.ks[n].max),u+=t.replace(f,r(i.ks[n].max))+"."):i.ks[n].k[f]?u+=t.replace(f,i.ks[n].k[f])+".":(i.ks[n].max++,i.ks[n].k[f]=r(i.ks[n].max),u+=t.replace(f,r(i.ks[n].max))+".")}),u.substr(0,u.length-1)},o=function(t){var i={ks:[],vs:t.vs};return n(t.ks).each(function(n,t){var r=[];for(var u in t.k)r.push([u,t.k[u]]);i.ks.push({i:t.i,k:r})}),i};return n(t).each(function(){var n=e(this[0]);i.vs.push([n,this[1]])}),o(i)}});n.extend(n.fn,{selectRange:function(n,t){return this.each(function(){if(this.setSelectionRange)this.focus(),this.setSelectionRange(n,t);else if(this.createTextRange){var i=this.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",n);i.select()}})},setSelection:function(n,t){if(this.lengh==0)return this;if(input=this[0],input.createTextRange){var i=input.createTextRange();i.collapse(!0);i.moveEnd("character",t);i.moveStart("character",n);i.select()}else input.setSelectionRange&&(input.focus(),input.setSelectionRange(n,t));return this},setCursorPosition:function(t){return this.lengh==0?this:n(this).setSelection(t,t)},insertAtCaret:function(t){var i=n(this)[0];if(document.selection)this.focus(),sel=document.selection.createRange(),sel.text=t,this.focus();else if(i.selectionStart||i.selectionStart=="0"){var r=i.selectionStart,u=i.selectionEnd,f=i.scrollTop;i.value=i.value.substring(0,r)+t+i.value.substring(u,i.value.length);this.focus();i.selectionStart=r+t.length;i.selectionEnd=r+t.length;i.scrollTop=f}else this.value+=t,this.focus()},characterCounter:function(t){function u(){return window.getSelection?window.getSelection().toString():document.selection&&document.selection.createRange?document.selection.createRange().text:""}function i(i){var r=i.val(),u,e,o,f;t.ignoreCustomMsg&&(r=r.replace(/^Compose message.../g,""));u=t.maxLength-r.length;u<0&&(e=r.substring(0,t.maxLength),i.val(e));o=u<0?0:u;f=null;f=typeof t.container=="function"?t.container(i).find(t.target):n(i).closest(t.container).find(t.target);f.text(o)}var r={target:".remain_characters",container:function(t){return n(t).parent()},maxLength:70};t=n.extend({},r,t);n(this).each(function(){i(n(this))});n(this).keyup(function(){i(n(this))});n(this).change(function(){i(n(this))});n(this).keydown(function(i){if(i.ctrlKey||i.keyCode>=37&&i.keyCode<=40||i.keyCode==9)return!0;if(i.keyCode!=8&&i.keyCode!=46){var r=n(this).val().length+1,f=t.maxLength-r;if(f<0&&(f=0),r>t.maxLength&&u()=="")return!1}})},adjustImage:function(t){function r(){var u=Math.max(i.get(0).naturalWidth,1),f=Math.max(i.get(0).naturalHeight,1),r=i.parent();if(r.length){var t=Math.max(r.width(),1),n=Math.max(r.height(),1),e=t/n==1;e?u/f>1?(i.css("width","auto"),i.css("height",n),i.css("max-height",n)):(i.css("width",t),i.css("height","auto"),i.css("max-height","none")):u/f>t/n?(i.css("width","auto"),i.css("height",n),i.css("max-height",n)):(i.css("width",t),i.css("height","auto"),i.css("max-height","none"))}}var i=n(this);if(i.is("img")){t&&r();i.on("load",function(){r()})}},adjustImageDimention:function(t){var i,u,r,f;t=n.extend({},{width:70,height:70,desireWidth:50,ratios:".75:1",roundedCorner:!1,defaultColor:"#C9C9C9"},t);var e=t.width,o=t.height,u=t.desireWidth,i=t.desireWidth,s=t.ratios.split(":")[1],h=t.ratios.split(":")[0],c=n(this).parent(),l=t.isFullyDisplayedImage;t.roundedCorner?c.css({height:i,width:u,overflow:"hidden","border-radius":i,"background-color":t.defaultColor,border:"1px solid "+t.defaultColor}):(i=i*h,u=u*s,c.css({height:i,width:u,overflow:"hidden","border-radius":5,"background-color":t.defaultColor,border:"1px solid "+t.defaultColor}));l?e>o?n(this).css({width:u}):n(this).css({height:i}):(h>s?(f=i,r=e*f/o,r<u&&(r=u,f=o*r/e)):(r=u,f=o*r/e,f<i&&(f=i,r=e*f/o)),n(this).css({width:r,"max-width":r,height:f,position:"relative",top:Math.abs(f-i)/-2,left:Math.abs(r-u)/-2,border:0}))}})}(jQuery);$(function(){window.razorTypes=[];window.razorDialogs=[];$("body").on("click","a.show_razor_model_property",function(n){var i=$(this).closest("div.help_notes_body").attr("showPropertyUrl"),f=$("#WidgetTemplate_ID").val(),s=this,t,r,e,u,o;typeof i!="undefined"&&i.length>0&&(t=$(this).attr("razorType"),r=i+"?typeName="+t,f&&(r+="&templateID="+f),e={title:t,width:600,url:r,useFrame:!1,resize:!0,lock:!1,padding:0,fixed:!1,follow:s,onClosed:function(){if(window.razorTypes){var n=$.inArray(t,window.razorTypes);n>=0&&(window.razorTypes.splice(n,1),window.razorDialogs.splice(n,1))}}},window.razorTypes&&(u=$.inArray(t,window.razorTypes),u<0?(o=$.viClientDialog(e).open(),window.razorTypes.push(t),window.razorDialogs.push(o)):window.razorDialogs[u].zIndex()));n.preventDefault()});(function(n){n.extend(n,{SendEmail:function(n){if(n!=null&&n!=undefined){var i=n.addresses==null||n.addresses==undefined?"":n.addresses,r=n.subject==null||n.subject==undefined?"":"&subject="+n.subject,u=n.body==null||n.body==undefined?"":"&body="+n.body,f=n.cc==null||n.cc==undefined?"":"&cc="+n.cc,e=n.bcc==null||n.bcc==undefined?"":"&bcc="+n.bcc,t=r+u+f+e;t!=""&&(t="?"+t.substring(1));window.location.href="mailto:"+i+t}}})})(jQuery)});ViCategorySelector=function(n,t){var r={isLoaded:!1,ajaxData:null,ajaxUrl:"",eventName:"click",targetEl:$(".vi-animation-container"),getAjaxDataFunc:null,animSpeed:100,minWidth:120,minHeight:100,maxHeight:500,beforeShow:function(){var i=this,n=i.setting,t=$(n.targetEl),r=$.isFunction(n.getAjaxDataFunc)?n.getAjaxDataFunc():n.ajaxData,u=n.ajaxUrl,f=n.isLoaded;f||(n.isLoaded=!0,t.loading(!0,{mask:!0}),$.vision().ajax({url:u,data:r,type:"GET",success:function(n){$.type(n)=="string"?(t.html(n),t.loading(null,null,!0)):(alert(Vision.Resources.EnotificationCategorySelector_LoadCheckboxFailed),t.loading(null,null,!0))},error:function(){alert(Vision.Resources.UI_Common_FrontendAjaxGetFailed);t.loading(null,null,!0)}}))},init:function(n){var t=n.dropDown,r=n.setting,i=t.is(":text")?t:t.find(".vi-input"),u=i.next(),f=n.dropDownPanel}},u=$(n).getZIndex()+1,i=$.extend({zIndex:u},r,t);this.categorySelector=$(n);this.categorySelector.viDropdown(i);$.extend(this,this.categorySelector.viDropdown(i).data("viDropdown"))};$.fn.viCategorySelector=function(n){return this.each(function(){var t=$(this),i;if(t.data("viCategorySelector"))return t.data("viCategorySelector");i=new ViCategorySelector(this,n);t.data("viCategorySelector",i)})};ContentTypeCategoryModel=function(n){var t=this.DeserializeFromJson(n);this.ToCategories=t.ToCategories||[];this.ToContentTypes=t.ToContentTypes||[]};ContentTypeCategoryModel.prototype={ToContentTypes:[],ToCategories:[],SerializeToJson:function(){return JSON.stringify(this)},DeserializeFromJson:function(n){return JSON.parse(n)},Reset:function(n,t){this.ToCategories=n||[];this.ToContentTypes=t||[]}};Array.prototype.contains=function(n){for(var t=0;t<this.length;t++)if(this[t]==n)return!0;return!1};Array.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t]==n)return t;return-1};Array.prototype.remove=function(n){var t=this.indexOf(n);t>-1&&this.splice(t,1)};ViCategorySelector.GenerateModelWithNewContentType=function(n,t,i){var r=new ContentTypeCategoryModel(i);return r.ToContentTypes.contains(n)||(r.ToContentTypes.push(parseInt(n)),$.each(t,function(n,t){r.ToCategories.remove(t)})),r.SerializeToJson()};ViCategorySelector.GenerateModelWithRemovedContentType=function(n,t,i){var r=new ContentTypeCategoryModel(i);return r.ToContentTypes.contains(parseInt(n))&&(r.ToContentTypes.remove(parseInt(n)),$.each(t,function(n,t){r.ToCategories.remove(t)})),r.SerializeToJson()};ViCategorySelector.GenerateModelWithNewCategory=function(n,t){var i=new ContentTypeCategoryModel(t);return i.ToCategories.contains(n)||i.ToCategories.push(parseInt(n)),i.SerializeToJson()};ViCategorySelector.GenerateModelWithRemovedCategory=function(n,t){var i=new ContentTypeCategoryModel(t);return i.ToCategories.contains(n)&&i.ToCategories.remove(parseInt(n)),i.SerializeToJson()};TelerikSliderValueChange=function(n){if(n){var t=n.currentTarget.id;$("#"+t).val(n.value)}};$(function(){$.triggerScripts()});var generateGUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})},mobileReorderInitOverrides=function(){$("#sitebody .column").find("iframe[src=''], iframe:not([src])").each(function(n,t){typeof mobileReorderIframes=="undefined"&&(window.mobileReorderIframes={});var i=$(t).attr("id");(typeof i==typeof undefined||i==!1||i.length<1)&&$(t).attr("id",generateGUID());window.mobileReorderIframes[$(t).attr("id")]={head:$(t).contents().find("head").detach(),body:$(t).contents().find("body").detach()}})},mobileReorderOverrides=function(){$("#sitebody .column").find("iframe[src=''], iframe:not([src])").each(function(n,t){var i=window.mobileReorderIframes[$(t).attr("id")];typeof i!="undefined"&&("onload"in t?$(t).load(function(){$(t).contents().find("html").empty();$(t).contents().find("html").append(i.head);$(t).contents().find("html").append(i.body)}):($(t).contents().find("html").empty(),$(t).contents().find("html").append(i.head),$(t).contents().find("html").append(i.body)))})},renderMobile=function(){var n;mobileReorderInitOverrides();$("#sitebody").addClass("force_hide_column");$("#sitebody .column").find("script:not([data-mobile-show])").remove();i=0;$("#sitebody *").not("iframe").contents().filter(function(){return this.nodeType==8}).each(function(){if(this.nodeValue.indexOf("!!WidgetStart")>=0){var t=this.nodeValue.match('vi-orderdata="(.*)"  vi-hideonmobile'),r=this.nodeValue.match('vi-hideonmobile="(.*)"Widget'),n="";if($(this).parent().attr("id")==undefined||$(this).parent().attr("id")=="")try{n=$(this).parent().parent().attr("id")}catch(u){}else n=$(this).parent().attr("id");$(this).wrap('<div class="mobile_reorder_widget clearfix"  vi-orderdata="'+t[1]+'" vi-hideonmobile="'+r[1]+'" vi-deskorder="'+i+'" vi-column="'+n+'"><\/div>');i++}else this.nodeValue.indexOf("!!WidgetEnd")>=0&&(thewidget=$(this).prevAll(".mobile_reorder_widget:first"),widgetcontent=$(this).prevUntil(".mobile_reorder_widget").andSelf(),$(this).parents(".home_collage").length>0&&(home_collage=$(this).parents(".home_collage:first"),thewidget.insertBefore(home_collage),$(this).appendTo(home_collage),widgetcontent=$(this).parents(".home_collage:first").detach().after($(this))),$(this).parents(".home_buttons").length>0&&(home_buttons=$(this).parents(".home_buttons:first"),thewidget.insertBefore(home_buttons),$(this).appendTo(home_buttons),widgetcontent=$(this).parents(".home_buttons:first").detach().after($(this))),widgetcontent.appendTo(thewidget),$("#sitebody").hasClass("homepagelayout")&&thewidget.attr("vi-hideonmobile")=="false"&&thewidget.parentsUntil("#sitebody").each(function(){var n="",t;$(this).attr("id")&&(n=$(this).attr("id"));t="fake_col";thewidget.wrapInner("<"+$(this).prop("tagName")+' class="'+$(this).attr("class")+" "+t+'" id="'+n+'"><\/'+$(this).prop("tagName")+">")}))});$("#sitebody").find(".mobile_reorder_widget[vi-orderdata!='0']").length>0?($("#sitebody > *").not("#MobileColumnUserControl1, .home_floatarea, link").addClass("force_hide_column"),n=$("#sitebody").find(".mobile_reorder_widget").sort(function(n,t){return $(n).attr("vi-orderdata")-$(t).attr("vi-orderdata")}),n.each(function(){$(this).attr("vi-hideonmobile")=="true"&&$(this).addClass("force_hide_column");$("#MobileColumnUserControl1").append($(this))}),$(".async_widget_container:not(.custominvoke)").each(function(n,t){$(t).loadAsyncContainer()})):$("#sitebody").find(".mobile_reorder_widget[vi-hideonmobile='true']").length>0&&(n=$("#sitebody").find(".mobile_reorder_widget"),n.each(function(){$(this).attr("vi-hideonmobile")=="true"&&$(this).addClass("force_hide_column")}));mobileReorderOverrides();$("#sitebody").removeClass("force_hide_column")},restoreDesktop=function(){var n;mobileReorderInitOverrides();$("#sitebody #MobileColumnUserControl1").find(".mobile_reorder_widget").length>0?($("#sitebody > *").not("#MobileColumnUserControl1, .home_floatarea, link").removeClass("force_hide_column"),$("#sitebody").find(".fake_col > *").unwrap(),$("#sitebody").find(".fake_col:empty").remove(),n=$("#sitebody").find(".mobile_reorder_widget").sort(function(n,t){return $(n).attr("vi-deskorder")-$(t).attr("vi-deskorder")}),n.each(function(){parentcol=$(this).attr("vi-column");$("#sitebody").find("#"+parentcol).append(this)}),$(".async_widget_container:not(.custominvoke)").each(function(n,t){$(t).loadAsyncContainer()})):$("#sitebody").find(".mobile_reorder_widget[vi-hideonmobile='true']").length>0&&(n=$("#sitebody").find(".mobile_reorder_widget"),n.each(function(){$(this).attr("vi-hideonmobile")=="true"&&$(this).removeClass("force_hide_column")}));$("#sitebody").find(".mobile_reorder_widget > *").unwrap();$("#sitebody").find(".mobile_reorder_widget:empty").remove();mobileReorderOverrides()},manualRenderMobile=function(){var n=window.reordered?window.reordered==!0:!1,t=window.hashiddenwidgets?window.hashiddenwidgets==!0:!1,i=window.parent?window.parent.inpreviewmobile?window.parent.inpreviewmobile==!0:!1:!1,r=setTimeout(function(){(i||n||t)&&($("#sitebody #MobileColumnUserControl1").length<1&&$("#sitebody").append('<div id="MobileColumnUserControl1" class="column mobile_only clearfix"><\/div>'),window.innerWidth<=647&&(renderMobile(),window.switchedToMobile=!0))},1e3);clearTimeout(r)};$(function(){var t=window.reordered?window.reordered==!0:!1,i=window.hashiddenwidgets?window.hashiddenwidgets==!0:!1,r=window.parent?window.parent.inpreviewmobile?window.parent.inpreviewmobile==!0:!1:!1,n;if(r||t||i){$("#sitebody #MobileColumnUserControl1").length<1&&$("#sitebody").append('<div id="MobileColumnUserControl1" class="column mobile_only clearfix"><\/div>');$(".home_collage").length>0&&($(".home_collage").wrap('<div id="'+$(".home_collage").attr("id")+'"><\/div>'),$(".home_collage").attr("id",""));$(".home_buttons").length>0&&($(".home_buttons").wrap('<div id="'+$(".home_buttons").attr("id")+'"><\/div>'),$(".home_buttons").attr("id",""));n=function(){(window.switchedToMobile==null||window.switchedToMobile!=null&&window.switchedToMobile==!1)&&window.innerWidth<=647?(renderMobile(),window.switchedToMobile=!0):window.switchedToMobile&&window.switchedToMobile==!0&&window.innerWidth>647&&(restoreDesktop(),window.switchedToMobile=!1)};n();$(window).resize(function(){this.resizeTO&&clearTimeout(this.resizeTO);this.resizeTO=setTimeout(function(){$(this).trigger("resizeEnd")},150)});$(window).on("load resizeEnd",n)}}),function(){var n=function(n){this.options=$(n)};n.prototype={init:function(){var t=this,n=t.options,r=n.find(".faq_tab_nav").height(),i;n.find(".faqtab_section").attr("style","min-height: "+(r-42)+"px");$(window).resize(function(){clearTimeout(i);i=setTimeout(function(){t.faqResizeTab()},200)});t.faqHashChangeFun();"onhashchange"in window?window.onhashchange=function(){t.faqHashChangeFun()}:$(".faq_tab_nav ul li a").click(function(){$(this).closest(".faq_tab_nav ul li a").find(".active_faqtab").removeClass("active_faqtab");$(this).addClass("active_faqtab");var n=$($(this).attr("href"));n.show().addClass("active_faqtab").siblings().hide().removeClass("active_faqtab");t.faqResizeTab()});n.find(".faqtab_question").click(function(){$(this).toggleClass("faqquestion_open");var t=$(this).next(".faqtab_answer");t.toggleClass("faqanswer_open");n.find(".faq_tab_contents").find(".faqquestion_open").not(this).removeClass("faqquestion_open");n.find(".faq_tab_contents").find(".faqanswer_open").not(t).removeClass("faqanswer_open")});n.find("#tabselect").change(function(){var i=n.find("#tabselect").val();n.find(".faq_tab_nav ul li a").each(function(){var n=$(this).attr("href");n==i?$(this).addClass("active_faqtab"):$(this).removeClass("active_faqtab")});$(this).closest(".faq_tab_nav ul li a").find(".active_faqtab").removeClass("active_faqtab");$(this).addClass("active_faqtab");$(i).show().addClass("active_faqtab").siblings().hide().removeClass("active_faqtab");t.faqResizeTab()})},faqHashChangeFun:function(){if($.isHashValid()){var t=this,u=t.options,i=window.location.hash,n=$('.faq_tab_nav [href*="'+i+'"]'),r=$(i);n.length&&!n.hasClass("active_faqtab")&&r.length&&(n.closest(".faq_tab_nav").find(".active_faqtab").removeClass("active_faqtab"),n.addClass("active_faqtab"),r.show().addClass("active_faqtab").siblings().hide().removeClass("active_faqtab"),t.faqResizeTab())}},faqResizeTab:function(){var t=this,n=t.options;tabheight=n.find(".faq_tab_nav").height();n.find(".faqtab_section").attr("style","min-height: "+(tabheight-42)+"px")}};$.extend($.fn,{faqTabList:function(){return $(this).length<=0?null:($(this).each(function(){var t=$(this).data("faqTabList");typeof t=="undefined"&&(t=new n(this),t.init(),$(this).data("faqTabList",t))}),$($(this)[0]).data("faqTabList"))}})}(jQuery),function(){function r(n){var t=!1;return"ontouchstart"in window?t=!0:"onpointerdown"in window?t=n.originalEvent.pointerType=="touch":window.MSPointerEvent&&(t=n.originalEvent.pointerType==n.originalEvent.MSPOINTER_TYPE_TOUCH),t}var t="",i,u,n;("ontouchstart"in window||"onpointerdown"in window||window.MSPointerEvent)&&(t="ontouchstart"in window?"touchstart":"onpointerdown"in window?"pointerdown":window.MSPointerEvent?"MSPointerDown":"");i=$.isIEBrowser();u=$.isIE9Browser();n=function(t,i){this._container=$(t);this._options=$.extend({},n.defaultOptions,i);this._targets=$(this._options.anchorTarget,this._container)};n.prototype={_init:function(){var u=this,e=u._targets,n=u._options,f=u._container;if(t.length>0){e.on(t,function(t){var u=$(this),e,s,o;if(r(t)==!1||(e=u.next(n.showPanel),s=e.length>0,!s))return!0;if(e.hasClass("touch-active"))i&&u.attr("href",u.attr("data-href")),e.removeClass("touch-active");else return i&&(u.attr("data-href",u.attr("href")),u.attr("href","javascript:void(0);")),o=f,n.closeOtherTarget==!0&&(o=$("body")),$(n.showPanel,o).filter(".touch-active").not(e).removeClass("touch-active"),e.addClass("touch-active"),!1});$("body").on(t,function(t){var i,u;if(r(t)==!1||(i=$(t.target).closest(n.showPanel),i.length==0&&(i=$(t.target).next(n.showPanel)),i.length>0))return!0;u=f;n.closeOtherTarget==!0&&(u=$("body"));$(n.showPanel,u).filter(".touch-active").removeClass("touch-active")})}}};n.defaultOptions={anchorTarget:".touching-anchor",closeOtherTarget:!0};$.extend($.fn,{anchorTouching:function(t){return $(this).length<=0?null:($(this).each(function(i,r){var u=$(r).data("anchorTouching");typeof u=="undefined"&&(u=new n(r,t),u._init(),$(r).data("anchorTouching",u))}),$($(this)[0]).data("anchorTouching"))}})}(jQuery),function(){function r(){function n(n){var t=$(n).scrollLeft();0<t?$(n).addClass("right_scroll"):$(n).removeClass("right_scroll");$inner_table=$(n).find(">table");t+$(n).width()==$inner_table.outerWidth()?$(n).removeClass("left_scroll"):$(n).hasClass("left_scroll")||$(n).addClass("left_scroll")}$(".front_end_body table:not(.responsive-table-data-mb)").each(function(){if($(this).find(">tbody>tr,>thead>tr").length!=1||$(this).find("tbody>tr>th,thead>tr>th").length!=0||$(this).hasClass("calendar_title")){if(!($(this).find(">tbody>tr,>thead>tr").length==1&&$(this).find("tbody>tr>th,thead>tr>th").length==0)){maxWidth=$(this).css("max-width");var n=$(this).width(),r=$(window).width(),t=$(this).parent().width();n>r||n>t-i&&t>0?$(".faqtab_answer").length>0?$(this).width("100%"):$(this).parent().hasClass("responsive-table-scroll")?$(this).css("max-width",maxWidth):($(this).css("max-width","none"),$(this).wrap('<div class="responsive-table-scroll left_scroll"><\/div>')):$(this).parent().hasClass("responsive-table-scroll")&&$(this).unwrap()}}else{var n=$(this).width(),r=$(window).width(),t=$(this).parent().width();(n>r||n>t&&t!=0)&&($(this).parent().hasClass("responsive-table-list")||($(this).wrap('<div class="responsive-table-list"><\/div>'),$(this).width("100%"),$(this).find("img, object").each(function(){$(this).css("max-width","100%")})))}});$(".responsive-table-scroll").scroll(function(){var t=this;clearTimeout($.data(this,"scrollCheck"));$.data(this,"scrollCheck",setTimeout(function(){n(t)},250))})}function u(){$("iframe[src*=youtube]").each(function(){$(this).parent().hasClass("videoWrapper")||$(this).wrap("<div class='videoWrapper'><\/div>")})}var n=!1,t,i;window.visionOptions!=undefined&&window.visionOptions.clientResponsiveTableEnabled!=undefined&&(n=window.visionOptions.clientResponsiveTableEnabled);$(".front_end_body table:not(.non-responsive-table)").each(function(){if($(this).filter(".listtable, .tableData").length>0&&$(this).find(">tr>th,>thead>tr>th,>tbody>tr>th").length>0){$(this).addClass("responsive-table-data-mb");var n=[];$(this).find(">tr>th,>thead>tr>th,>tbody>tr>th").each(function(){n.push($(this).text())});$(this).find("tbody>tr,>tr").each(function(t,i){$(i).find("td").each(function(t,i){$(i).attr("data-th",n[t]);var r=$(i).attr("data-th"),u=$(i).text()&&$(i).html();u.trim().length==0&&r.trim().length==0&&$(i).addClass("hideEmptyRow")})});$(this).find("td.poll_thumbnail_col").each(function(){$(this).removeClass("poll_thumbnail_col")})}});$(".faqtab_answer").each(function(){$(this).find("table:not(.non-responsive-table)").width("100%")});t=/Mac OS/ig.test(navigator.userAgent);i=t?5:0;n&&(r(),u(),$(window).resize(function(){this.resizeTo&&clearTimeout(this.resizeTo);this.resizeTo=setTimeout(r(),150)}));$(".import-button[data-url]").click(function(){var n=JSON.parse($(this).attr("data-url-post")||"{}"),t={title:$(this).text(),url:$(this).attr("data-url"),useFrame:!1,width:545,data:n,onClosed:function(n){n&&n.IsOk===!0&&($.refreshTempMessage(n.Message),setTimeout(function(){$.vision().refresh()},300))}};$.viClientDialog(t).open()});$(".auto-complete-container[data-auto-complete]").each(function(){var n=$(this).attr("data-auto-complete")||"off";n=="off"?$(this).find("form,input,select,textarea").attr("autocomplete",n):$(this).find("form,input,select,textarea").removeAttr("autocomplete")})}(jQuery),function(n){var t=function(t,i){this.button=n(t);this.options=n(i);this.visible=!1;var r=n(t).getZIndex()+1;this.setting=n.extend({zIndex:r},{animSpeed:100,height:250,width:200},i);this.container=null;this.init()};t.prototype={init:function(){var t=this;this.addPanelDiv();this.bindButton();n(window).resize(function(){t.snapToAnchor()});n("body").click(function(i){var u=n(i.target).closest(".ui-datepicker"),f=n(i.target).closest(".ui-datepicker-current"),e=n(i.target).closest(".ui-icon-circle-triangle-e"),o=n(i.target).closest(".ui-icon-circle-triangle-w"),s=u.length+f.length+e.length+o.length,r=n(i.target).closest(".vi-panel-container");(r.length<=0||r.index(t.container)<0)&&s<=0&&t.closePanel()})},bindButton:function(){var t=this;this.button.on("click",function(i){return i.preventDefault(),n(this).prop("disabled",!0),t.openPanel(),n(this).prop("disabled",!1),!1})},addPanelDiv:function(){var i=document.body,t;if(!i)throw new Error('viPanelPopupManager: "documents.body" not ready');t=document.createElement("div");n(t).attr("class","vi-panel-container");i.appendChild(t,i.firstChild);this.container=n(t);this.loading=n("<div class='vi-panel-loading'><\/div>");this.container.append(this.loading);this.setting.width&&this.loading.css({"min-width":this.setting.width+"px"});this.setting.height&&(this.loading.css({"min-height":this.setting.height+"px"}),this.container.css({"max-height":this.setting.height+"px"}));this.container.hide()},openPanel:function(){var t=this.container;this.visible?this.closePanel():(this.visible=!0,t.find(".vi-panel-loading").length>0&&this.loadUrl(),t.slideDown(this.setting.animSpeed,function(){n(this).show()}),this.snapToAnchor())},closePanel:function(){var t=this;this.container.slideUp(this.setting.animSpeed,function(){n(this).hide();t.visible=!1})},loadUrl:function(){var i=this.container,r=this.button.data("url"),t={};this.button.data("url-post")&&(t=this.button.data("url-post"));n.vision?n.vision().ajax(r,{data:t,cache:!1,success:function(n){n==null&&(n="<span>Error loading "+URL+"<\/span>");i.html(n)}}):n.frontendAjax?n.frontendAjax(r,{data:t,cache:!1,success:function(n){n==null&&(n="<span>Error loading "+URL+"<\/span>");i.html(n)}}):n.ajax({url:r,cache:!1,data:t,success:function(n){n==null&&(n="<span>Error loading "+URL+"<\/span>");i.html(n)}})},snapToAnchor:function(){var i=this.container,t=this.button.offset(),s=n(document).height(),u=Math.max(i.outerHeight(),243),f=i.outerWidth(),h=this.button.outerWidth(),e=this.button.outerHeight(),o=0,r;o=s-t.top-e<u?t.top-u:t.top+e;r=0;r=t.left>f?t.left-f+h:t.left;i.css({position:"absolute",top:o+"px",left:r+"px"})}};n.fn.viPanelPopupManager=function(i){return this.each(function(){var r=n(this),u;if(r.data("viPanelPopupManager"))return r.data("viPanelPopupManager");u=new t(this,i);r.data("viPanelPopupManager",u)})};n(".export-button[data-url]").viPanelPopupManager({width:550,height:320})}(jQuery),function(){$.fn.replaceOptions=function(n){var t,i;this.empty();t=this;$.each(n,function(n,r){i=$("<option><\/option>").attr("value",r.value).text(r.text);t.append(i)})}}(jQuery),function(){$(".logon-bar .logon_preview a, .frequent-buttons li.preview a").click(function(){localStorage.removeItem("currentPageViewChosen")})}(jQuery);$(function(){$(document).on("submit","form.largeformfieldsform",function(){var t=$(this),i,n,r;t.valid()&&(i=[],t.find("input:not([type='submit'],[type='button'],[type='file'],[type='reset']),select,textarea").each(function(){$(this).hasClass("noncompressfield")||("checkbox"!=$(this).attr("type")||$(this).prop("checked"))&&(i.push([$(this).attr("name")+"",$(this).val()]),$(this).attr("disabled","disabled"))}),n=t.find("input[type='hidden'][name='____combinedcompressfields']"),n.length<=0&&(n=$("<input type='hidden' name='____combinedcompressfields'/>"),t.append(n)),r=$.compressFormFieldArray(i),n.val(JSON.stringify(r)))})}),function(n){n.validator&&n.validator.unobtrusive&&(n.validator.defaults.ignore=[],n.validator.methods.date=function(n,t){if(n!=null&&n!=""){var i=n.match(/[aApP]\.[mM]\.$/);i!=null&&(n=n.replace(i[0],i[0].replace(/\./g,"")))}return this.optional(t)||!/Invalid|NaN/.test(new Date(n))},n.validator.addMethod("mustequal",function(t,i,r){n(i).off(".validate-mustequal").on("blur.validate-mustequal",function(){n(i).valid()});return t&&r.ignorecase&&r.data&&r.ignorecase.toLowerCase()=="true"?t.toLowerCase()==r.data.toLowerCase():t==r.data}),n.validator.unobtrusive.adapters.add("mustequal",["data","ignorecase"],function(n){n.rules.mustequal={data:n.params.data};n.messages.mustequal=n.message}),n.validator.addMethod("accept",function(n,t,i){return i=typeof i=="string"?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||n.match(new RegExp(".("+i+")$","i"))}),n.validator.unobtrusive.adapters.add("accept",["data","ignorecase"],function(n){n.rules.accept={data:n.params.data};n.messages.accept=n.message}))}(jQuery);window.paceOptions={document:!0,eventLag:!0,restartOnPushState:!0,restartOnRequestAfter:!0,ajax:{trackMethods:["POST","GET"],ignoreURLs:["my2.siteimprove.com"]}};jQuery.browser={};$(function(){/Edge/.test(navigator.userAgent)&&$("textarea[placeholder]").focus(function(){$(this).data("placeholderForEdge",$(this).attr("placeholder"));$(this).attr("placeholder","")}).blur(function(){$(this).data("placeholderForEdge")&&$(this).attr("placeholder",$(this).data("placeholderForEdge"))});jQuery.browser.msie=!1;jQuery.browser.version=0;navigator.userAgent.match(/MSIE ([0-9]+)./)&&(jQuery.browser.msie=!0,jQuery.browser.version=RegExp.$1)});
/*! pace 1.0.2 */
(function(){var nt,ct,lt,at,vt,yt,pt,wt,a,n,bt,kt,tt,dt,gt,o,ni,r,v,y,it,s,p,ti,rt,ut,f,ii,u,t,w,ft,ri,h,et,b,i,e,ot,c,k,st,d,g,ui,fi,ht,hi,ei,l=[].slice,oi={}.hasOwnProperty,si=function(n,t){function r(){this.constructor=n}for(var i in t)oi.call(t,i)&&(n[i]=t[i]);return r.prototype=t.prototype,n.prototype=new r,n.__super__=t.prototype,n},ci=[].indexOf||function(n){for(var t=0,i=this.length;i>t;t++)if(t in this&&this[t]===n)return t;return-1};for(it={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},u=function(){var n;return null!=(n="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?n:+new Date},w=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,y=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==w&&(w=function(n){return setTimeout(n,50)},y=function(n){return clearTimeout(n)}),ri=function(n){var t,i;return t=u(),(i=function(){var r;return r=u()-t,r>=33?(t=u(),n(r,function(){return w(i)})):setTimeout(i,33-r)})()},ft=function(){var i,t,n;return n=arguments[0],t=arguments[1],i=3<=arguments.length?l.call(arguments,2):[],"function"==typeof n[t]?n[t].apply(n,i):n[t]},s=function(){var n,t,r,f,i,u,e;for(t=arguments[0],f=2<=arguments.length?l.call(arguments,1):[],u=0,e=f.length;e>u;u++)if(r=f[u])for(n in r)oi.call(r,n)&&(i=r[n],null!=t[n]&&"object"==typeof t[n]&&null!=i&&"object"==typeof i?s(t[n],i):t[n]=i);return t},ni=function(n){var i,r,u,t,f;for(r=i=0,t=0,f=n.length;f>t;t++)u=n[t],r+=Math.abs(u),i++;return r/i},ti=function(n,t){var i,r,u;if(null==n&&(n="options"),null==t&&(t=!0),u=document.querySelector("[data-pace-"+n+"]")){if(i=u.getAttribute("data-pace-"+n),!t)return i;try{return JSON.parse(i)}catch(f){return r=f,"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",r):void 0}}},pt=function(){function n(){}return n.prototype.on=function(n,t,i,r){var u;return null==r&&(r=!1),null==this.bindings&&(this.bindings={}),null==(u=this.bindings)[n]&&(u[n]=[]),this.bindings[n].push({handler:t,ctx:i,once:r})},n.prototype.once=function(n,t,i){return this.on(n,t,i,!0)},n.prototype.off=function(n,t){var i,u,r;if(null!=(null!=(u=this.bindings)?u[n]:void 0)){if(null==t)return delete this.bindings[n];for(i=0,r=[];i<this.bindings[n].length;)r.push(this.bindings[n][i].handler===t?this.bindings[n].splice(i,1):i++);return r}},n.prototype.trigger=function(){var f,r,n,e,t,o,s,i,u;if(n=arguments[0],f=2<=arguments.length?l.call(arguments,1):[],null!=(s=this.bindings)?s[n]:void 0){for(t=0,u=[];t<this.bindings[n].length;)i=this.bindings[n][t],e=i.handler,r=i.ctx,o=i.once,e.apply(null!=r?r:this,f),u.push(o?this.bindings[n].splice(t,1):t++);return u}},n}(),n=window.Pace||{},window.Pace=n,s(n,pt.prototype),t=n.options=s({},it,window.paceOptions,ti()),ht=["ajax","document","eventLag","elements"],d=0,ui=ht.length;ui>d;d++)i=ht[d],t[i]===!0&&(t[i]=it[i]);a=function(n){function t(){return hi=t.__super__.constructor.apply(this,arguments)}return si(t,n),t}(Error);ct=function(){function n(){this.progress=0}return n.prototype.getElement=function(){var n;if(null==this.el){if(n=document.querySelector(t.target),!n)throw new a;this.el=document.createElement("div");this.el.className="pace pace-active";document.body.className=document.body.className.replace(/pace-done/g,"");document.body.className+=" pace-running";this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"><\/div>\n<\/div>\n<div class="pace-activity"><\/div>';null!=n.firstChild?n.insertBefore(this.el,n.firstChild):n.appendChild(this.el)}return this.el},n.prototype.finish=function(){var n;return n=this.getElement(),n.className=n.className.replace("pace-active",""),n.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},n.prototype.update=function(n){return this.progress=n,this.render()},n.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(n){a=n}return this.el=void 0},n.prototype.render=function(){var n,f,i,e,r,o,u;if(null==document.querySelector(t.target))return!1;for(n=this.getElement(),e="translate3d("+this.progress+"%, 0, 0)",u=["webkitTransform","msTransform","transform"],r=0,o=u.length;o>r;r++)f=u[r],n.children[0].style[f]=e;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(n.children[0].setAttribute("data-progress-text",""+(0|this.progress)+"%"),this.progress>=100?i="99":(i=this.progress<10?"0":"",i+=0|this.progress),n.children[0].setAttribute("data-progress",""+i)),this.lastRenderedProgress=this.progress},n.prototype.done=function(){return this.progress>=100},n}();wt=function(){function n(){this.bindings={}}return n.prototype.trigger=function(n,t){var f,i,e,r,u;if(null!=this.bindings[n]){for(r=this.bindings[n],u=[],i=0,e=r.length;e>i;i++)f=r[i],u.push(f.call(this,t));return u}},n.prototype.on=function(n,t){var i;return null==(i=this.bindings)[n]&&(i[n]=[]),this.bindings[n].push(t)},n}();st=window.XMLHttpRequest;k=window.XDomainRequest;c=window.WebSocket;p=function(n,t){var u,i,r=[];for(i in t.prototype)try{r.push(null==n[i]&&"function"!=typeof t[i]?"function"==typeof Object.defineProperty?Object.defineProperty(n,i,{get:function(){return t.prototype[i]},configurable:!0,enumerable:!0}):n[i]=t.prototype[i]:void 0)}catch(f){u=f}return r};f=[];n.ignore=function(){var n,t,i;return t=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],f.unshift("ignore"),i=t.apply(null,n),f.shift(),i};n.track=function(){var n,t,i;return t=arguments[0],n=2<=arguments.length?l.call(arguments,1):[],f.unshift("track"),i=t.apply(null,n),f.shift(),i};b=function(n){var i;return(null==n&&(n="GET"),"track"===f[0])?"force":!f.length&&t.ajax&&("socket"===n&&t.ajax.trackWebSockets||(i=n.toUpperCase(),ci.call(t.ajax.trackMethods,i)>=0))?!0:!1};bt=function(n){function i(){var n,r=this;i.__super__.constructor.apply(this,arguments);n=function(n){var t;return t=n.open,n.open=function(i,u,f){return b(i)&&r.trigger("request",{type:i,url:u,request:n}),t.call(n,i,u,f||!0)}};window.XMLHttpRequest=function(t){var i;return i=new st(t),n(i),i};try{p(window.XMLHttpRequest,st)}catch(u){}if(null!=k){window.XDomainRequest=function(){var t;return t=new k,n(t),t};try{p(window.XDomainRequest,k)}catch(u){}}if(null!=c&&t.ajax.trackWebSockets){window.WebSocket=function(n,t){var i;return i=null!=t?new c(n,t):new c(n),b("socket")&&r.trigger("request",{type:"socket",url:n,protocols:t,request:i}),i};try{p(window.WebSocket,c)}catch(u){}}}return si(i,n),i}(wt);g=null;rt=function(){return null==g&&(g=new bt),g};et=function(n){var i,r,f,u;for(u=t.ajax.ignoreURLs,r=0,f=u.length;f>r;r++)if(i=u[r],"string"==typeof i){if(-1!==n.indexOf(i))return!0}else if(i.test(n))return!0;return!1};rt().on("request",function(r){var u,o,f,e,s;return e=r.type,f=r.request,s=r.url,et(s)?void 0:n.running||t.restartOnRequestAfter===!1&&"force"!==b(e)?void 0:(o=arguments,u=t.restartOnRequestAfter||0,"boolean"==typeof u&&(u=0),setTimeout(function(){var c,t,s,h,r,u;if(c="socket"===e?f.readyState<2:0<(h=f.readyState)&&4>h){for(n.restart(),r=n.sources,u=[],t=0,s=r.length;s>t;t++){if(i=r[t],i instanceof nt){i.watch.apply(i,o);break}u.push(void 0)}return u}},u))});nt=function(){function n(){var n=this;this.elements=[];rt().on("request",function(){return n.watch.apply(n,arguments)})}return n.prototype.watch=function(n){var t,i,r,u;return r=n.type,t=n.request,u=n.url,et(u)?void 0:(i="socket"===r?new dt(t):new gt(t),this.elements.push(i))},n}();gt=function(){function n(n){var f,o,i,e,r,u,t=this;if(this.progress=0,null!=window.ProgressEvent)for(o=null,n.addEventListener("progress",function(n){return t.progress=n.lengthComputable?100*n.loaded/n.total:t.progress+(100-t.progress)/2},!1),u=["load","abort","timeout","error"],i=0,e=u.length;e>i;i++)f=u[i],n.addEventListener(f,function(){return t.progress=100},!1);else r=n.onreadystatechange,n.onreadystatechange=function(){var i;return 0===(i=n.readyState)||4===i?t.progress=100:3===n.readyState&&(t.progress=50),"function"==typeof r?r.apply(null,arguments):void 0}}return n}();dt=function(){function n(n){var r,t,u,i,f=this;for(this.progress=0,i=["error","open"],t=0,u=i.length;u>t;t++)r=i[t],n.addEventListener(r,function(){return f.progress=100},!1)}return n}();at=function(){function n(n){var r,t,u,i;for(null==n&&(n={}),this.elements=[],null==n.selectors&&(n.selectors=[]),i=n.selectors,t=0,u=i.length;u>t;t++)r=i[t],this.elements.push(new vt(r))}return n}();vt=function(){function n(n){this.selector=n;this.progress=0;this.check()}return n.prototype.check=function(){var n=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return n.check()},t.elements.checkInterval)},n.prototype.done=function(){return this.progress=100},n}();lt=function(){function n(){var n,i,t=this;this.progress=null!=(i=this.states[document.readyState])?i:100;n=document.onreadystatechange;document.onreadystatechange=function(){return null!=t.states[document.readyState]&&(t.progress=t.states[document.readyState]),"function"==typeof n?n.apply(null,arguments):void 0}}return n.prototype.states={loading:0,interactive:50,complete:100},n}();yt=function(){function n(){var i,f,r,e,n,o=this;this.progress=0;i=0;n=[];e=0;r=u();f=setInterval(function(){var s;return s=u()-r-50,r=u(),n.push(s),n.length>t.eventLag.sampleCount&&n.shift(),i=ni(n),++e>=t.eventLag.minSamples&&i<t.eventLag.lagThreshold?(o.progress=100,clearInterval(f)):o.progress=300/(i+3)},50)}return n}();tt=function(){function n(n){this.source=n;this.last=this.sinceLastUpdate=0;this.rate=t.initialRate;this.catchup=0;this.progress=this.lastProgress=0;null!=this.source&&(this.progress=ft(this.source,"progress"))}return n.prototype.tick=function(n,i){var r;return null==i&&(i=ft(this.source,"progress")),i>=100&&(this.done=!0),i===this.last?this.sinceLastUpdate+=n:(this.sinceLastUpdate&&(this.rate=(i-this.last)/this.sinceLastUpdate),this.catchup=(i-this.progress)/t.catchupTime,this.sinceLastUpdate=0,this.last=i),i>this.progress&&(this.progress+=this.catchup*n),r=1-Math.pow(this.progress/100,t.easeFactor),this.progress+=r*this.rate*n,this.progress=Math.min(this.lastProgress+t.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},n}();e=null;h=null;r=null;ot=null;o=null;v=null;n.running=!1;ut=function(){if(t.restartOnPushState)return n.restart()};null!=window.history.pushState&&(fi=window.history.pushState,window.history.pushState=function(){return ut(),fi.apply(window.history,arguments)});null!=window.history.replaceState&&(ei=window.history.replaceState,window.history.replaceState=function(){return ut(),ei.apply(window.history,arguments)});kt={ajax:nt,elements:at,document:lt,eventLag:yt};(ii=function(){var u,f,o,l,a,s,v,c;for(n.sources=e=[],s=["ajax","elements","document","eventLag"],f=0,l=s.length;l>f;f++)u=s[f],t[u]!==!1&&e.push(new kt[u](t[u]));for(c=null!=(v=t.extraSources)?v:[],o=0,a=c.length;a>o;o++)i=c[o],e.push(new i(t));return n.bar=r=new ct,h=[],ot=new tt})();n.stop=function(){return n.trigger("stop"),n.running=!1,r.destroy(),v=!0,null!=o&&("function"==typeof y&&y(o),o=null),ii()};n.restart=function(){return n.trigger("restart"),n.stop(),n.start()};n.go=function(){var f;return n.running=!0,r.render(),f=u(),v=!1,o=ri(function(o,s){var nt,p,w,it,b,c,l,et,a,y,k,d,g,rt,ut,ft;for(et=100-r.progress,p=k=0,w=!0,c=d=0,rt=e.length;rt>d;c=++d)for(i=e[c],y=null!=h[c]?h[c]:h[c]=[],b=null!=(ft=i.elements)?ft:[i],l=g=0,ut=b.length;ut>g;l=++g)it=b[l],a=null!=y[l]?y[l]:y[l]=new tt(it),w&=a.done,a.done||(p++,k+=a.tick(o));return nt=k/p,r.update(ot.tick(o,nt)),r.done()||w||v?(r.update(100),n.trigger("done"),setTimeout(function(){return r.finish(),n.running=!1,n.trigger("hide")},Math.max(t.ghostTime,Math.max(t.minTime-(u()-f),0)))):s()})};n.start=function(i){s(t,i);n.running=!0;try{r.render()}catch(u){a=u}return document.querySelector(".pace")?(n.trigger("start"),n.go()):setTimeout(n.start,50)};"function"==typeof define&&define.amd?define(["pace"],function(){return n}):"object"==typeof exports?module.exports=n:t.startOnPageLoad&&n.start()}).call(this),function(n){function r(t,i){n(t).is("form")&&(this._options=n.extend(this._options,i),this._target=n(t),this._init())}function t(t,i){n(t).is("form")&&(this._options=n.extend(this._options,i),this._target=n(t),this._init())}r.prototype={_options:{uploadUrl:"/AsyncUpload.axd",progressUrl:"/UploadProgress.axd",cancelUrl:"/UploadProgress.axd?cancel=true",fileSelector:"input[type='file']",identifierAttr:"uploadid",asyncSubmitFormCss:"async_submit_form",uploadFileHiddenInputSuffix:"_upload_hidden",getProgressInterval:500,uploadAllFilesOneTime:!1,popupProgressBarInTopWindow:!1,redirectIframeID:null,redirectIframeDialogOptions:{},autoSubmitAfterSelected:!1,allowAlwaysUpload:!1},_target:null,_dialog:null,_dialogContent:null,_dialogShown:!1,_cancel:!1,_init:function(){var t=this,i;if(t._cancel=!1,t._options.uploadUrl.indexOf("?")<0&&(t._options.uploadUrl=t._options.uploadUrl+"?1=1"),t._dialogContent==null&&(t._dialogContent=t._prepareProgressDialog()),t._options.autoSubmitAfterSelected)if(i=t.ie(),i==!1||i>=9)t._target.on("change","input[type='file']",function(){t._target.submit()});else t._target.find("input[type='file']").change(function(){t._target.submit()});t._target.submit(function(){var i;if(t._options.allowAlwaysUpload&&n(this).data("file_uploaded",!1),n(this).data("file_uploaded")==!0)return!0;if(t._prepareToSubmitFileHiddens(),n(this).validate&&!n(this).validate().form())return!1;var s=n(this),f=s.find(t._options.fileSelector),r=!1;if(f.each(function(t,i){r=r||n(i).val()!=""}),!r)return!0;t._cancel=!1;t._clearAll();i=0;f.each(function(r,u){var f=n(u),e=f.attr(t._options.identifierAttr),h;if(f.val()!=""){i++;f.replaceWith(f.clone());var o=n('<form enctype="multipart/form-data" action="'+t._options.uploadUrl+"&identifier="+e+'" method="post" style="display:none" class="'+t._options.asyncSubmitFormCss+'"><\/form>'),s=f.val(),c=s.lastIndexOf("\\")+1,l=s.substr(c);o.attr({id:e+"_form",target:e+"_iframe",filename:l});o.append(f);h=n('<iframe style="display:none"/>').attr({id:e+"_iframe",name:e+"_iframe"});n("body").append(o).append(h)}});n("form."+t._options.asyncSubmitFormCss).each(function(){var i=n(this).find(t._options.fileSelector),r=i.attr(t._options.identifierAttr);t._updateFileList({UploadID:r,StatusText:Vision.Resources.AsyncUpload_DefaultStatusText,Percent:0,FileName:n(this).attr("filename"),SizeStr:Vision.Resources.AsyncUpload_DefaultSizeStr,IsValid:!0})});var u=[],e=function(r){var h=n(r).find(t._options.fileSelector),e=h.attr(t._options.identifierAttr),s,f;t._updateFileList({UploadID:e,StatusText:Vision.Resources.AsyncUpload_DefaultStatusText,Percent:0,FileName:n(r).attr("filename"),SizeStr:Vision.Resources.AsyncUpload_DefaultSizeStr,IsValid:!0});r.submit();s=0;f=setInterval(function(){if(t._cancel==!0){clearInterval(f);t._clearAll();return}n.ajax(t._options.progressUrl+"?t="+s++,{data:{id:e},success:function(e){e!=!1&&(t._updateFileList(e),e.Status>=3&&(n.inArray(e.UploadID,u)<0&&u.push(e.UploadID),u.length>=i&&setTimeout(function(){t._dialog.close(!0)},2e3),clearInterval(f),n(r).remove(),n("iframe[name='"+n(r).attr("target")+"']").remove(),t._options.uploadAllFilesOneTime||o()))},type:"get",dataType:"json"})},t._options.getProgressInterval)},o=function(){if(n("form."+t._options.asyncSubmitFormCss).length>0){var i=n("form."+t._options.asyncSubmitFormCss)[0];e(i)}};return t._options.uploadAllFilesOneTime?n("form."+t._options.asyncSubmitFormCss).each(function(){e(this)}):o(),i>0?!1:void 0})},_prepareProgressDialog:function(){var u=this,t,i,r;return u._options.popupProgressBarInTopWindow==!0&&(n=(window.top||window).$),t=n("<div class='progress_container' style='display:none'><\/div>"),i=n("<div class='progress_div'/>"),t.append(i),r=n('<table class="progress_table"><thead><tr><th class="name_td">'+Vision.Resources.AsyncUpload_ProgressBar_ColumnTitles_Name+'<\/th><th class="size_td">'+Vision.Resources.AsyncUpload_ProgressBar_ColumnTitles_Size+'<\/th><th class="progress_td">'+Vision.Resources.AsyncUpload_ProgressBar_ColumnTitles_Progress+"<\/th><\/tr><\/thead><tbody><\/tbody><\/table>"),i.append(r),t.append('<div class="progress_notice">'+Vision.Resources.AsyncUpload_ProgressBar_Notice+"<\/div>"),t},_prepareToSubmitFileHiddens:function(){var t=this,i=typeof t._options.uploadFileHiddenInputSuffix,r;uploadFileHiddenInputSuffixFunc=i=="string"?function(){return t._options.uploadFileHiddenInputSuffix}:i=="function"?t._options.uploadFileHiddenInputSuffix:function(){return"_upload_hidden"};r=t._target.find(t._options.fileSelector);r.each(function(i,r){var h=uploadFileHiddenInputSuffixFunc(r,i),u=n(r),f,e,o,s;u.siblings(".async_upload_cus_hiddens").remove();f=u.attr("name");e=n("<input class='async_upload_cus_hiddens' type='hidden'/>");e.val(u.attr(t._options.identifierAttr));e.attr("name",f+h);u.after(e);o=n("<input class='async_upload_cus_hiddens' type='hidden'/>");o.attr("name",f+h+".UploadedOriginalNameHidden");o.val(n(u).prev("input.file_input_cus").val());u.after(o);s=n("<input class='async_upload_cus_hiddens' type='hidden'/>");s.attr("name",f+h+".UploadedFileChangedHidden");s.val(n(u).val().length>0?"true":"false");u.after(s)})},_showProgressDialog:function(){var t=this,i,r;t._dialogShown||t._cancel||(i=window,t._options.popupProgressBarInTopWindow==!0&&(i=window.top||window),r=i.$.viClientDialog({id:"progress_dialog",title:Vision.Resources.AsyncUpload_ProgressBar_Titles_Uploading,actions:[],html:t._dialogContent,useFrame:!1,onClosed:function(r){var f=t._target.find(t._options.fileSelector),u,e,o;f.each(function(i,r){var u=n("<input type='file'/>");u.attr({name:n(r).attr("name"),style:n(r).attr("style"),"class":n(r).attr("class"),multiple:n(r).attr("multiple"),accept:n(r).attr("accept")}).attr(t._options.identifierAttr,n(r).attr(t._options.identifierAttr));n(r).hide();n(r).parent().append(u);t._cancel&&n.ajax(t._options.cancelUrl,{data:{id:n(r).attr(t._options.identifierAttr)},success:function(){},type:"get"})});f.each(function(t,i){n(i).remove()});t._dialogShown=!1;u=typeof r!="undefined"&&r==!0;u?(t._target.find(t._options.fileSelector).each(function(){n(this).rules&&n(this).rules("remove")}),t._options.redirectIframeID?(e=n.extend({},t._options.redirectIframeDialogOptions,{id:t._options.redirectIframeID,html:t._dialogContent,useFrame:!0,redirectFrame:!0}),o=i.$.viClientDialog(e),setTimeout(function(){t._target.data("file_uploaded",!0);t._target.submit()},200),o.open()):(t._target.data("file_uploaded",!0),t._target.submit())):(t._cancel=!u,t._clearAll())}}),t._dialogContent.show(),r.open(),t._dialog=r,t._dialogShown=!0)},_clearAll:function(){var t=this;n("form."+t._options.asyncSubmitFormCss).each(function(i,r){var u=n(this).find(t._options.fileSelector).attr(t._options.identifierAttr);n(r).remove();n("iframe[name='"+n(r).attr("target")+"']").remove()});t._dialogContent.find("div.progress_div table tbody").html("")},_createProgressBar:function(t){var i="progress",u=t.status||"";u=="Error"&&(i="invalid_file");var f=t.pecentage||0,s=t.width||100,r=Math.round(f*100,4)/100+"%",e=n("<span><\/span>").addClass(i).width(r).text(r),o=n("<div><\/div>").addClass("progress_total");return n(o).append(e)},_updateFileList:function(t){var e,u,h,i,f;if(typeof t!="undefined"&&t.UploadID!=null){e=this;e._showProgressDialog();var o=e._dialogContent.find(".progress_table tbody"),v=t.StatusText,y=t.Percent==NaN?0:t.Percent,c=e._createProgressBar({pecentage:y,status:v}),r=o.find("td[uploadid='"+t.UploadID+"']");if(r.length<=0){if(r=n("<td uploadid='"+t.UploadID+"'/>"),r.addClass("progress_td"),t.IsValid)r.append(n(c));else{i=t.Message;i||(i=t.StatusText);var l=i.length>18?i.substr(0,15)+"...":i,a=n("<span class='invalid_file'/>").html(l).attr("title",t.Message),s=n("<div class='progress_total'/>");s.append(a);r.append(s)}u=t.FileName;h=u;u.length>20&&(h=u.substr(0,3)+"..."+u.substr(u.length-14,14));var p=n("<span title='"+u+"'/>").html(h),w=n("<td/>").append(p).addClass("name_td"),b=n("<td/>").append(t.SizeStr).addClass("size_td"),f=n("<tr uploadid='"+t.UploadID+"'/>").append(w).append(b).append(r).addClass("show-tooltip");o.append(f)}else if(t.IsValid)r.find("div.progress_total").replaceWith(c),f=n(o).find("tr[uploadid='"+t.UploadID+"']"),f.find("td.size_td").html(t.SizeStr);else{i=t.Message;i||(i=t.StatusText);var l=i.length>18?i.substr(0,15)+"...":i,a=n("<span class='invalid_file'/>").html(l).attr("title",t.Message),s=n("<div class='progress_total'/>");s.append(a);r.html(s);f=n(o).find("tr[uploadid='"+t.UploadID+"']");f.find("td.size_td").html(t.SizeStr)}}},ie:function(){var n=navigator.userAgent.toLowerCase();return n.indexOf("msie")!=-1?parseInt(n.split("msie")[1]):!1}};t.isSupport=function(){try{var t=window.FormData&&"upload"in n.ajaxSettings.xhr()&&window.File&&window.FileList&&window.FileReader;return t!=null&&t!=!1}catch(i){return!1}};t.prototype={_options:{uploadUrl:"/AsyncUpload.axd",progressUrl:"/UploadProgress.axd",cancelUrl:"/UploadProgress.axd?cancel=true",fileSelector:"input[type='file']",identifierAttr:"uploadid",asyncSubmitFormCss:"async_submit_form",uploadFileHiddenInputSuffix:"_upload_hidden",getProgressInterval:500,uploadAllFilesOneTime:!1,popupProgressBarInTopWindow:!1,redirectIframeDialogOptions:{},redirectIframeID:null,autoSubmitAfterSelected:!1,allowAlwaysUpload:!1,checkMaxMultipleUploadImageCount:null,useDataInsteadProp:!1,allowAlertWhenError:!1,checkFileNameFullPathLength:null,checkAcceptFileExtensions:null,maxConcurrentPosts:4},_target:null,_dialog:null,_dialogContent:null,_dialogShown:!1,_cancel:!1,_filesInfo:{files:[],InvalidFileIDs:[],TotalInvalidFilesSelected:0,TotalUploadedFiles:0,TotalValidFilesSelected:0,BytesTotalLength:0,BytesUploadedLength:0},_init:function(){var t=this,i;if(t._cancel=!1,t._options.uploadUrl.indexOf("?")<0&&(t._options.uploadUrl=t._options.uploadUrl+"?1=1"),t._dialogContent==null&&(t._dialogContent=t._prepareProgressDialog()),i=function(){n.isIEBrowser()?t._target.find("input[type='file']").replaceWith(t._target.find("input[type='file']").clone(!0)):t._target.find("input[type='file']").val("")},t._options.autoSubmitAfterSelected)t._target.on("change","input[type='file']",function(){if(t._options.checkMaxMultipleUploadImageCount){var r=n(this)[0].files;if(r&&r.length>t._options.checkMaxMultipleUploadImageCount.maxMultipleCount)return t._options.allowAlertWhenError?alert(t._options.checkMaxMultipleUploadImageCount.errorMessage):t._showErrorMessage({uploadedFile:t._options.checkMaxMultipleUploadImageCount.errorMessage}),i(),!1}t._target.submit()});t._target.submit(function(){var r,s,h,c;if(t._filesInfo={files:[],InvalidFileIDs:[],TotalInvalidFilesSelected:0,TotalUploadedFiles:0,TotalValidFilesSelected:0,BytesTotalLength:0,BytesUploadedLength:0},t._options.allowAlwaysUpload&&n(this).data("file_uploaded",!1),n(this).data("file_uploaded")==!0)return!0;if(n(this).validate&&!n(this).validate().form())return t._options.allowAlertWhenError?n(this).validate().errorList.length>0&&alert(n(this).validate().errorList[0].message):t._showErrorMessage({uploadedFile:n(this).validate().errorList[0].message}),i(),!1;var y=n(this),e=y.find(t._options.fileSelector),o=t._options.useDataInsteadProp||!1;if(e.each(function(t,i){o=o||n(i).val()!=""}),!o)return!0;if(r=[],t._options.useDataInsteadProp?n(e).each(function(i,u){var f=n(u).attr(t._options.identifierAttr),e=n(u).data("files")||[];n(e).each(function(n,t){t.__identifier=f+"_"+n;t.__fileInput=u;t.__fileInputID=f;r.push(t)})}):n(e).each(function(i,u){var f=n(u).attr(t._options.identifierAttr);n(u.files).each(function(n,t){t.__identifier=f+"_"+n;t.__fileInput=u;t.__fileInputID=f;r.push(t)})}),t._options.checkMaxMultipleUploadImageCount&&r.length>t._options.checkMaxMultipleUploadImageCount.maxMultipleCount)return t._options.allowAlertWhenError?alert(t._options.checkMaxMultipleUploadImageCount.errorMessage):t._showErrorMessage({uploadedFile:t._options.checkMaxMultipleUploadImageCount.errorMessage}),i(),!1;if(t._filesInfo._files=r,t._filesInfo.TotalValidFilesSelected=r.length,t._prepareToSubmitFileHiddens(r),t._cancel=!1,t._clearAll(),s=r.length,h=!0,t._options.checkFileNameFullPathLength&&n(r).each(function(n,i){var r=t._options.checkFileNameFullPathLength.maxLength+10+33+i.name.length;r>=260&&(h=!1)}),!h)return t._options.allowAlertWhenError?alert(t._options.checkFileNameFullPathLength.errorMessage):t._showErrorMessage({uploadedFile:t._options.checkFileNameFullPathLength.errorMessage}),i(),!1;if(c=!0,t._options.checkAcceptFileExtensions&&n(r).each(function(i,r){var u=n.getFileExtension(r.name),f=t._options.checkAcceptFileExtensions.acceptFileExtensions.indexOf(u+",")<0&&!t._options.checkAcceptFileExtensions.acceptFileExtensions.endsWith(u);f&&(c=!1)}),!c)return t._options.allowAlertWhenError?alert(t._options.checkAcceptFileExtensions.errorMessage):t._showErrorMessage({uploadedFile:t._options.checkAcceptFileExtensions.errorMessage}),i(),!1;var l=[],a=t._options.maxConcurrentPosts?t._options.maxConcurrentPosts:r.length,f=[],u=[],p=function(n){for(var t=0,i=r.length;t<i;t++)if(r[t].__identifier===n)return r[t];return null},w=function(t){f.splice(n.inArray(t.__identifier,f),1);v()},b=function(t){u.splice(n.inArray(t.__identifier,u),1);f.push(t.__identifier);k(t)},v=function(){var t,i,n,r,e;if(f.length<a)for(t=a-f.length,i=t>=u.length?u.length:t,n=0;n<i;n++)try{r=u[n];e=p(r);b(e);n--;i--}catch(o){}},k=function(i){var u=new XMLHttpRequest,f,o,e;u.upload.addEventListener("progress",function(){},!1);u.onreadystatechange=function(){};u.open("POST",t._options.uploadUrl+"&identifier="+i.__identifier,!0);f=new FormData;f.append(i.__identifier,i);u.send(f);o=0;e=setInterval(function(){if(t._cancel==!0){clearInterval(e);t._clearAll();return}n.ajax(t._options.progressUrl+"?t="+o++,{data:{id:i.__identifier},success:function(u){if(u!=!1){i.__uploadedLength=u.UploadedLength>i.size?i.size:u.UploadedLength;var f=0;n(r).each(function(){f+=this.__uploadedLength||0});t._filesInfo.BytesUploadedLength=f;u.Status>3&&t._filesInfo.InvalidFileIDs.indexOf(u.UploadID)==-1&&(t._filesInfo.InvalidFileIDs.push(u.UploadID),t._filesInfo.TotalInvalidFilesSelected++);u.Status>=3&&(n.inArray(u.UploadID,l)<0&&(l.push(u.UploadID),u.Status==3&&(t._filesInfo.TotalUploadedFiles++,u.Percent=100)),l.length>=s&&setTimeout(function(){t._dialog.close(!0)},2e3),clearInterval(e),w(i));t._updateFileList(u)}},type:"get",dataType:"json"})},t._options.getProgressInterval)};return n(r).each(function(){var n=this;t._filesInfo.BytesTotalLength+=n.size;u.push(n.__identifier);t._updateFileList({UploadID:n.__identifier,StatusText:Vision.Resources.AsyncUpload_DefaultStatusText,Percent:0,FileName:n.name,SizeStr:Vision.Resources.AsyncUpload_DefaultSizeStr,IsValid:!0})}),v(),s>0?!1:void 0})},_prepareProgressDialog:function(){var u=this,t,i,r;return u._options.popupProgressBarInTopWindow==!0&&(n=(window.top||window).$),t=n("<div class='progress_container' style='display:none'><\/div>"),i=n("<div class='progress_div'/>"),t.append(i),r=n('<table class="progress_table"><thead><tr><th class="name_td">'+Vision.Resources.AsyncUpload_ProgressBar_ColumnTitles_Name+'<\/th><th class="size_td">'+Vision.Resources.AsyncUpload_ProgressBar_ColumnTitles_Size+'<\/th><th class="progress_td">'+Vision.Resources.AsyncUpload_ProgressBar_ColumnTitles_Progress+"<\/th><\/tr><\/thead><tbody><\/tbody><\/table>"),i.append(r),t.append('<div class="progress_total_info"><span id="TotalInvalidSelectedCount" class="invalid">0 invalid files<\/span><br /><span id="TotalUploadedSize">0 KB<\/span>&nbsp;/&nbsp;<span id="TotalSelectedSize">0 KB<\/span><br /><span id="TotalUploadedCount">0 files uploaded<\/span>&nbsp;/&nbsp;<span id="TotalValidSelectedCount">0 valid files<\/span><br /><div id="TotalPercentage"><\/div><\/div>'),t.append('<div class="progress_notice">'+Vision.Resources.AsyncUpload_ProgressBar_Notice+"<\/div>"),t},_prepareToSubmitFileHiddens:function(t){var r=this,f=null,e=typeof r._options.uploadFileHiddenInputSuffix,u;f=e=="string"?function(){return r._options.uploadFileHiddenInputSuffix}:e=="function"?r._options.uploadFileHiddenInputSuffix:function(){return"_succeeds["+i+"]._hidden"};u=[];n(t).each(function(t,i){var c=f(i.__fileInput,t),r=n(i.__fileInput),e,o,s,h;u.indexOf(i.__fileInputID)<0&&(r.siblings(".async_upload_cus_hiddens").remove(),u.push(i.__fileInputID));e=r.attr("name");o=n("<input class='async_upload_cus_hiddens' type='hidden'/>");o.val(i.__identifier);o.attr("name",e+c);r.after(o);s=n("<input class='async_upload_cus_hiddens' type='hidden'/>");s.attr("name",e+c+".UploadedOriginalNameHidden");s.val(i.name);r.after(s);h=n("<input class='async_upload_cus_hiddens' type='hidden'/>");h.attr("name",e+c+".UploadedFileChangedHidden");h.val(n(r).val().length>0?"true":"false");r.after(h)})},_showProgressDialog:function(){var t=this,i,r;t._dialogShown||t._cancel||(i=window,t._options.popupProgressBarInTopWindow==!0&&(i=window.top||window),r=i.$.viClientDialog({id:"progress_dialog",title:Vision.Resources.AsyncUpload_ProgressBar_Titles_Uploading,actions:[],html:t._dialogContent,useFrame:!1,onClosed:function(r){var f=t._target.find(t._options.fileSelector),u,e,o;f.each(function(i,r){var u=n("<input type='file'/>");u.attr({name:n(r).attr("name"),style:n(r).attr("style"),"class":n(r).attr("class"),multiple:n(r).attr("multiple"),accept:n(r).attr("accept")}).attr(t._options.identifierAttr,n(r).attr(t._options.identifierAttr));n(r).hide();n(r).parent().append(u);t._cancel&&n.ajax(t._options.cancelUrl,{data:{id:n(r).attr(t._options.identifierAttr)},success:function(){},type:"get"})});f.each(function(t,i){n(i).remove()});t._dialogShown=!1;u=typeof r!="undefined"&&r==!0;u?(t._target.find(t._options.fileSelector).each(function(){n(this).rules&&n(this).rules("remove")}),t._options.redirectIframeID?(e=n.extend({},t._options.redirectIframeDialogOptions,{id:t._options.redirectIframeID,html:t._dialogContent,useFrame:!0,redirectFrame:!0}),o=i.$.viClientDialog(e),setTimeout(function(){t._target.data("file_uploaded",!0);t._target.submit()},200),o.open()):(t._target.data("file_uploaded",!0),t._target.submit())):(t._cancel=!u,t._clearAll())}}),t._dialogContent.show(),r.open(),t._dialog=r,t._dialogShown=!0)},_clearAll:function(){var n=this;n._dialogContent.find("div.progress_div table tbody").html("")},_createProgressBar:function(t){var r="progress",f=t.status||"",i;f=="Error"&&(r="invalid_file");i=t.pecentage||0;i=i>100?100:i;var s=t.width||100,u=Math.round(i*100,4)/100+"%",e=n("<span><\/span>").addClass(r).width(u).text(u),o=n("<div><\/div>").addClass("progress_total");return n(o).append(e)},_updateFileList:function(t){var i,f,h,r,e;if(typeof t!="undefined"&&t.UploadID!=null){i=this;i._showProgressDialog();var o=i._dialogContent.find(".progress_table tbody"),v=t.StatusText,y=t.Percent==NaN?0:t.Percent,c=i._createProgressBar({pecentage:y,status:v}),u=o.find("td[uploadid='"+t.UploadID+"']");if(u.length<=0){if(u=n("<td uploadid='"+t.UploadID+"'/>"),u.addClass("progress_td"),t.IsValid)u.append(n(c));else{r=t.Message;r||(r=t.StatusText);var l=r.length>18?r.substr(0,15)+"...":r,a=n("<span class='invalid_file'/>").html(l).attr("title",t.Message),s=n("<div class='progress_total'/>");s.append(a);u.append(s)}f=t.FileName;h=f;f.length>20&&(h=f.substr(0,3)+"..."+f.substr(f.length-14,14));var p=n("<span title='"+f+"'/>").html(h),w=n("<td/>").append(p).addClass("name_td"),b=n("<td/>").append(t.SizeStr).addClass("size_td"),e=n("<tr uploadid='"+t.UploadID+"'/>").append(w).append(b).append(u).addClass("show-tooltip");o.append(e)}else if(t.IsValid)u.find("div.progress_total").replaceWith(c),e=n(o).find("tr[uploadid='"+t.UploadID+"']"),e.find("td.size_td").html(t.SizeStr);else{r=t.Message;r||(r=t.StatusText);var l=r.length>18?r.substr(0,15)+"...":r,a=n("<span class='invalid_file'/>").html(l).attr("title",t.Message),s=n("<div class='progress_total'/>");s.append(a);u.html(s);e=n(o).find("tr[uploadid='"+t.UploadID+"']");e.find("td.size_td").html(t.SizeStr)}n("#TotalInvalidSelectedCount").html(i._filesInfo.TotalInvalidFilesSelected+" invalid "+i.formatFileDesc(i._filesInfo.TotalInvalidFilesSelected));n("#TotalUploadedCount").html(i._filesInfo.TotalUploadedFiles+" "+i.formatFileDesc(i._filesInfo.TotalUploadedFiles)+" uploaded");n("#TotalValidSelectedCount").html(i._filesInfo.TotalValidFilesSelected+" valid "+i.formatFileDesc(i._filesInfo.TotalValidFilesSelected));n("#TotalSelectedSize").html(i.formatFileSizeWithAutoSizeType(i._filesInfo.BytesTotalLength));n("#TotalUploadedSize").html(i.formatFileSizeWithAutoSizeType(i._filesInfo.BytesUploadedLength))}},_showErrorMessage:function(t){var e=this,f=e._target,r=f.validate(),u,i;r&&(r.showErrors(t),u=f.find("[data-valmsg-summary=true]"),i=u.find("ul"),i&&i.length&&r.errorList.length&&(i.empty(),u.addClass("validation-summary-errors").removeClass("validation-summary-valid"),n.each(r.errorList,function(){n("<li />").html(this.message).appendTo(i)})))},formatFileDesc:function(n){return n>1||n==0?"files":"file"},formatFileSizeWithAutoSizeType:function(n){var t=1024,i=1048576,r=1073741824;return n<t?n+" B":n<i?Math.round(n*100/t)/100+" KB":n<r?Math.round(n*100/i)/100+" MB":Math.round(n*100/r)/100+" GB"}};n.fn.extend({asyncUpload:function(t){var i=n(this),u=new r(i,t);return i.data("asyncUploadManager",u),i},asyncUploadHtml5:function(i){var u=n(this),f=t.isSupport()?new t(u,i):new r(u,i);return u.data("asyncUploadHtml5Manager",f),u}});n(function(){var t=n("body"),i="input.file_input_cus";t.on("click",i,function(){n(this).next("input.file_input_ori").click()});t.on("focus",i,function(){n(this).blur()});t.on("change","input.file_input_ori",function(){var t=n(this).val(),r=t.lastIndexOf("\\");r>=0&&(t=t.substring(r+1));n(this).prev(i).val(t)});t.on("click","input.file_input_cusbtn",function(){n(this).prev("input.file_input_ori").click();n(this).blur()});t.on("click","a.cancel_upload_file",function(){var r=n(this),t=r.siblings(".file_input_item"),u,f,e;t.html(t.html());t.find(i).val("");u=t.find("label.error");u&&u.remove();f=r.data("uploadid");e=r.data("remove-url");f&&e&&n.post(e,{uploadid:f},function(){})})})}(jQuery),function(n){function t(n,t){this._init(n,t)}t.prototype={_defaultOptions:{draggableSource:"",draggableOptions:{helper:"clone",tolerance:"pointer",zIndex:100,containment:"document",appendTo:"body"},isDraggableElement:null,draggableDataAttrName:"data-vision-data",onDragChanged:function(n,t,i,r){r()},sortableSource:"",sortableOptions:{cursor:"move",revert:300,scroll:!0,opacity:.8,tolerance:"pointer",placeholder:"placeholder",containment:"document",handle:""},isSortableElement:null,sortableDataAttrName:"data-vision-data",onSortChanged:function(n,t,i,r){r()},getPreSortItemData:function(){}},_target:null,_options:{},_draggableOptions:{},_sortableOptions:{},_sortChanged:!1,_init:function(t,i){var r=this;r._target=n(t);r._options=n.extend(!0,{},r._defaultOptions,i);r._draggableOptions=n.extend(!0,{start:function(n,t){return r.invokeEvent("onDragStart",n,t,r)},drag:function(n,t){return r.invokeEvent("onDragDrag",n,t,r)},stop:function(n,t){return r.invokeEvent("onDragStop",n,t,r)}},r._options.draggableOptions,{connectToSortable:r._options.sortableSource});r._sortableOptions=n.extend(!0,{connectWith:n(r._options.sortableSource),start:function(n,t){return r.invokeEvent("onSortStart",n,t,r)},change:function(n,t){return r.invokeEvent("onSortChange",n,t,r)},update:function(n,t){return r.invokeEvent("onSortUpdate",n,t,r)},stop:function(n,t){return r.invokeEvent("onSortStop",n,t,r)}},r._options.sortableOptions);r._target.data("data-dragDropSort",r);r._prepareSortableHandler();r._initDraggable();r._initSortable()},_prepareSortableHandler:function(){var t=this,i=n(t._options.sortableSource);t._sortableOptions.items&&(i=i.find(t._sortableOptions.items));t._sortableOptions.handle&&(i=i.find(t._sortableOptions.handle));i.css("cursor",t._sortableOptions.cursor)},_initDraggable:function(){var t=this;t._destroyDraggable();n(t._options.draggableSource).draggable(t._draggableOptions)},_initSortable:function(){var t=this;t._destroySortable();n(t._options.sortableSource).sortable(t._sortableOptions)},_destroyDraggable:function(){var i=this,t=n(i._options.draggableSource);t.data("draggable")&&t.draggable("destroy")},_destroySortable:function(){var i=this,t=n(i._options.sortableSource);t.data("sortable")&&t.sortable("destroy")},_disableSortAndDrag:function(t){var i=this,r=t?"disable":"enable";n(i._options.sortableSource).sortable(r);n(i._options.draggableSource).draggable(r);t||i._prepareSortableHandler()},_isSortableElement:function(t){var r=this,i=r._options.isSortableElement;return typeof i!="undefined"&&i!=null&&n.isFunction(i)?i(t):n.inArray(n(t)[0],n(r._options.sortableSource).find(r._sortableOptions.items))>=0},_isDraggableElement:function(t){var r=this,i=r._options.isDraggableElement,u;return typeof i!="undefined"&&i!=null&&n.isFunction(i)?i(t):(u=n(r._options.draggableSource).attr("class").replace("ui-draggable","").replace("ui-draggable-handle",""),n(t).is("."+u))},invokeEvent:function(t,i,r,u){var f=u[t];if(typeof f!="undefined"&&n.isFunction(f))return f(i,r,u)},onDragStart:function(n,t,i){i._options.onDragStart&&i._options.onDragStart(n,t,i)},onDragDrag:function(n,t,i){i._options.onDragDrag&&i._options.onDragDrag(n,t,i)},onDragStop:function(n,t,i){i._options.onDragStop&&i._options.onDragStop(n,t,i)},onSortStart:function(n,t,i){i._sortChanged=!1;i._options.onSortStart&&i._options.onSortStart(n,t,i)},onSortChange:function(n,t,i){i._sortChanged=!0},onSortUpdate:function(){},onSortStop:function(t,i,r){var u,f,e,o;if(r._options.onSortStop&&r._options.onSortStop(t,i,r),u=function(){r._disableSortAndDrag(!1)},f=r._options.getPreSortItemData(i.item),r._isSortableElement(i.item)){if(r._sortChanged){e=JSON.parse(n(i.item).attr(r._options.sortableDataAttrName));r._options.onSortChanged(f,e,i.item,u);r._disableSortAndDrag(!0)}}else if(r._isDraggableElement(i.item)){o=JSON.parse(n(i.item).attr(r._options.draggableDataAttrName)||"null");r._options.onDragChanged(f,o,i.item,u);r._disableSortAndDrag(!0)}}};n.prototype.extend({dragDropSort:function(i){var r=n(this),u=new t(r,i);return r}})}(jQuery);$(document).ready(function(){var n=null,t=500;$("#dropdownmenu > li").hover(function(){n!=null&&(clearTimeout(n),n=null);var t=$(this),i=$(this).find(">ul");$("#dropdownmenu>li>ul").not(i).css("display","none");$("#dropdownmenu .active").not(t).removeClass("active");i.css("display","block");t.addClass("active")},function(){var i=$(this).find(">ul"),r=$(this);n=setTimeout(function(){i.css("display","none");r.removeClass("active");n=null},t)})});
/*!
 * jQuery resize event - v1.1 - 3/14/2010
 * http://benalman.com/projects/jquery-resize-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function($,n,t){function c(){s=n[f](function(){i.each(function(){var t=$(this),i=t.width(),r=t.height(),n=$.data(this,u);(i!==n.w||r!==n.h)&&t.trigger(o,[n.w=i,n.h=r])});c()},r[h])}var i=$([]),r=$.resize=$.extend($.resize,{}),s,f="setTimeout",o="resize",u=o+"-special-event",h="delay",e="throttleWindow";r[h]=75;r[e]=!0;$.event.special[o]={setup:function(){if(!r[e]&&this[f])return!1;var n=$(this);i=i.add(n);$.data(this,u,{w:n.width(),h:n.height()});i.length===1&&c()},teardown:function(){if(!r[e]&&this[f])return!1;var n=$(this);i=i.not(n);n.removeData(u);i.length||clearTimeout(s)},add:function(n){function o(n,r,f){var e=$(this),o=$.data(this,u);o?(o.w=r!==t?r:e.width(),o.h=f!==t?f:e.height()):o=$.data(this,u,{w:e.width(),h:e.height()});i.apply(this,arguments)}if(!r[e]&&this[f])return!1;var i;if($.isFunction(n))return i=n,o;i=n.handler;n.handler=o}}})(jQuery,this),function(n){n(function(){var i=document.body,t=i.appendChild(t=document.createElement("div"));n.extend(t.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});n.support.minHeight=t.offsetHeight===100;n.support.selectstart="onselectstart"in t;i.removeChild(t).style.display="none"});n.extend(n.fn,{disableSelection:function(){return this.bind((n.support.selectstart?"selectstart":"mousedown")+".disableSelection",function(n){n.preventDefault()})},hasScrollbar:function(){var t=n(this).get(0);return!1|(t.scrollHeight>t.clientHeight&&n(t).css("overflow")=="auto")}})}(jQuery),function(n,t,i){if(document.compatMode==="BackCompat")throw new Error("viClientDialog: Document types require more than xhtml1.0");var u,o=0,c=n(document.getElementsByTagName("html")[0]),f="viClientDialog"+ +new Date,h=t.VBArray&&!t.XMLHttpRequest,s="createTouch"in document&&!("onmousemove"in document)||/(iPhone|iPad|iPod)/i.test(navigator.userAgent),e=!h&&!s,r=function(n){var t,l,h,c;n=n||{};(typeof n=="string"||n.nodeType===1)&&(n={content:n,fixed:!s});l=r.defaults;h=n.follow=this.nodeType===1&&this||n.follow;for(c in l)n[c]===i&&(n[c]=l[c]);return(n.id=h&&h[f+"follow"]||n.id||f+o,t=r.list[n.id],t)?(h&&t.follow(h),t.zIndex(),t):(e||(n.fixed=!1),r.defaults.zIndex=n.zIndex,o++,r.list[n.id]=u?u.constructor(n):new r.fn.constructor(n))};r.version="1.0.0";r.fn=r.prototype={constructor:function(i){var r,f,o,e;return this.closed=!1,this.config=i,this.dom=r=this.dom||this._getDom(),r.wrap.addClass("v-viClientDialog"),i.skin&&r.wrap.addClass(i.skin),r.wrap.css("position",i.fixed?"fixed":"absolute"),r.content.css("padding",i.padding),i.fixed||r.title.css("cursor","move"),i.actions.length==0?r.close.hide():r.close.show(),this.buildActionIcons(),f=i.width,typeof f=="number"&&(o=r.content.outerWidth()-r.content.width(),f+=o/2),i.isFullScreen&&(e=n(t).height(),r.borderHeight||(r.borderHeight=n(r.wrap).outerHeight()),i.height=e-r.borderHeight,n(r.wrap).height(e-r.borderHeight/2)),this.title(i.title).content(i.html).size(f,i.height).time(i.time),this.center(),this.zIndex(),i.lock&&this.lock(),this._addEvent(),this[i.visible?"open":"hidden"](),u=null,r.wrap.data("viClientDialog")||r.wrap.data("viClientDialog",this),i.url&&!i.useFrame||i.url&&i.useFrame||i.initialize&&i.initialize.call(this),i.resize==!0&&r.content.css("overflow-y","auto"),this},content:function(t){var i,r,f,o,u=this,e=u.dom.content,s=e[0];return this._elemBack&&(this._elemBack(),delete this._elemBack),t&&(n.type(t)=="string"||jQuery&&t instanceof jQuery)&&e.html(t).viCompile(),t&&t.nodeType===1&&(o=t.style.display,i=t.previousSibling,r=t.nextSibling,f=t.parentNode,this._elemBack=function(){i&&i.parentNode?i.parentNode.insertBefore(t,i.nextSibling):r&&r.parentNode?r.parentNode.insertBefore(t,r):f&&f.appendChild(t);t.style.display=o;u._elemBack=null},e.html(""),s.appendChild(t).viCompile(),n(t).show()),u.winResize(),u},title:function(n){var t=this.dom,i=t.outer,r=t.title,u="vi-state-noTitle";return n===!1?(r.hide().html(""),i.addClass(u)):(r.show().html(n),i.removeClass(u)),this},ajaxRequest:function(t,i){var u=this,r=t||{},f=r.method||"GET";n("body").loading(!0,{mask:!0,opacity:.8},!1);n.vision?n.vision().ajax(r.url,{cache:!1,type:f,data:n.extend({_dialogAjax:!0},r.data||{}),success:function(n){u.content(n);r.processContent&&r.processContent(n);i&&i.call(u);r.initialize&&r.initialize.call(u)}}):n.frontendAjax?n.frontendAjax(r.url,{cache:!1,type:f,data:n.extend({_dialogAjax:!0},r.data||{}),success:function(n){u.content(n);r.processContent&&r.processContent(n);i&&i.call(u);r.initialize&&r.initialize.call(u)}}):n.ajax({url:r.url,cache:!1,type:f,data:n.extend({_dialogAjax:!0},r.data||{}),success:function(n){u.content(n);r.processContent&&r.processContent(n);i&&i.call(u);r.initialize&&r.initialize.call(u)}})},position:function(){var n=this.dom,r=this.config,t=n.wrap[0],u=n.window,e=n.document,o=this.config.fixed,s=o?0:e.scrollLeft(),h=o?0:e.scrollTop(),c=u.width(),l=u.height(),a=t.offsetWidth,v=t.offsetHeight,y=(c-a)/2+s,p=(l-v)/2+h,i=t.style;return i.left=Math.max(parseInt(y),s)+"px",r.isFullScreen?i.top=0:r.disableTop===!1&&(i.top=Math.max(parseInt(p),h)+"px"),this._follow&&(this._follow.removeAttribute(f+"follow"),this._follow=null),this},size:function(n,t){var i=this.dom,r=i.main[0].style;return typeof n=="number"&&(n=n+"px"),typeof t=="number"&&(i.content.css("overflow","auto"),i.content.hasScrollbar?i.content.css("overflow-x","hidden"):i.content.css("overflow-x","auto"),t=t+"px"),typeof n!="undefined"&&n&&(r.width=n),typeof t!="undefined"&&t&&(r.height=t),this},follow:function(t){var it=n(t),a=this.config;if(!t||!t.offsetWidth&&!t.offsetHeight)return this.position(this._left,this._top);var r=a.fixed,v=f+"follow",y=this.dom,p=y.window,w=y.document,rt=p.width(),ut=p.height(),b=w.scrollLeft(),k=w.scrollTop(),u=it.offset(),d=t.offsetWidth,ft=t.offsetHeight,e=r?u.left-b:u.left,h=r?u.top-k:u.top,c=this.dom.wrap[0],g=c.style,o=c.offsetWidth,l=c.offsetHeight,i=e-(o-d)/2,s=h+ft,nt=r?0:b,tt=r?0:k;return i=i<nt?e:i+o>rt&&e-o>nt?e-o+d:i,s=s+l>ut+tt&&h-l>tt?h-l:s,g.left=parseInt(i)+"px",g.top=parseInt(s)+"px",this._follow&&this._follow.removeAttribute(v),this._follow=t,t[v]=a.id,this},open:function(){var t=this,i=t.config,r;return t.dom.wrap.css("visibility","hidden"),i.url&&!i.useFrame?t.ajaxRequest(i,function(){n("body").loading(!1,null,!0);t.dom.wrap.css("visibility","visible");t.dom.outer.addClass("vi-state-visible");t._isLock&&t._lockMask.show();i.autoAdjustHeight&&(t.dom.content.bind("resize",function(n){t.adjustHeight();n.stopPropagation()}),t.dom.content.children().bind("resize",function(n){t.adjustHeight();n.stopPropagation()}))}):(i.url||i.redirectFrame)&&i.useFrame?(n("body").loading(!0,{mask:!0,opacity:.8}),r=n("<iframe "+(i.url?'src="'+i.url:"")+'" title="'+i.title+'" frameborder="0" style="border:0;display:block;" name="'+i.id+'" id="'+i.id+'"><\/iframe>').width(i.width).height(i.height),t.content(r),r.iframeLoad(function(){t.dom.wrap.css("visibility","visible");t.dom.outer.addClass("vi-state-visible");t._isLock&&t._lockMask.show();n("body").loading(!1,null,!0)}),t.center(),t.winResize()):(t.dom.wrap.css("visibility","visible"),t.dom.outer.addClass("vi-state-visible"),t._isLock&&t._lockMask.show(),t.winResize(),i.autoAdjustHeight&&t.dom.content.bind("resize",function(n){t.adjustHeight();n.stopPropagation()})),t},hidden:function(){return this.dom.wrap.css("visibility","hidden"),this.dom.outer.removeClass("vi-state-visible"),this._isLock&&this._lockMask.hide(),this},close:function(n){var o;if(this.closed)return this;var t=this.dom,i=t.wrap,h=r.list,s=this.config.beforeunload;if(s&&s.call(this)===!1)return this;if(r.focus===this&&(r.focus=null),this._follow&&this._follow.removeAttribute(f+"follow"),this._elemBack&&this._elemBack(),this.config.onClosed&&this.config.onClosed(n,t),this.time(),this.unlock(),this._removeEvent(),delete h[this.config.id],u)i.remove();else{u=this;t.title.html("");t.content.html("");i[0].className=i[0].style.cssText="";t.outer[0].className="vi-outer";i.css({left:0,top:0,position:e?"fixed":"absolute"});for(o in this)this.hasOwnProperty(o)&&o!=="dom"&&delete this[o];this.hidden()}return this.closed=!0,this},time:function(n){var i=this,t=this._timer;return t&&clearTimeout(t),n&&(this._timer=setTimeout(function(){i.close()},n)),this},zIndex:function(){var t=this.dom,i=r.focus,n=r.defaults.zIndex++,u=this.getMaxzIndexofOtherDialogs();return u>=n&&(n=u),t.wrap.css("zIndex",n),this._lockMask&&this._lockMask.css("zIndex",n-1),i&&i.dom.outer.removeClass("vi-state-focus"),r.focus=this,t.outer.addClass("vi-state-focus"),this},getMaxzIndexofOtherDialogs:function(){var t=0;return n(r.defaults.otherDialogs).each(function(){n(this)[0].style.zIndex>t&&(t=n(this)[0].style.zIndex)}),t},lock:function(){if(this._isLock)return this;var f=this,o=this.config,s=this.dom,u=document.createElement("div"),i=n(u),h=r.defaults.zIndex-1;return this.zIndex(),s.outer.addClass("vi-state-lock"),i.css({zIndex:h,position:"fixed",left:0,top:0,width:"100%",height:"100%",overflow:"hidden"}).addClass("vi-mask"),e||i.css({position:"absolute",width:n(t).width()+"px",height:n(document).height()+"px"}),i.bind("dblclick",function(){o.dblUnlock&&f.close()}),document.body.appendChild(u),this._lockMask=i,this._isLock=!0,this},unlock:function(){return this._isLock?(this._lockMask.unbind(),this._lockMask.hide(),this._lockMask.remove(),this.dom.outer.removeClass("vi-state-lock"),this._isLock=!1,this):this},_getDom:function(){var e=document.body,h=this.config,i;if(!e)throw new Error('viClientDialog: "documents.body" not ready');i=document.createElement("div");i.style.cssText="position:absolute;left:0;top:0";h.visible||(i.style.cssText="visibility: hidden");i.innerHTML=r._templates;e.appendChild(i,e.firstChild);for(var o,f=0,u={},s=i.getElementsByTagName("*"),c=s.length;f<c;f++)o=s[f].className.split("vi-")[1],o&&(u[o]=n(s[f]));return u.window=n(t),u.document=n(document),u.wrap=n(i),h.resize&&u.resize.css("display","inline-block"),u},center:function(){var n=this.config.follow||this._follow;n?this.follow(n):this.position()},winResize:function(){var i=this,r;return i.config.isFullScreen?i.dom.fullscreen?i.setFullScreen("winResize"):(r=n(t).height(),n(i.dom.wrap).height(r-i.dom.borderHeight/2),n(i.dom.main).height(r-i.dom.borderHeight)):(i.adjustHeight(),i.center()),i},adjustHeight:function(){var t=this,i=t.config,n=t.dom,s=n.window,u;if(i&&i.fixed&&i.height==="auto"){if(!i.autoAdjustHeight)return;var f=n.titleBar.outerHeight(!0),r=s.height(),e=n.main.outerHeight(!0)-n.main.height()+2;n.wrap.outerHeight(!0)>r&&t.size(n.main.outerWidth(),r-f-e);u=t.getContentHeight();u>n.main.innerHeight()?t.size(n.main.outerWidth(),Math.min(r-f-e,u)):t.size(n.main.outerWidth(),"auto");var o=n.wrap[0],h=r,c=o.offsetHeight,l=(h-c)/2,a=o.style;a.top=Math.max(parseInt(l),0)+"px"}},getContentHeight:function(t){var i=this,u=i.config,t=t||!0,f=i.dom,r=u.minHeight||0;return f.content.children().each(function(i,u){n(u).is(":visible")&&(r+=n(u).outerHeight(t))}),r},buildActionIcons:function(){var r=this,f=r.config,i=r.dom,s=f.actions,u=f.customIcons,t,e,o;s.length==0?i.close.hide():i.close.show();t=i.actions.children("ul");e=t.find("> li > a").toArray();n.isArray(u)&&u.length>0?(o=n.map(e,function(t){return n(t).attr("data-name")}),n(u).each(function(u,f){if(n.isPlainObject(f)&&n.inArray(f.name,o)==-1){t.append('<li><a href="javascript:/*viClientDialog*/;" data-name="'+f.name+'" class="'+f.cssClass+'">'+f.content+"<\/a><\/li>");var e=t.find("li > a[data-name='"+f.name+"']");e.bind("click",function(){var t=n(this);f.eventCall&&f.eventCall.call(r,t)});i[f.name]=e}})):t.find("> li:not(:has('a.vi-close'))").remove()},setFullScreen:function(i){var r=this,o=r.dom,u=r.config,l=o.wrap[0],s=n(t),h=s.height(),c=s.width(),a=l.style,f=2,e;if(i&&i=="winResize"&&u.isFullScreen){e=r.dom.main.outerHeight(!0)-r.dom.main.height();r.size(c-f,h-o.titleBar.outerHeight(!0)-e-f);return}u.isFullScreen?(r.size(r.originalWidth,r.originalHeight),u.isFullScreen=!1,r.center(),u.autoAdjustHeight=!0):(u.isFullScreen=!0,u.autoAdjustHeight=!1,r.originalWidth=r.dom.main.width(),r.originalHeight=r.dom.main.height(),e=r.dom.main.outerHeight(!0)-r.dom.main.height(),r.size(c-f,h-o.titleBar.outerHeight(!0)-e-f),r.position())},_addEvent:function(){var n=this,t=this.dom;t.wrap.bind("click",function(i){var r=i.target;if(r===t.close[0])return n.close(),!1}).bind("mousedown",function(){n.config.lock==!1&&n.zIndex()})},_removeEvent:function(){var n=this;n.dom.wrap.unbind();n.config.autoAdjustHeight&&(n.dom.content.unbind("resize"),n.dom.content.children().unbind("resize"))}};r.fn.constructor.prototype=r.fn;n.fn.dialog=n.fn.viClientDialog=function(){var n=arguments;return this[this.live?"live":"bind"]("click",function(){return r.apply(this,n),!1}),this};r.focus=null;r.get=function(n){return n===i?r.list:r.list[n]};r.list={};n(document).bind("keydown",function(t){var f=t.target,o=f.nodeName,i=r.focus,e=t.keyCode,u;i&&i.config.esc&&(u=n.isArray(i.config.actions)&&n.inArray("close",i.config.actions)>-1,e===27&&u&&i.close())});n(t).bind("resize",function(){var n=r.list;for(var t in n)n[t].config.fixed&&n[t].config.lock&&n[t].winResize()});r._templates='<div class="vi-outer"><div class="vi-c"><div class="vi-titleBar"><div class="vi-title"><\/div><div class="vi-actions"><ul><li><a class="vi-close" href="javascript:/*viClientDialog*/;">×<\/a><\/li><\/ul><\/div><\/div><div class="vi-main"><div class="vi-content"><\/div><\/div><div class="vi-se"><span class="vi-resize"><\/span><\/div><\/div><\/div>';r.defaults={html:'<div class="vi-loading"><span>loading..<\/span><\/div>',title:"message",initialize:null,beforeunload:null,width:"auto",height:"auto",padding:"0 16px",skin:"viClientDialog-light",time:null,esc:!0,visible:!1,actions:["close"],customIcons:[],follow:null,lock:!0,fixed:!0,zIndex:1e4,url:null,useFrame:!1,dblUnlock:!1,resize:!1,onClosed:function(){},processContent:function(){},autoAdjustHeight:!0,disableTop:!1,otherDialogs:".RadWindow",isFullScreen:!1};this.viClientDialog=n.viDialog=n.viClientDialog=r}(this.vi||this.jQuery,this),function(n){var u=function(){var n=this,t=function(t){var i=n[t];n[t]=function(){return i.apply(n,arguments)}};t("start");t("over");t("end")};u.prototype={start:function(t){n(document).bind("mousemove",this.over).bind("mouseup",this.end);this._sClientX=t.clientX;this._sClientY=t.clientY;this.onstart(t.clientX,t.clientY);return!1},over:function(n){this._mClientX=n.clientX;this._mClientY=n.clientY;this.onover(n.clientX-this._sClientX,n.clientY-this._sClientY);return!1},end:function(t){n(document).unbind("mousemove",this.over).unbind("mouseup",this.end);this.onend(t.clientX,t.clientY);return!1}};var t=n(window),i=n(document),r=document.documentElement,s=!("minWidth"in r.style),f=!s&&"onlosecapture"in r,e="setCapture"in r,o=function(){return!1},h=function(n){var g,nt,tt,it;if(!viClientDialog.focus.config.isFullScreen){var r=new u,rt=viClientDialog.focus,h=rt.dom,ut=h.wrap,v=h.outer,l=h.title,ft=h.main,s=ut[0],y=l[0],a=ft[0],c=s.style,p=a.style,w=n.target===h.resize[0]?!0:!1,b=s.style.position==="fixed",k=b?0:i.scrollLeft(),d=b?0:i.scrollTop(),et=t.width()-s.offsetWidth+k,ot=t.height()-s.offsetHeight+d;h.title.disableSelection();r.onstart=function(){w?(g=a.offsetWidth,nt=a.offsetHeight):(tt=s.offsetLeft,it=s.offsetTop);i.bind("dblclick",r.end).bind("dragstart",o);f?l.bind("losecapture",r.end):t.bind("blur",r.end);e&&y.setCapture();v.addClass("vi-state-drag")};r.onover=function(n,t){var i,r,u,f;w?(i=n+g,r=t+nt,c.width="auto",p.width=Math.max(0,i)+"px",c.width=s.offsetWidth+"px",p.height=Math.max(0,r)+"px"):(u=Math.max(k,Math.min(et,n+tt)),f=Math.max(d,Math.min(ot,t+it)),c.left=u+"px",c.top=f+"px")};r.onend=function(){i.unbind("dblclick",r.end).unbind("dragstart",o);f?l.unbind("losecapture",r.end):t.unbind("blur",r.end);e&&y.releaseCapture();v.removeClass("vi-state-drag")};r.start(n)}};n(document).bind("mousedown",function(n){var t=viClientDialog.focus;if(t){var i=n.target,r=t.config,u=t.dom;if(r.drag!==!1&&i===u.title[0]||r.resize!==!1&&i===u.resize[0])return h(n),!1}})}(this.vi||this.jQuery),function(n){n.widget("custom.viTemplate",{options:{enabledSortAndDrag:!0,template:".page_template",column:".sortable_col:not(.site_template_column)",widget:".widget",widgetTitle:".widget_title",widgetDragPlaceHolderCss:"widget_drag_holder",widgetInstanceWrapper:".widget_wrapper",widgetInstanceWrapperHandle:".widget_wrapper_title",requestTimeout:1e3,widgetAdd:function(){},widgetMove:function(){},widgetRefresh:function(){},widgetTitleRefresh:function(){},widgetCommand:".widget_wrapper_title .widget_command:not(.disabled)",sharedDialog:"body",refreshTemplate:function(){n.vision().refresh()},createNewWidgetSnap:function(t){return n('<div class="widget_wrapper"><div class="widget_wrapper_title edit"><span class="title">&nbsp;<\/span><div class="toolbar"><\/div><\/div><div class="widget_wrapper_body edit">'+Vision.Resources.UI_Widgets_viTemplate_WidgetRefreshLoadingText+'<\/div><div class="widgetFooter"><\/div><\/div>').find(".title").html(t).parents(".widget_wrapper")},widgetDraggingHelperStyle:{width:"55px",height:"55px"},enableSiteTemplate:!1,siteTemplate:"self",siteTemplateColumn:".site_template_column.sortable_col",siteTemplateWidgetAdd:function(){},siteTemplateWidgetMove:function(){},siteTemplateWidgetRefresh:function(){}},_create:function(){if(this.element.addClass(n.fn.viTemplate.constants.TemplateCssClassName),typeof this.options.widgetAdd!="undefined"&&this.options.widgetAdd!=null&&typeof this.options.widgetMove!="undefined"&&this.options.widgetMove!=null){var t=this;this.element.each(function(){if($element=n(this),t.options.enabledSortAndDrag){n(t.options.widgetInstanceWrapperHandle,$element).css("cursor","move").attr("title",Vision.Resources.UI_Widgets_viTemplate_WidgetDragToMoveTitle);n(t.options.column,$element).each(function(){var t=n(this).data("sortable");t&&t.destroy()}).sortable({connectWith:n(t.options.column,$element),cursor:"move",cancel:"a,input",helper:"clone",items:n(t.options.widgetInstanceWrapper,t.options.column),tolerance:"pointer",revert:300,placeholder:t.options.widgetDragPlaceHolderCss,handle:n(t.options.widgetInstanceWrapperHandle,t.options.column),start:function(i,r){r.placeholder.height(r.item.height());var u=r.item,f=JSON.parse(u.attr("vidata")||"{}");n(t.options.column,$element).each(function(){var t=n(this),i=JSON.parse(t.attr("vidata")||"{}");!i.WidthType||f.WidthType&i.WidthType||t.addClass("column-overlay")})},out:function(){},change:function(t,i){typeof i.item!="undefined"?i.placeholder.height(i.item.height()):i.placeholder.height(n.fn.viTemplate.constants.PlaceHolderDefaultHeight)},over:function(t,i){var r=n(this);r.hasClass("column-overlay")?i.placeholder.hide():i.placeholder.show()},receive:function(t,i){var e=n(this),u=JSON.parse(e.attr("vidata")||"{}"),r=i.item.closest(".widget_wrapper"),f;r.length&&r.attr("vidata")&&(f=JSON.parse(r.attr("vidata")||"{}"),!u.WidthType||f.WidthType&u.WidthType||i.sender&&i.sender.sortable("cancel"))},stop:function(i,r){var e,h,c;if(n(".column-overlay").removeClass("column-overlay"),e=r.item,e.hasClass("ui-draggable")){var l=n(this),a=JSON.parse(e.attr("vidata")||"{}"),o=JSON.parse(l.attr("vidata")||"{}");if(o.WidthType&&!(a.WidthType&o.WidthType)){r.item.remove();return}}var v=t.options.template=="self"?$element:n(t.options.template,$element),y=JSON.parse(v.attr("vidata")),p=r.item.parents(".sortable_col"),s=JSON.parse(p.attr("vidata")),f=JSON.parse(r.item.attr("vidata")),w=r.item.prev(t.options.widgetInstanceWrapper),u=n.extend({},{WidgetInstanceID:0,ColumnID:s.ColumnID},n.parseJSON(w.attr("vidata")));r.item.attr(n.fn.viTemplate.constants.IsWidgetKey)=="1"?(h=r.item.find(t.options.widgetTitle).text(),c=t.options.createNewWidgetSnap(h),r.item.replaceWith(c),t.disableSortAndDrag(!0),t._requestAddWidget({WidgetID:f.WidgetID,PreWidgetInstanceID:u.WidgetInstanceID,ToColumnID:u.ColumnID,NonPublishedPageTemplateID:y.PageTemplateID},r.item,!0,function(n){n.result||r.item.remove()}),t._checkRequest()):f.PreWidgetInstanceID!=u.WidgetInstanceID||f.ColumnID!=s.ColumnID?(t.disableSortAndDrag(!0),t._requestMoveWidget({WidgetInstanceID:f.WidgetInstanceID,PreWidgetInstanceID:u.WidgetInstanceID,ToColumnID:u.ColumnID},r.item,!0),t._checkRequest()):n(t.options.column,$element).sortable("cancel")}});t.options.enableSiteTemplate&&n(t.options.siteTemplateColumn,$element).each(function(){var t=n(this).data("sortable");t&&t.destroy()}).sortable({connectWith:n(t.options.siteTemplateColumn,$element),cursor:"move",cancel:"a,input",helper:"clone",items:n(t.options.widgetInstanceWrapper,t.options.siteTemplateColumn),tolerance:"pointer",revert:300,placeholder:t.options.widgetDragPlaceHolderCss,handle:n(t.options.widgetInstanceWrapperHandle,t.options.siteTemplateColumn),start:function(n,t){t.placeholder.height(t.item.height())},change:function(t,i){typeof i.item!="undefined"?i.placeholder.height(i.item.height()):i.placeholder.height(n.fn.viTemplate.constants.PlaceHolderDefaultHeight)},stop:function(i,r){var h=t.options.siteTemplate=="self"?$element:n(t.options.siteTemplate,$element),a=JSON.parse(h.attr("vidata")||"{}"),c=r.item.parents("div.site_template_column"),e=JSON.parse(c.attr("vidata")||"{}"),f=JSON.parse(r.item.attr("vidata")||"{}"),l=r.item.prev(t.options.widgetInstanceWrapper),u=n.extend({},{WidgetInstanceID:0,ColumnID:e.ColumnID},JSON.parse(l.attr("vidata")||"{}")),o,s;r.item.attr(n.fn.viTemplate.constants.IsWidgetKey)=="1"?(o=r.item.find(t.options.widgetTitle).text(),s=t.options.createNewWidgetSnap(o),r.item.replaceWith(s),t.disableSortAndDrag(!0),t._requestAddWidget({WidgetID:f.WidgetID,PreWidgetInstanceID:u.WidgetInstanceID,ToColumnID:u.ColumnID},r.item,!1,function(n){n.result||r.item.remove()}),t._checkRequest()):f.PreWidgetInstanceID!=u.WidgetInstanceID||f.ColumnID!=e.ColumnID?(t.disableSortAndDrag(!0),t._requestMoveWidget({WidgetInstanceID:f.WidgetInstanceID,PreWidgetInstanceID:u.WidgetInstanceID,ToColumnID:u.ColumnID},r.item,!1),t._checkRequest()):n(t.options.siteTemplateColumn,$element).sortable("cancel")}});var i=t.options.column;t.options.enableSiteTemplate&&(i+=","+t.options.siteTemplateColumn);n(t.options.widget).each(function(){var t=n(this).data("draggable");t&&t.destroy()}).draggable({connectToSortable:n(i,$element),helper:"clone",tolerance:"pointer",zIndex:100,containment:"document",appendTo:"body",start:function(n,i){var r=i.helper;r.addClass("dragging dragging_widget").css("z-index",1e3).css("opacity",.8);r.css(t.options.widgetDraggingHelperStyle)},drag:function(){},stop:function(){n(".column-overlay").removeClass("column-overlay")}}).each(function(t,i){n(i).attr(n.fn.viTemplate.constants.IsWidgetKey,"1")})}});this._initializeCommands()}},destroyAll:function(){this.destroy();this.element.removeClass(n.fn.viTemplate.constants.TemplateCssClassName);this.destroySortAndDrag()},reinitialize:function(){this.destroySortAndDrag();this.element.removeClass(n.fn.viTemplate.constants.TemplateCssClassName);this._create()},disableSortAndDrag:function(t){var i=t?"disable":"enable";n(this.options.column,this.element).not(".mobile_only").sortable(i);n(this.options.widget).draggable(i)},destroySortAndDrag:function(){n(this.options.column,this.element).each(function(){var t=n(this.element).data("sortable");t&&t.destroy()});n(this.options.siteTemplateColumn,this.element).each(function(){var t=n(this.element).data("sortable");t&&t.destroy()});n(this.options.widget).each(function(){var t=n(this.element).data("draggable");t&&t.destroy()})},_checkRequest:function(){var n=this,t=setTimeout(function(){n.disableSortAndDrag(!1);clearTimeout(t)},n.options.requestTimeout)},_requestAddWidget:function(t,i,r,u){var f=r?this.options.widgetAdd:this.options.siteTemplateWidgetAdd;n.isFunction(f)?f(t,i,u):typeof f=="string"&&this._postAndRefresh(f,t,u)},_requestMoveWidget:function(t,i,r,u){var f=r?this.options.widgetMove:this.options.siteTemplateWidgetMove;n.isFunction(f)?f(t,i,u):typeof f=="string"&&this._postAndRefresh(f,t,u)},_requestRefreshWidget:function(t,i,r){var u=r?this.options.widgetRefresh:this.options.siteTemplateWidgetRefresh,f,e;n.isFunction(u)?u(t,i):typeof u=="string"&&(f=n(".widget_wrapper_body",i),e=0,n.vision().post(u,t,function(t){var r,u,e;n(f).html(t).viCompile();r=f.find(".title_widget.on_page");r.length>0&&(u=JSON.parse(r.attr("v-data")),n("input#SubTitle").val(u.PageSubTitle),n("input#Title").val(u.PageTitle));e=window.setTimeout(function(){n(".async_widget_container:not(.custominvoke)").loadAsyncContainer();window.clearTimeout(e)},10);n(i).loading(null,null,!0)},"html",function(){}))},_postAndRefresh:function(t,i,r){var u=this;n.vision().post(t,i,function(n){r&&r(n);n.result?u.options.refreshTemplate():alert(n.message)},"JSON",function(){})},_initializeCommands:function(){var t=this;n(this.options.widgetCommand,$element).each(function(){var f=n(this).closest(t.options.widgetInstanceWrapper),c=JSON.parse(f.attr("vidata")),u=n(this).attr(n.fn.viTemplate.constants.ClickEventAttr),l=n(this).closest(t.options.column).length>0;if(typeof u!="undefined"){var e=!1,i=null,r=null;try{try{i=n.evalFunc(u)}catch(a){i=JSON.parse(u)}if(n.isFunction(i))r=i;else if(n.isPlainObject(i))if(typeof i.NeedDialog=="undefined"){var o=i.Action,s=i.Confirm,h=i.CallBackFunc;o&&(r=function(i){var r=!0;if(s&&(r=confirm(s)),r&&t._postAndRefresh(o,i),h)try{n.evalFunc(h)()}catch(u){}})}else i.NeedDialog==!0&&(r=function(){var u=i.WidgetHelpUrl,r={url:i.Url,helpIconUrl:u,title:i.Title,width:800,useFrame:!1,zIndex:1e3,customIcons:[{name:"fullscreen",cssClass:"vi-fullscreen",content:'<i class="fa fa-window-maximize" aria-hidden="true"><\/i>',eventCall:function(n){n=n.find("i");n.hasClass("fa-window-restore")?n.removeClass("fa-window-restore"):n.addClass("fa-window-restore");this.setFullScreen()}},{name:"help",cssClass:"vi-help",content:"?",eventCall:function(t){var i,r;t.hasClass("help_dialog_active")?(n(".w_setting_dialog").show(),n(".w_setting_help_dialog").html("").hide(),t.removeClass("help_dialog_active")):(n("body").loading(!0,{mask:!0}),i=[],n(".w_setting_dialog").find(".setting_label:visible").each(function(){i.push(n(this).attr("data-key"))}),r=this.config.helpIconUrl,n.vision().ajax({url:r,type:"POST",data:{keys:i.join(",")},cache:!1,success:function(i){n("body").loading(null,null,!0);t.addClass("help_dialog_active");n(".w_setting_dialog").hide();n(".w_setting_help_dialog").html(i).show()},error:function(){n("body").loading(null,null,!0)}}))}}]};r.onClosed=function(n){n==!0&&t._requestRefreshWidget(c,f,l)};r.initialize=function(){var n=this;n.dom.help&&n.dom.help.removeClass("help_dialog_active");n.dom.fullscreen&&n.dom.fullscreen.find("i").removeClass("fa-window-restore")};n.viClientDialog(r,t.options.sharedDialog).open()});e=!0}catch(v){}e&&r!=null&&n(this).click(function(){try{var i=JSON.parse(n(this).closest(t.options.widgetInstanceWrapper).attr("vidata"));r({WidgetInstanceID:i.WidgetInstanceID})}catch(u){}})}})}});n.fn.viTemplate.constants={WidgetIDAttrName:"widgetid",WidgetInstanceIDAttrName:"widgetinstanceid",ColumnIDAttrName:"columnid",PageTemplateIDAttrName:"pagetemplateid",PlaceHolderDefaultHeight:200,IsWidgetKey:"iswidget",TemplateCssClassName:"vi-template",Page:".page",PageTemplate:".page_template",ClickEventAttr:"clickEvent"}}(jQuery);window.visionOptions=window.visionOptions||{virtualApplicationPath:"/",logOnPath:"Admin/LogOn",logOffPath:"Admin/Account/LogOff",enableSessionTimeout:!1,sessionTimeoutInMinutes:20,timeToAlertBeforeSessionTimeoutInMinutes:5,extendSessionTimeoutPath:"Admin/Account/ExtendSessionTimeout"};window._timeoutIDForsessionExpiration=null;visionManager.prototype={_options:{sessionExtensionMode:"server"},_window:window.top,constructor:function(n){$.extend(this._options,n)},setupOptions:function(n){return $.extend(this._options,n),this},customAjax:function(n){var f=$(n).attr("v-form-method"),t=$(n).attr("v-href"),i=$(n).attr("v-json-data"),r=$.evalFunc($(n).attr("v-callback")),u=$(n).attr("v-returntype");f.toLowerCase()=="post"?$.vision().post(t,i,r,u):$.vision().get(t,i,r,u)},refresh:function(n){n?window.location.href=n:window.location.hash?window.location.reload(!0):window.location.href=window.location.href},buildPath:function(n){return window.visionOptions.virtualApplicationPath+n},logOn:function(n){this._window.location=typeof n=="undefined"||n==null||n==""?this.buildPath(this._window.visionOptions.logOnPath):this.buildPath(this._window.visionOptions.logOnPath+"?ReturnUrl="+encodeURIComponent(n))},logOff:function(){this._window.location=this.buildPath(this._window.visionOptions.logOffPath)},post:function(n,t,i,r,u){u=u||function(){alert(Vision.Resources.Admin_Errors_AjaxPostActionFailed)};this.ajax({url:n,error:u,success:i,data:t,dataType:r,type:"POST"})},postWithJson:function(n,t,i,r){r=r||function(){alert(Vision.Resources.Admin_Errors_AjaxPostActionFailed)};this.ajax({url:n,type:"POST",contentType:"application/json",traditional:!0,data:JSON.stringify(t),success:i,error:r})},get:function(n,t,i,r,u){u=u||function(){alert(Vision.Resources.Admin_Errors_AjaxGetActionFailed)};this.ajax({url:n,error:u,success:i,data:t,dataType:r,type:"GET"})},ajax:function(n,t){if(this._window.visionOptions.enableSessionTimeout){var i=this._options.sessionExtensionMode;typeof n=="object"&&n.sessionExtensionMode?i=n.sessionExtensionMode:t&&t.sessionExtensionMode&&(i=t.sessionExtensionMode);i==="client"?this.extendSessionTimeout(function(){jQuery.ajax(n,t)}):(typeof n=="object"?(n.success=this._wrapSessionExtensionSuccess(n.success),n.headers={ExtendSession:!0}):(t=t||{},t.success=this._wrapSessionExtensionSuccess(t.success),t.headers={ExtendSession:!0}),jQuery.ajax(n,t))}else jQuery.ajax(n,t)},_wrapSessionExtensionSuccess:function(n){if(this._window.visionOptions.enableSessionTimeout){var t=this;return function(i,r,u){var f=JSON.parse(u.getResponseHeader("SessionInfo")||"");f&&f.IsAuth?(t.setTimerForSessionExpiration(f.Timeout,f.TimeToAlert),t.refreshToken(f.Token),$.isFunction(n)&&n(i,r,u)):(t._window.alert(Vision.Resources.Admin_Errors_ExtendSessionTimeout),t.refreshToken(""),$.vision().logOn(t._window.location))}}return n},extendSessionTimeout:function(n){if(this._window.visionOptions.enableSessionTimeout){var t=this;$.ajax({type:"POST","async":!0,url:this.buildPath(this._window.visionOptions.extendSessionTimeoutPath),success:function(i){try{typeof i.SessionTimeoutInMinutes=="undefined"&&typeof i.TimeToAlertBeforeSessionTimeoutInMinutes=="undefined"?(t._window.alert(Vision.Resources.Admin_Errors_ExtendSessionTimeout),t.refreshToken(""),$.vision().logOn(t._window.location)):(t.setTimerForSessionExpiration(i.SessionTimeoutInMinutes,i.TimeToAlertBeforeSessionTimeoutInMinutes),t.refreshToken(i.Token),$.isFunction(n)&&n())}catch(r){}}})}else $.isFunction(n)&&n()},extendSessionTimeoutSync:function(){var n=this;$.ajax({type:"POST","async":!1,url:this.buildPath(this._window.visionOptions.extendSessionTimeoutPath),success:function(t){try{typeof t.SessionTimeoutInMinutes=="undefined"&&typeof t.TimeToAlertBeforeSessionTimeoutInMinutes=="undefined"?(n._window.alert(Vision.Resources.Admin_Errors_ExtendSessionTimeout),n.refreshToken(""),$.vision().logOn(n._window.location)):(n.setTimerForSessionExpiration(t.SessionTimeoutInMinutes,t.TimeToAlertBeforeSessionTimeoutInMinutes),n.refreshToken(t.Token))}catch(i){}}})},setTimerForSessionExpiration:function(n,t){var i,r;this._window.visionOptions.enableSessionTimeout&&(i=window.parseInt(n)*6e4-window.parseInt(t)*6e4,this._window._timeoutIDForsessionExpiration!=null&&(this._window.clearTimeout(this._window._timeoutIDForsessionExpiration),this._window._timeoutIDForsessionExpiration=null),r=this,this._window._timeoutIDForsessionExpiration=this._window.setTimeout(function(){r.promptSessionTimeout(n,t)},i))},promptSessionTimeout:function(n,t){if(this._window.visionOptions.enableSessionTimeout){this._window.focus();var i=$.format(Vision.Resources.Admin_Messages_SessionTimeoutFormat,t,n),r=this._window.confirm(i);r&&this.extendSessionTimeout(function(){})}},checkRightPanelCats:function(n){var i=n.hasClass("hidden"),t=!0&&i;n.siblings().each(function(){$(this).is(":visible")||(t=t&&!1)});t?n.parents("li.edit-cats").hide():n.parents("li.edit-cats").show()},refreshToken:function(n){this._window.visionApps&&(this._window.visionApps.token=n)}},function(n){var t=new visionManager;n.extend({vision:function(n){return t.setupOptions(n)}})}(jQuery);$(document).ready(function(){var n,i,e,u;$.vision().setTimerForSessionExpiration($.vision()._window.visionOptions.sessionTimeoutInMinutes,$.vision()._window.visionOptions.timeToAlertBeforeSessionTimeoutInMinutes);var o=function(n,t){$(n).data("ajaxCount",0).attr("disabled","disabled");t=t||$(".approval-buttons-bar .action input[type='submit']");t.attr("disabled","disabled").addClass("disabled")},r=function(n,t,i){var r=$(n).data("ajaxCount"),u;r>=t-1?(u=setTimeout(function(){$(n).removeAttr("disabled");var t=$(i||".approval-buttons-bar .action input[type='submit']");t.removeAttr("disabled").removeClass("disabled");clearTimeout(u)},500),$(n).data("ajaxCount",0)):$(n).data("ajaxCount",r+1)},f=function(n){var u=$(n),i;u.attr("disabled","disabled");var t=u.parents("div.content-group-container"),f=t.is("[controlledEle]")?t.attr("controlledEle"):null,s=$(f);o(n,s);i=u.val();i==""&&(i="0");var c=parseInt(i),h=t.is("[CgAjaxOptions]")?JSON.parse(t.attr("CgAjaxOptions")):[],e=h.length;e==0&&r(n,0,s);$(h).each(function(t,i){var u=$.extend(i.Data,{ContentGroupID:c}),s,o;if(typeof i.DataHandler!="undefined"&&i.DataHandler!=null)try{u=$.evalFunc(i.DataHandler)(u)}catch(h){}if(s=i.URL,o=i.RefreshPanel,$(o).length>0)try{$.vision().get(s,u,function(t){var u=$(o).html(t);if(typeof i.RefreshHandler!="undefined"&&i.RefreshHandler!=null)try{$.evalFunc(i.RefreshHandler)(u)}catch(s){}r(n,e,f)},"HTML",function(){})}catch(h){}else r(n,e,f)})},t=$("div.content-group-container.content-group"),s=t.find("input[type='hidden']");t.find("select[enableonload]").removeAttr("disabled").removeAttr("enableonload");n=t.attr("action");n=n!=undefined?n.toLowerCase():n;i=$(".content-group.need-ajax-refresh select");i.length>0?((n=="add"||n=="copy")&&i.find("option").length==1&&f(i.find("option")[0]),i.change(function(){f(this)})):(e=t.is("[controlledEle]")?t.attr("controlledEle"):null,u=$(e)||$(".approval-buttons-bar .action input[type='submit']"),u.attr("disabled","disabled").addClass("disabled").hide(),u.closest(".approval-buttons-bar").length>0&&($(".approval-buttons-bar .approval-notes").hide(),$(".approval-buttons-bar .action.back input").removeAttr("disabled").removeClass("disabled").show()));$(".widget_optional_settings, #add_customhandler, #edit_customhandler, .razor_format_container").on("click",".razor_template_help_notes_wrapper .help_notes_title a.cnticon",function(){$(this).hasClass("cnticon-actions-down")?($(this).removeClass("cnticon-actions-down").addClass("cnticon-actions-up"),$(this).closest(".razor_template_help_notes_wrapper").find(".help_notes_body").show()):($(this).removeClass("cnticon-actions-up").addClass("cnticon-actions-down"),$(this).closest(".razor_template_help_notes_wrapper").find(".help_notes_body").hide())});$("section#edit_page,section#configure_widgets").length<=0&&($("del").remove(),$("ins").each(function(){$(this).replaceWith($(this).html())}))});$(document).on("keydown",".search_area input.searchinput",function(n){n.keyCode=="13"&&$(this).parent().find("input.searchicon").click()});$("body").on("click",".data_source_add_data_item",function(){var n=$("<input type='hidden'/>").attr({id:"Field_Setting_DataSource_Index",name:"Field.Setting.DataSource.Index",modeltype:"index"}),t=$("<input type='radio' name='field.setting.default' disabled='disabled' />"),i=$("<label>  "+Vision.Resources.Admin_DataSource_ValueLabel+": <\/label>"),r=$("<label>  "+Vision.Resources.Admin_DataSource_TextLabel+": <\/label>"),u=$("<a title='"+Vision.Resources.Admin_DataSource_AddButtonTitle+"'> "+Vision.Resources.Admin_DataSource_AddButtonText+"<\/a>").addClass("data_source_add_data_item addlink"),f=$("<a title='"+Vision.Resources.Admin_DataSource_DeleteButtonTitle+"'> "+Vision.Resources.Admin_DataSource_DeleteButtonText+"<\/a>").addClass("data_source_delete_data_item deletelink"),e=$("<li><\/li>").append(t).append(i).append("<input type='text' modeltype='value' class='dataSourceTextBox'/>").append(r).append("<input type='text' modeltype='text' class='dataSourceTextBox'/>").append(u).append(f).append(n);$(this.parentNode).after(e);ResetIDName()});$("body").on("click",".data_source_delete_data_item",function(){$(this.parentNode).find("[name='field.setting.default'][value='true']")!=null&&$("input#Field_Setting_DefaultValue").val("");$(this.parentNode).remove();ResetIDName()});$("body").on("click","ol.data_source_list li input[type='radio']",function(){var n=$(this).parent().find("input[modeltype='value']").val();if($(this).attr("value")!="true"&&typeof n!="undefined"&&n!="")$("ol.data_source_list li input[type='radio']").removeAttr("value"),$(this).attr("value",!0),typeof $("input#Field_Setting_DefaultValue").val()!="undefined"&&$("input#Field_Setting_DefaultValue").val(n);else{if(typeof n=="undefined"||n=="")return!1;$(this).removeAttr("checked");$("ol.data_source_list li input[type='radio']").removeAttr("value");typeof $("input#Field_Setting_DefaultValue").val()!="undefined"&&$("input#Field_Setting_DefaultValue").val("")}});$("body").on("change","ol.data_source_list li input[type='text'][modeltype='value']",function(){var n=$(this).parent().find("input[type='radio']"),t=$(this).parent().find("input[type='radio']").attr("disabled");$(this).val()==""?(n.attr("value")=="true"&&(n.removeAttr("value"),n.removeAttr("checked"),$("input#Field_Setting_DefaultValue").val("")),n.attr("disabled","disabled")):n.removeAttr("disabled")});$("body").on("click","fieldset.grey a.data_source_apply",function(){var t=!1,i=$("#SystemVariableSiteModel_AllowIndividual").prop("checked"),n=i?$(".site_value_field select"):$("select#Value");n.html("");n.each(function(n,i){var r=$(i);$("ol.data_source_list li").each(function(){var i=$(this).find('input[modeltype="text"]').val()==""?$(this).find('input[modeltype="value"]').val():$(this).find('input[modeltype="text"]').val(),n;if($(this).find('input[modeltype="value"]').val()=="")return t=!0,!1;n=$(this).find('input[modeltype="value"]').val();$("<option/>").attr({value:n}).appendTo(r).text(i);typeof $("input#Field_Setting_DefaultValue").val()!="undefined"&&r.val($("input#Field_Setting_DefaultValue").val())})});t&&(n.html(""),alert(Vision.Resources.Admin_DataSource_Errors_DataSourceValueCannotBeEmpty))});typeof $("input#Field_Setting_DefaultValue").val()!="undefined"&&$("input#Field_Setting_DefaultValue").val()!=""&&(defaultValueInput=$("ol.data_source_list li input[type='text'][modeltype='value'][value='"+$("input#Field_Setting_DefaultValue").val()+"']"),typeof defaultValueInput!="undefined"&&(defaultValueInput.parent().find("input[type='radio']").attr("value",!0),defaultValueInput.parent().find("input[type='radio']").attr("checked","checked")));$("body").on("change",".datasource_list_setting .datasource_type",function(){var t,i,r,n;$(this).val().toLowerCase()!="custom"?($(".datasource_li").hasClass("datasource_disabled")||$(".datasource_li").addClass("datasource_disabled"),$(".datasource_li input[disabled]").length<=0&&$(".datasource_li input").attr("disabled","disabled"),t=$(".datasource_type").data("DataSourceJson"),i=t[$(this).val()]):($(".datasource_li").hasClass("datasource_disabled")&&$(".datasource_li").removeClass("datasource_disabled"),$(".datasource_li input[disabled]").length>0&&$(".datasource_li input").removeAttr("disabled"));r=$("#SystemVariableSiteModel_AllowIndividual").prop("checked");n=r?$(".site_value_field select"):$("select#Value");n.html("");$(this).val().toLowerCase()!="custom"?n.each(function(n,t){var r=$(t);$.each(i,function(n,t){$("<option/>").attr({value:t.Value}).appendTo(r).text(t.Text)})}):n.each(function(n,t){var i=$(t);$("ol.data_source_list li").each(function(){var n=$(this).find('input[modeltype="text"]').val()==""?$(this).find('input[modeltype="value"]').val():$(this).find('input[modeltype="text"]').val();if($(this).find('input[modeltype="value"]').val()=="")return isempty=!0,!1;$("<option/>").attr({value:$(this).find('input[modeltype="value"]').val()}).appendTo(i).text(n);typeof $("input#Field_Setting_DefaultValue").val()!="undefined"&&i.val($("input#Field_Setting_DefaultValue").val())})})});(function(n){function t(i,r){this.opts=n.extend({},t.defaults,r);this.menuID="ContextDropDown_"+this.opts.menuID;this.eventType="click."+this.menuID;this.$elm=n(i);this.$panel=n(this.opts.appendTo).find("div#"+this.menuID);this.$panel.length>0||(this.$panel=n("<div id='"+this.menuID+"' style='display:none;'><\/div>").appendTo(this.opts.appendTo));this.dataBag={panelDisplay:!1,eventSourceType:""};this.commands=this.opts.commands;this.init()}t.defaults={menuID:"",url:"",content:function(){},cssClass:"",minHeight:0,minWidth:0,alignTo:null,alignX:"right",offsetX:0,offsetY:0,zIndex:99,showDuration:200,hideDuration:200,triggers:[],spaceTriggers:[],showingElms:[],closingElms:[],appendTo:n("body")[0],onShow:function(){},onHide:function(){},onSuccess:function(){},onError:function(){},commands:{}};t.prototype={init:function(){var u=function(){this.dataBag.panelDisplay?this.hide():this.show()},i,t,r;this.$elm.off(this.eventType);this.$elm.on(this.eventType,n.proxy(function(){this.dataBag.eventSourceType="elm";u.call(this)},this));if(n.isArray(this.opts.triggers))for(t=0;t<this.opts.triggers.length;t++){i=this.opts.triggers[t];n(i).off(this.eventType);n(i).on(this.eventType,n.proxy(function(t){!this._isElementContained(t.target,n(i)[0])||this._isElementContained(t.target,this.opts.spaceTriggers)||this._isElementContained(t.target,this.$elm[0])||(this.dataBag.eventSourceType="triggers",u.call(this))},this))}if(n.isArray(this.opts.spaceTriggers))for(t=0;t<this.opts.spaceTriggers.length;t++){r=this.opts.spaceTriggers[t];n(r).off(this.eventType);n(r).on(this.eventType,n.proxy(function(t){n(r).is(t.target)&&(this.dataBag.eventSourceType="spaceTriggers",u.call(this))},this))}this._initStyle();this.$elm.data("tContextDropDown",this)},show:function(){var n=this;n.dataBag.panelDisplay=!0;n.$panel.html(" ");n._bindBodyEvent(n);n.$panel.slideDown(n.opts.showDuration||200,function(){n.calcPos();n.opts.onShow(n.$elm[0],n.$panel[0],n.dataBag);n.refresh()})},hide:function(){var n=this;try{n.dataBag.panelDisplay=!1;n.$panel.slideUp(n.opts.hideDuration||200,function(){n.opts.onHide(n.$elm[0],n.$panel[0],n.dataBag)})}catch(t){}},refresh:function(){var t=this;t.opts.url?(t.$panel.loading(!0),n.vision().ajax({url:t.opts.url,success:function(i){t.$panel.loading(null,null,!0);i&&n(i).find(".error_page.page_title").length>0?alert(Vision.Resources.UI_Common_FrontendFormPostFailed):t.$panel.html(i);t.calcPos();t.opts.onSuccess(t.$elm[0],t.$panel[0])},error:function(){t.$panel.loading(!1);t.opts.onError(t.$elm[0],t.$panel[0])}})):n.isFunction(t.opts.content)?t.opts.content(t.$elm[0],t.$panel[0]):typeof t.opts.content=="string"&&t.opts.content.length>0?t.$panel.html(t.opts.content):t.$panel.html(" ")},calcPos:function(){var t=typeof this.opts.alignTo=="object"?n(this.opts.alignTo):this.$elm;this.opts.alignX==="left"?this.$panel.offset({top:t.offset().top+t.outerHeight()+this.opts.offsetY,left:t.offset().left+this.opts.offsetX}):this.$panel.offset({top:t.offset().top+t.outerHeight()+this.opts.offsetY,left:t.offset().left+t.outerWidth()-this.$panel.outerWidth()+this.opts.offsetX})},destroy:function(){var i,t,r;try{if(n("body").unbind(this.eventType),this.$panel.html(" ").remove(),this.$panel.removeData("tContextDropDown"),delete this.$panel,this.$elm.unbind(this.eventType),this.$elm.removeData("tContextDropDown"),delete this.$elm,n.isArray(this.opts.triggers))for(t=0;t<this.opts.triggers.length;t++)i=this.opts.triggers[t],n(i).unbind(this.eventType);if(n.isArray(this.opts.spaceTriggers))for(t=0;t<this.opts.spaceTriggers.length;t++)r=this.opts.spaceTriggers[t],n(r).unbind(this.eventType)}catch(u){}},_initStyle:function(){this.opts.cssClass?this.$panel.attr("class","t-ContextDropDown "+this.opts.cssClass):this.$panel.css("background-color","#EAF0DD");var n=this.opts.minHeight||200,t=this.opts.minWidth||200;this.$panel.css("min-height",n+"px");this.$panel.css("min-width",t+"px");this.$panel.css({"z-index":""+this.opts.zIndex,position:"absolute"})},_isElementContained:function(t,i,r){var e=!1,u,f;for(r=r||!1,n.isArray(i)||(i=[i]),u=0;u<i.length;u++)if(f=i[u],e=r?n(f).is(t):n(f).is(t)||n.contains(n(f)[0],t),e)break;return e},_bindBodyEvent:function(t){n("body").off(t.eventType);n("body").on(t.eventType,n.proxy(function(t){var i,r;this._isElementContained(t.target,n.merge([this.$elm[0],this.$panel[0]],this.opts.triggers))||this._isElementContained(t.target,this.opts.spaceTriggers,!0)||(i=this._isElementContained(t.target,this.opts.showingElms),i?(r=this._isElementContained(t.target,this.opts.closingElms),r&&this.$panel.is(":visible")&&(this.dataBag.eventSourceType="closingElms",this.hide())):this.$panel.is(":visible")&&(this.dataBag.eventSourceType="document",this.hide()))},t));this.$panel.data("tContextDropDown",t)}};n.fn.extend({contextDropDown:function(i){var r=n(this);return r.each(function(){new t(this,i)})},contextDropDownCommands:function(){var t=n(this).closest("div[id^='ContextDropDown_']").data("tContextDropDown");if(t)return t.commands}})})(jQuery);$(function(){var t="toolbar",f=$("#"+t);if(!(f.length<=0)&&typeof $.prototype.dragDropSort!="undefined"){var n=f.find("input[type='hidden'].action_urls"),i=n.attr("data-refreshTasksUrl"),r=n.attr("data-addTaskUrl"),u=n.attr("data-moveTaskUrl"),e=n.attr("data-restoreTasksUrl"),o=n.attr("data-deleteTaskUrl");initTaskDragAndDrop(t,r,u,i);$(".toolbar-trash-area").droppable({hoverClass:"toolbar-trash-area-hover",drop:function(n,f){$(f.draggable).is(".task")&&($(f.draggable).fadeOut(100),$.vision().post(o,JSON.parse($(f.draggable).attr("data-vision-data")),function(n){typeof n.IsOk!="undefined"&&n.IsOk?setTimeout(function(){refreshTasks(t,r,u,i);$.refreshTempMessage(n.Message)},500):$.refreshTempMessage(Vision.Resources.Admin_MyTask_DeleteTaskFailedError)},"json",function(){$.refreshTempMessage(Vision.Resources.Admin_MyTask_DeleteTaskFailedError)}))}});$("a.tools_restore_to_default").click(function(){confirm(Vision.Resources.Admin_MyTask_RestoreConfirmMessage)&&$.vision().post(e,{},function(n){typeof n.IsOk!="undefined"&&n.IsOk?(refreshTasks(t,r,u,i),$.refreshTempMessage(n.Message)):$.refreshTempMessage(Vision.Resources.Admin_MyTask_RestoreTaskFailedError)},"json",function(){$.refreshTempMessage(Vision.Resources.Admin_MyTask_RestoreTaskFailedError)})})}}),function(n){function t(i,r){this.opts=n.extend({},t.defaults,r);this.$container=n(i);this.$container.data("tCmsHover",this)}t.defaults={menuOptions:function(){return{}},iconsHtml:function(){return""},hoverTo:"div",iconTo:"",menuText:""};t.prototype={init:function(){var t=function(n){this.setActionBar(n);this.unbindHoverEvent(n);this.bindHoverEvent(n)};this.opts.hoverTo==="self"?t.call(this,this.$container[0]):this.$container.find(this.opts.hoverTo).each(n.proxy(function(n,i){t.call(this,i)},this))},bindHoverEvent:function(t){var i=this;n(t).on("mouseenter.cmshover",function(){if(!(n("body .t-drag-clue").length>0)){n(t).addClass("state-hover");n(t).find("[cid='actionIcon']").attr("class","cnticon cnticon-actions-down").attr("title","show action menu");n(t).find(".item-right").removeAttr("style").css("visibility","visible");var u=n("div.t-window").length>0?[n("div.t-window")[0]]:[],r={url:"",triggers:[n(t)[0]],showingElms:n.merge(u,[n(t)[0]]),cssClass:"contextMenuPanel",alignTo:t,onShow:function(r){n(r).attr("class","cnticon cnticon-actions-up").attr("title","hide action menu");var u=i.$container.find(".actived-item");i.bindHoverEvent(u[0]);u.removeClass("actived-item");u.trigger("mouseleave");n(t).addClass("actived-item");i.unbindHoverEvent(t)},onHide:function(r,u,f){n(r).attr("class","cnticon cnticon-actions-down").attr("title","show action menu");n(t).find(".item-right").removeAttr("style");i.bindHoverEvent(t);n(t).removeClass("actived-item");n(t).trigger("mouseleave");f.eventSourceType&&f.eventSourceType!=="document"&&n(t).trigger("mouseenter")}},f={actionPanel:[n(t).find(".item-right")[0]],actionIcon:[n(t).find("[cid='actionIcon']")[0]]};r=n.extend({},r,i.opts.menuOptions(t,f));n(t).find("[cid='actionIcon']").contextDropDown(r)}});n(t).on("mouseleave.cmshover",function(){n(t).removeClass("state-hover");n(t).find("[cid='actionIcon']").attr("class","cnticon cnticon-actions-down").attr("title","show action menu");n(t).find(".item-right").css("visibility","hidden")})},unbindHoverEvent:function(t){n(t).unbind("mouseenter.cmshover");n(t).unbind("mouseleave.cmshover")},reHover:function(t,i){n(t).trigger("mouseleave.cmshover");n(t).trigger("mouseenter.cmshover");var r=n(t).find("[cid='actionIcon']").data("tContextDropDown");r&&(i?(r.show(),n(t).addClass("state-hover"),n(t).find("[cid='actionIcon']").attr("class","cnticon cnticon-actions-up").attr("title","hide action menu"),n(t).find(".item-right").css("visibility","")):(r.hide(),n(t).removeClass("state-hover"),n(t).find("[cid='actionIcon']").attr("class","cnticon cnticon-actions-down").attr("title","show action menu"),n(t).find(".item-right").css("visibility","hidden")))},setActionBar:function(t){var i=this.opts.iconsHtml(t),r;typeof i!="string"&&(i="");n(t).find("div.item-right").remove();r=n(t);this.opts.iconTo&&this.opts.iconTo!==this.opts.hoverTo&&(r=n(t).children(this.opts.iconTo));r.prepend("<div class='item-right' style='visibility:hidden;'>"+i+"<span cid='actionIcon' class='cnticon cnticon-actions-down' title='"+Vision.Resources.Admin_ContextActionMenu_ShowActionMenuTitle+"'>"+this.opts.menuText+"<\/span><\/div>")}};var i={};i.common=function(n,i){t.call(this,n,i)};i.common.prototype=new t;i.tree=function(i,r){var u=function(t,i){return n.extend({triggers:[],spaceTriggers:[n(t)[0]]},r.menuOptions(t,i))},f=n.extend({hoverTo:"li.t-item > div, > div"},r,{menuOptions:u});t.call(this,i,f)};i.tree.prototype=new t;i.grid=function(i,r){var u=function(t,i){var u=[n(t).children("td:visible").first()[0]];return n(n(t).children("td.space_trigger")).each(function(n,t){u.push(t)}),n.extend({triggers:[n(t)[0]],offsetY:0,alignTo:"[cid='actionIcon']",spaceTriggers:u},r.menuOptions(t,i))},f=n.extend({hoverTo:">table>tbody>tr, >table>tr, >tbody>tr, >tr",iconTo:"td:last"},r,{menuOptions:u});t.call(this,i,f)};i.grid.prototype=new t;i.grid.prototype.setActionBar=function(t){var r=this.opts.iconsHtml(t),i;typeof r!="string"&&(r="");n(t).find("div.item-right").remove();i=n(t);this.opts.iconTo&&this.opts.iconTo!==this.opts.hoverTo&&(i=n(t).children(this.opts.iconTo));i.wrapInner("<div><\/div>");i.prepend("<div class='item-right' style='visibility:hidden;'>"+r+"<span cid='actionIcon' class='cnticon cnticon-actions-down' title='"+Vision.Resources.Admin_ContextActionMenu_ShowActionMenuTitle+"'>"+this.opts.menuText+"<\/span><\/div>")};n.fn.extend({cmsHover:function(t,r){var u=n(this);return u.each(function(){new i[t](this,r).init()})}})}(jQuery);$(function(){function n(n,t,i){var r={title:n,url:t,width:750,useFrame:i,onClosed:function(){return}};$.viClientDialog(r).open()}$("a.info_btn[onlineReferenceUrl]").click(function(t){t.preventDefault();var i=$(this),r=i.attr("onlineReferenceUrl");n("",r,!1)})}),function(n){var t=function(t,i){this.setting=n.extend(this._defaultOptions,i);this.gridView=n(t);this.initialize()};t.prototype={_defaultOptions:{postDataName:null,refreshMethod:function(t,i){t&&t.refreshPage?n.vision().refresh():n.refreshTempMessage(i.Message)},refreshOptions:{refreshPage:!0}},initialize:function(){var t=this,i=t.setting,r=t.gridView,e=t.setting.bulkDeleteButton,s=t.setting.contentDisplayName,o=t.setting.postUrl,f=t.setting.refreshMethod,h=t.setting.ignoreButtonClick,u=t.setting.refreshOptions;r.find("input.list_item_cbx[name='checkedRecords']:enabled").length==0&&r.find("input.bulk_delete_check_all[name='checkAllRecords']:checkbox").prop("disabled",!0);r.find("input.bulk_delete_check_all[name='checkAllRecords']").on("click",function(){var i=n(this);r.find("input.list_item_cbx[name='checkedRecords']:enabled").each(function(t,r){r.checked=i.prop("checked");r.checked?n(r).closest("tr").addClass("list_tr_selected"):n(r).closest("tr").removeClass("list_tr_selected")});t.setDeleteSelectedButtonStatus()});r.on("click","input.list_item_cbx[name='checkedRecords']",function(){var i=n(this);i.prop("checked")?i.closest("tr").addClass("list_tr_selected"):i.closest("tr").removeClass("list_tr_selected");t.setDeleteSelectedButtonStatus()});if(!h)e.on("click",function(){var l,a,h,v,t,c;if(!e.hasClass("bulk_delete_button_disabled")&&r.css("display")!="none"){if(l=r.find("input.list_item_cbx[name='checkedRecords']:checked").length,l==0){alert(Vision.Resources.Admin_BulkDelete_AlertMessage);return}if(a=confirm(n.format(Vision.Resources.Admin_BulkDelete_ConfirmMessageFormat,s)),a==!0&&typeof o!="undefined"){if(n("body").loading(!0,{mask:!0,opacity:.8}),h=[],r.find("input.list_item_cbx[name='checkedRecords']:checked").each(function(t,i){h.push(n(i).val())}),v=u&&u.refreshPage,t={},i.postDataName?t[i.postDataName]=h:t={ids:h},i.postData&&typeof i.postData=="object"&&Object.prototype.toString.call(i.postData).toLowerCase()=="[object object]"&&!i.postData.length)for(c in i.postData)t[c]=i.postData[c];t=n.extend(t,{willRefresh:v});n.vision().postWithJson(o,t,function(t){if(typeof t!="undefined"&&t.IsOk)f(u,t);else{var i=t.Message&&t.Message.length>2?t.Message:Vision.Resources.Admin_Errors_AjaxPostActionFailed;f(u,{Message:i,IsOk:!1})}n("body").loading(null,null,!0)},function(){alert(Vision.Resources.Admin_Errors_AjaxPostActionFailed);f(u,{Message:Vision.Resources.Admin_Errors_AjaxPostActionFailed,IsOk:!1});n("body").loading(null,null,!0)})}else return}})},setDeleteSelectedButtonStatus:function(){var n=this,r=n.setting,i=n.gridView,t=n.setting.bulkDeleteButton;i.find("input.list_item_cbx[name='checkedRecords']:enabled:checked").length>0?t.removeClass("bulk_delete_button_disabled"):t.addClass("bulk_delete_button_disabled")}};n.fn.bulkDeleteItem=function(i){return this.each(function(){var r=n(this),u;if(r.data("bulkDeleteItem"))return r.data("bulkDeleteItem");u=new t(this,i);r.data("bulkDeleteItem",u)})}}(jQuery),function(n){n.fn.sortGridRow=function(t){var i=n.extend({getItemID:function(t){return n(t).find(".grid_item_hidden").val()},sorted:function(){}},t),r=this,u=n(r).find("tbody tr td a.Imageicon-sort").closest("tr"),f=function(t,i){var u=i.children(),r=i.clone();return r.children().each(function(t,i){n(i).width(n(u.get(t)).width())}),r};n(r).find("tbody").sortable({items:u,revert:300,scroll:!0,opacity:.8,tolerance:"pointer",containment:"parent",handle:"td a.Imageicon.sort.Imageicon-sort",helper:f,update:function(t,r){var f=n(r.item),e=f.prev(),o=f.next(),u={sourceID:i.getItemID(f),targetID:"",beforeTarget:!1};e.length>0?n.extend(u,{targetID:i.getItemID(e),beforeTarget:!1}):o.length>0?n.extend(u,{targetID:i.getItemID(o),beforeTarget:!0}):n.extend(u,{targetID:""});u.targetID?i.sorted(u):window.location.href=window.location.href}})}}(jQuery),function(n){return n.extend(n,{getClosestDefaultContentGroupID:function(n){var r=window.top,t,i;for(n=n||window,t=n,i=0;t!=null;){if(i=t.__CurrentContentGroupID,i||t==r)break;t=t.parent}return i||0}}),n.extend(n.fn,{changeToDefualtContentGroup:function(t){var i=n(this);setTimeout(function(){var u,r,f;i.is("select")&&(i.attr("disabled")||(u=i.find("option[selected]").val(),r=n.getClosestDefaultContentGroupID(t),r&&r>0&&(!u||u!=r.toString())&&(f=i.find("option[value='"+r+"']"),f.length>0&&(i.find("option").removeAttr("selected"),f.attr("selected","selected"),i.change()))))},300)}}),this}(jQuery);$(function(){var n=function(n){$(n).find(".export-fields .checkboxlist-container input[type='checkbox']:checked").length<=0?$(n).find("input[type='submit']").attr("disabled","disabled"):$(n).find("input[type='submit']").removeAttr("disabled")};n($(".export-container form"));$("body").on("change",".export-container .export-fields .checkboxlist-container input[type='checkbox']",function(){n($(this).closest("form"))})}),function(n){var t=function(t,i){this.setting=n.extend(this._defaultOptions,i);this.gridView=n(t);this.initialize()};t.prototype={_defaultOptions:{postDataName:null,refreshMethod:function(t,i){t&&t.refreshPage?n.vision().refresh():n.refreshTempMessage(i.Message)},refreshOptions:{refreshPage:!0}},initialize:function(){var t=this,f=t.setting,i=t.gridView,e=t.setting.bulkRestoreButton,s=t.setting.contentDisplayName,o=t.setting.postUrl,u=t.setting.refreshMethod,r=t.setting.refreshOptions;i.find("input.list_item_cbx[name='checkedRecords']:enabled").length==0&&i.find("input.bulk_restore_check_all[name='checkAllRecords']:checkbox").prop("disabled",!0);i.find("input.bulk_restore_check_all[name='checkAllRecords']").on("click",function(){var r=n(this);i.find("input.list_item_cbx[name='checkedRecords']:enabled").each(function(t,i){i.checked=r.prop("checked");i.checked?n(i).closest("tr").addClass("list_tr_selected"):n(i).closest("tr").removeClass("list_tr_selected")});t.setRestoreSelectedButtonStatus()});i.find("input.list_item_cbx[name='checkedRecords']").on("click",function(){var i=n(this);i.prop("checked")?i.closest("tr").addClass("list_tr_selected"):i.closest("tr").removeClass("list_tr_selected");t.setRestoreSelectedButtonStatus()});e.on("click",function(){var c,l,h,a,t;if(!e.hasClass("disabled")){if(c=i.find("input.list_item_cbx[name='checkedRecords']:checked").length,c==0){alert('Please select at least one item before clicking the "Restore Selected" button.');return}if(l=confirm(n.format("Are you sure you want to restore the selected {0}?",s)),l==!0&&typeof o!="undefined")n("body").loading(!0,{mask:!0,opacity:.8}),h=[],i.find("input.list_item_cbx[name='checkedRecords']:checked").each(function(t,i){h.push(n(i).val())}),a=r&&r.refreshPage,t={},f.postDataName?t[f.postDataName]=h:t={ids:h},t=n.extend(t,{willRefresh:a}),n.vision().postWithJson(o,t,function(n){typeof n!="undefined"&&n.IsOk?u(r,n):u(r,{Message:"Post Action Failed!",IsOk:!1})},function(){alert("Post Action Failed!");u(r,{Message:"Post Action Failed!",IsOk:!1})});else return}})},setRestoreSelectedButtonStatus:function(){var n=this,r=n.setting,i=n.gridView,t=n.setting.bulkRestoreButton;i.find("input.list_item_cbx[name='checkedRecords']:enabled:checked").length>0?t.removeClass("disabled"):t.addClass("disabled")}};n.fn.bulkRestoreItem=function(i){return this.each(function(){var r=n(this),u;if(r.data("bulkRestoreItem"))return r.data("bulkRestoreItem");u=new t(this,i);r.data("bulkRestoreItem",u)})}}(jQuery);$(function(){function o(){var u=$(".tab-display-state-master"),f,i,t,e;if(u.length)if(u.val().length==0)$("body").find("input[type='hidden'].hidden-display-tab-state").each(function(){var u=$(this).val(),t,i;u=="1"&&(t=$(this).siblings(".form-tab-display"),t.show(),n(t,!1),i=$(".tab-display-state-master"),r(i,t.attr("id"),!0))});else if(f=u.val(),f)for(i=JSON.parse(f),t=0;t<i.tab_state.length;t++)i.tab_state[t].state&&(e=$("#"+i.tab_state[t].display_name),e.show(),n(e,!1));$("body").find(".form-tab-display").each(function(){var t=$(this),i=t.prev("a.tab-anchor");i.on("click",function(){var i=!1,u;t.is(":visible")?(t.hide(),n(t,!0)):(t.show(),i=!0,n(t,!1));u=$(".tab-display-state-master");r(u,t.attr("id"),i)})})}function r(n,t,i){var e=n.val(),f,u,r;if(e.length>0){for(f=!0,r=JSON.parse(e),u=0;u<r.tab_state.length;u++)if(r.tab_state[u].display_name==t){r.tab_state[u].state=i;f=!1;break}f&&r.tab_state.push({display_name:t,state:i});n.val(JSON.stringify(r))}else r={tab_state:[{display_name:t,state:i}]},n.val(JSON.stringify(r))}function n(n,t){var i=n.prev("a.tab-anchor");t?i.children("span.t-icon").removeClass("t-minus").addClass("t-plus"):i.children("span.t-icon").removeClass("t-plus").addClass("t-minus")}var e=$(".tab-state-master"),u,i,t,f;if(e.length)if(e.val().length==0)$("body").find(".open-default").each(function(){$(this).show();n($(this),!1);var t=$(".tab-state-master");r(t,$(this).attr("id"),!0)});else if(u=$(".tab-state-master").val(),u)for(i=JSON.parse(u),t=0;t<i.tab_state.length;t++)i.tab_state[t].state&&(f=$("#"+i.tab_state[t].display_name),f.show(),n(f,!1));$("body").find(".form-tab").each(function(){var t=$(this),i;t.find(".input-validation-error").length>0&&($(this).show(),n($(this),!1));i=t.prev("a.tab-anchor");i.on("click",function(){var e=i.attr("data-target-id"),u=!1,f;t.is(":visible")?(t.hide(),n(t,!0)):(u=!0,t.show(),n(t,!1));f=$(".tab-state-master");r(f,e,u)})});o();$.pushOnloadFunc(o)});$(function(){$("body").on("click",".favorite-tab-gold.clickable",function(){var n=$(this).attr("data-tabname"),r=$(this).attr("data-tabvalue"),t=$(this).attr("data-url"),i=$(this);return $.vision().ajax({url:t,type:"POST",data:{name:n,value:""},success:function(n){n&&n.IsOk?($.refreshTempMessage("Successfully removed as favorite."),i.addClass("favorite-tab-grey").removeClass("favorite-tab-gold").attr("title","Mark as Favorite")):$.refreshTempMessage("Oops! Tab failed to remove as favorite.")},error:function(){$.refreshTempMessage("Oops! Tab failed to remove as favorite.")}}),!1});$("body").on("click",".favorite-tab-grey.clickable",function(){var n=$(this).attr("data-tabname"),t=$(this).attr("data-tabvalue"),i=$(this).attr("data-url"),r=$(this);return $.vision().ajax({url:i,type:"POST",data:{name:n,value:t},success:function(t){t&&t.IsOk?($.refreshTempMessage("Successfully marked as favorite."),$(".favorite-tab-gold[data-tabname='"+n+"']").addClass("favorite-tab-grey").removeClass("favorite-tab-gold").attr("title",""),r.addClass("favorite-tab-gold").removeClass("favorite-tab-grey").attr("title","Remove as Favorite")):$.refreshTempMessage("Oops! Tab failed to mark as favorite.")},error:function(){$.refreshTempMessage("Oops! Tab failed to mark as favorite.")}}),!1})});$(function(){$.ui.sortable.prototype.refreshPositions=function(n){var u,f,t,i,e,r,o,s;for(this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):!1,u=null,f=null,this.options.iframeToBeFixed&&(u=$(this.options.iframeToBeFixed).offset(),f=$(this.options.iframeToBeFixed).contents().scrollTop()),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),t=this.items.length-1;t>=0;t--)(i=this.items[t],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0])||(e=this.options.toleranceElement?$(this.options.toleranceElement,i.item):i.item,n||(i.width=e.outerWidth(),i.height=e.outerHeight()),r=e.offset(),this.options.iframeToBeFixed?(o=u.left+r.left,s=u.top+r.top-f,i.left=o,i.top=s):(i.left=r.left,i.top=r.top));if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;t>=0;t--)r=this.containers[t].element.offset(),this.options.iframeToBeFixed?(o=u.left+r.left,s=u.top+r.top-f,this.containers[t].containerCache.left=o,this.containers[t].containerCache.top=s):(this.containers[t].containerCache.left=r.left,this.containers[t].containerCache.top=r.top),this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight();return this};$.ui.sortable.prototype._mouseDrag=function(n){var f,r,u,e,t=this.options,i=!1,o,s;for(this.position=this._generatePosition(n),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-n.pageY<t.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+t.scrollSpeed:n.pageY-this.overflowOffset.top<t.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-t.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-n.pageX<t.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+t.scrollSpeed:n.pageX-this.overflowOffset.left<t.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-t.scrollSpeed)):(n.pageY-this.document.scrollTop()<t.scrollSensitivity?i=this.document.scrollTop(this.document.scrollTop()-t.scrollSpeed):this.window.height()-(n.pageY-this.document.scrollTop())<t.scrollSensitivity&&(i=this.document.scrollTop(this.document.scrollTop()+t.scrollSpeed)),n.pageX-this.document.scrollLeft()<t.scrollSensitivity?i=this.document.scrollLeft(this.document.scrollLeft()-t.scrollSpeed):this.window.width()-(n.pageX-this.document.scrollLeft())<t.scrollSensitivity&&(i=this.document.scrollLeft(this.document.scrollLeft()+t.scrollSpeed))),i!==!1&&$.ui.ddmanager&&!t.dropBehaviour&&$.ui.ddmanager.prepareOffsets(this,n)),this.positionAbs=this._convertPositionTo("absolute"),o=null,s=null,this.options.iframeToBeFixed&&(o=$(this.options.iframeToBeFixed).offset(),s=$(this.options.iframeToBeFixed).contents().scrollTop(),this.position.left-=o.left,this.position.top=this.position.top-o.top+s),this.options.axis&&this.options.axis==="y"||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&this.options.axis==="x"||(this.helper[0].style.top=this.position.top+"px"),f=this.items.length-1;f>=0;f--)if((r=this.items[f],u=r.item[0],e=this._intersectsWithPointer(r),e)&&r.instance===this.currentContainer&&u!==this.currentItem[0]&&this.placeholder[e===1?"next":"prev"]()[0]!==u&&!$.contains(this.placeholder[0],u)&&(this.options.type==="semi-dynamic"?!$.contains(this.element[0],u):!0)){if(this.direction=e===1?"down":"up",this.options.tolerance==="pointer"||this._intersectsWithSides(r))this._rearrange(n,r);else break;this._trigger("change",n,this._uiHash());break}return this._contactContainers(n),$.ui.ddmanager&&$.ui.ddmanager.drag(this,n),this._trigger("sort",n,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1}}),function(n,t){function i(n,i){var r=this;t(i.libraryParams).each(function(n,t){switch(t.elementSelectorType){case"custom":t.effect_function=t.customEffectFunction;delete t.customEffectFunction;break;case"self":t.effect_function=r._affect_images;break;default:console.log("Incorrect argument for libraryParams.elementSelectorType");delete t.effect_function}});this._target=n;this._defaultOptions=t.extend(this._defaultOptions,i);this._lazyLoadElements(this._defaultOptions)}t.fn.extend({lazyLoadElements:function(n){var t=this,r=new i(t,n)}});i.prototype={_target:null,_defaultOptions:{lazyLoadParams:null,libraryParams:[{elementLazyLoadSelector:null,elementSelectorType:"self",loadAllElements:!1,customEffectFunction:null,containerCustomSelector:null}]},_lazyLoadElements:function(n){var i=t(this._target);t(n.libraryParams).each(function(t,r){i.find(r.elementLazyLoadSelector).lazyload(n.lazyLoadParams,{effect_function:r.effect_function,load_all_elements:r.loadAllElements,element_select_type:r.elementSelectorType,element_container_selector:r.containerCustomSelector})})},_affect_images:function(n,i,r){var u=t(n);t("<img />").on("load",function(){var f,e;u.hide().attr("src",u.data(r.data_attribute))[r.effect](r.effect_speed);n.loaded=!0;f=t.grep(i,function(n){return!n.loaded});i=t(f);r.load&&(e=i.length,r.load.call(n,e,r))}).attr("src",u.data(r.data_attribute))}};t(function(){t(".grid-view [name='checkAllRecords']").change(function(){t(this).closest(".grid-view").find("[name='checkedRecords']:not([disabled])").prop("checked",t(this).prop("checked"))});t(".default-3sorts-grid .k-grid-header .k-header > a").each(function(){t(this).find("span.k-icon").length<=0&&t(this).append('<span class="k-icon k-i-arrow-bi"><\/span>')});t(".grid-view .k-grid-header .k-header.header-colspan-to, .grid-view td.cell-colspan").remove();t("body").on("click",".shorten-url-wrapper .shorten-url-button",function(){var n=t(this),u=n.data("shorten-post-url"),i=n.closest(".short-url-wrapper-grand").find(".shorten-url-input"),r=i.val();/^[h|H][t|T][t|T][p|P]:\/\/$|^([h|H][t|T][t|T][p|P][s|S]?|[f|F][t|T][p|P]):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|(localhost)|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/.test(r)?t.vision().ajax({url:u,data:{longUrl:r},type:"GET",success:function(r){var u,f;r.IsOK?(u=n.closest(".short-url-wrapper-grand").find("textarea"),u.length>0&&(f=u.val(),f=f.replace(/^Compose message.../g,""),u.val(f),u.val(u.val()+" "+r.ShortUrl),i.val(""),u.hasClass("character-count-input")&&u.characterCounter({maxLength:visionOptions.socialMediaInfo.twitter.maxLength,ignoreCustomMsg:!0,container:function(n){return t(n).parent().parent()}}))):alert(r.ErrorMessage)},error:function(){}}):alert("Please enter a valid URL")});t("body").on("click",".approval-buttons-v2 .action.preview a, .grid-view .preview-button",function(n){var i,r;n.preventDefault();i=t(n.target).attr("href");i&&(r={title:"Preview Mode",url:i,dataType:"json",isFullScreen:!0,fixed:!0,skin:"viClientDialog-Preview",useFrame:!0,zIndex:2147483001,onClosed:function(){t("body #wrapper").show();return}},t.viClientDialog(r).open(),t("body #wrapper").hide())});var n=null;t("body").on("click",".approval-buttons-v2 .action input",function(i){var r=t(i.target),a=r.attr("actiontypeconfirmation"),s=r.attr("noticetext"),h=r.attr("titlebartext"),c,o,l;if(h)i.preventDefault();else return;var f=r.closest("form"),e=r.closest("ul.approval-buttons-v2"),v=e.siblings(".approval-buttons-v2-hidden-button-texts").children(".button-cancel-text").text(),y=e.siblings(".approval-buttons-v2-hidden-button-texts").children(".button-ok-text").text();n==null&&(n=e.find("span.approval-notes").parent().html());c=e.find("span.approval-notes textarea").val();f.find(".approval-notes").parent().remove();f.find("#ApprovalNotes").length==0&&t("<li>"+n+"<\/li>").insertBefore(r.closest("li"));s=s?"":"";var p='<div class="approval-buttons-v2-comment">'.concat('<span class="action-type-confirmation">'+a+"<\/span>").concat(s).concat(n).concat("<span class='remain_characters_wrapper'><p class='remain_characters'><\/p> charater(s) remaining<\/span>").concat('<span><a href="javascript:void(0);" class="command call-close-button">'+v+'<\/a><input class="command primary call-form-submit" type="submit" value="'+y+'"/> <\/span>').concat("<\/div>"),w={title:h,html:p,width:500,height:200,method:"GET",useFrame:!1,skin:"viClientDialog-light",onClosed:function(){}},u=t.viClientDialog(w);u.open();o=t(".approval-buttons-v2-comment .approval-notes textarea");o.val(c);l=o.data("val-length-max")||300;o.characterCounter({maxLength:l,container:t(".approval-buttons-v2-comment")});u.dom.outer.find(".approval-buttons-v2-comment").on("click",".call-form-submit",function(){f.find(".approval-buttons-v2 .approval-notes textarea").val(u.dom.outer.find(".approval-buttons-v2-comment .approval-notes textarea").val());u.close();f.submit()});u.dom.outer.find(".approval-buttons-v2-comment").on("click",".call-close-button",function(){u.close()})});t("body").on("click",".approval-buttons-bar input:submit",function(){var f=t(this).closest("form").find("#actionType"),i,r,n,e,u;f.length>0&&(i=f[0],t(this).closest("form").find("#actionType").not(i).remove());t(i).val(t(this).attr("actionType"));r=t(this).attr("actionUrl");t(this).hasClass("unlock")&&r&&(n=t(this).closest("form"),n.data("validator").cancelSubmit=!0,n.attr("action",r),n.attr("method","post"),n.scope&&n.attr("name")&&(e=n.scope()[n.attr("name")],e.unlocking=!0,u=n.scope().viewModel,u&&(u.save=function(){}),n.submit()))})})}(window,jQuery);;
